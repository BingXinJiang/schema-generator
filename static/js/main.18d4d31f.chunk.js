(this["webpackJsonpfr-generator"]=this["webpackJsonpfr-generator"]||[]).push([[0],{178:function(e,t,a){e.exports=a(312)},183:function(e,t,a){},184:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},303:function(e,t,a){},312:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),l=a.n(i),o=(a(183),a(74)),c=a(6),s=a(23),u=Object(n.createContext)((function(){})),m=Object(n.createContext)({}),d=Object(n.createContext)({}),f=function(){return Object(n.useContext)(u)},p=function(){return Object(n.useContext)(m)},h=function(){return Object(n.useContext)(d)},v=function(e){var t=Object(n.useReducer)((function(e,t){return Object(c.a)({},e,{},t)}),e),a=Object(s.a)(t,2),r=a[0],i=a[1];return[r,function(e,t){i(e)}]};var g={$id:{title:"key",type:"string"},title:{title:"\u6807\u9898",type:"string"},description:{title:"\u8bf4\u660e",type:"string"},width:{title:"\u5143\u7d20\u5bbd\u5ea6",type:"string","ui:options":{placeholder:"\u4f8b\u5982 '50%'"}},labelWidth:{title:"\u6807\u7b7e\u5bbd\u5ea6",type:"string","ui:options":{placeholder:"\u9ed8\u8ba4\u503c\u662f 120"}}},b=[{text:"input",name:"input",widget:"input",schema:{title:"\u7b80\u5355\u8f93\u5165\u6846",type:"string"},setting:{minLength:{title:"\u6700\u77ed\u5b57\u6570",type:"number"},maxLength:{title:"\u6700\u957f\u5b57\u6570",type:"number"}}},{text:"textarea",name:"textarea",widget:"textarea",schema:{title:"\u6587\u672c\u7f16\u8f91\u6846",type:"string",format:"textarea"},setting:{minLength:{title:"\u6700\u77ed\u5b57\u6570",type:"number"},maxLength:{title:"\u6700\u957f\u5b57\u6570",type:"number"}}},{text:"\u989c\u8272\u9009\u62e9",name:"color",widget:"color",schema:{title:"\u989c\u8272\u9009\u62e9",type:"string",format:"color"},setting:{}},{text:"\u65e5\u671f\u9009\u62e9",name:"date",widget:"date",schema:{title:"\u65e5\u671f\u9009\u62e9",type:"string",format:"date"},setting:{}},{text:"\u56fe\u7247\u5c55\u793a",name:"image",widget:"input",schema:{title:"\u56fe\u7247\u5c55\u793a",type:"string",format:"image"},setting:{}},{text:"\u6570\u5b57\u8f93\u5165\u6846",name:"number",widget:"number",schema:{title:"\u6570\u5b57\u8f93\u5165\u6846",type:"number"},setting:{}},{text:"\u6570\u5b57\uff08slider\uff09",name:"slider",widget:"slider",schema:{title:"\u5e26\u6ed1\u52a8\u6761",type:"number","ui:widget":"slider"},setting:{}},{text:"date range",name:"dateRange",widget:"dateRange",schema:{title:"\u65e5\u671f\u8303\u56f4",type:"range",format:"dateTime","ui:options":{placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]}},setting:{minLength:{title:"\u6700\u77ed\u5b57\u6570",type:"number"},maxLength:{title:"\u6700\u957f\u5b57\u6570",type:"number"}}},{text:"object",name:"objectName",schema:{title:"\u5bf9\u8c61",type:"object",properties:{}},widget:"map",setting:{}}].map((function(e){return Object(c.a)({},e,{setting:Object(c.a)({},g,{},e.setting)})})),y=(a(184),a(63)),E=a.n(y),j=[],O=function(e){return r.a.createElement("div",{className:"left-layout"},r.a.createElement("p",{className:"f6 b"},"\u57fa\u7840\u7ec4\u4ef6"),r.a.createElement("ul",{className:"pl0"},b.map((function(t,a){return r.a.createElement("li",{key:a.toString(),className:"left-item"},r.a.createElement(C,Object.assign({},t,e,{key:a.toString()})))}))),r.a.createElement("p",{className:"f6 b"},"\u5b9a\u5236\u7ec4\u4ef6"),r.a.createElement("ul",{className:"pl0"},j.map((function(t,a){return r.a.createElement("li",{key:a.toString(),className:"left-item"},r.a.createElement(C,Object.assign({},t,e,{key:a.toString()})))}))))},C=function(e){var t=e.text,a=e.name,n=e.schema,i=f(),l=p().selected,o=h(),s=o.flatten,u=o.onFlattenChange;return r.a.createElement("div",{className:"left-element",onClick:function(){var e,t=l||"#";if(t&&"0"===t[0]||"#"===t)try{var r=Object(c.a)({},s),o=t.substring(1);e=o+"/"+a+"_"+E()(6),"#"===t&&(e="#/"+a+"_"+E()(6),o="#"),r[o].children.push(e);var m={parent:o,schema:Object(c.a)({},n,{$id:e}),data:void 0,children:[]};r[e]=m,u(r),i({selected:e})}catch(y){console.error(y,"catch")}else{var d=a+"_"+E()(6),f=l.split("/");f.pop(),f.push(d),e=f.join("/");try{var p=Object(c.a)({},s),h=p[l],v=p[h.parent].children,g=v.findIndex((function(e){return e===l}));v.splice(g+1,0,e);var b={parent:h.parent,schema:Object(c.a)({},n,{$id:e}),data:void 0,children:[]};p[e]=b,u(p),i({selected:e})}catch(y){console.error(y)}}}},t)},w=a(324);var x=a(150),k=a.n(x),N=a(319);a(237);var S=a(314),I=a(128),L=a(37),T=a.n(L);function A(e){var t;switch(e){case"date":t="YYYY-MM-DD";break;case"time":t="HH:mm:ss";break;default:t="YYYY-MM-DD HH:mm:ss"}return t}function D(e){return 0===Object.keys(e).length}function F(e){if(!e)return[];var t=e.properties,a=e.items,n=e.type;if(!t&&!a)return[];var r={};return"object"===n&&(r=t),"array"===n&&(r=a),Object.keys(r).map((function(e){return{schema:r[e],name:e}}))}function $(e){return"function"===typeof e||("string"===typeof e&&"@"===e.substring(0,1)?e.substring(1):"string"===typeof e&&"{{"===e.substring(0,2)&&"}}"===e.substring(e.length-2,e.length)&&e.substring(2,e.length-2))}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=Object(c.a)({},e);r.$id||(r.$id=t);var i=[],l="object"===r.type&&r.properties,o="array"===r.type&&r.items&&r.items.properties;return l&&(Object.entries(r.properties).forEach((function(e){var a=Object(s.a)(e,2),r=a[0],l=a[1],o=t+"/"+r;i.push(o),M(l,o,t,n)})),delete r.properties),o&&(Object.entries(r.items.properties).forEach((function(e){var a=Object(s.a)(e,2),r=a[0],l=a[1],o=t+"/"+r;i.push(o),M(l,o,t,n)})),delete r.items.properties),r.type&&(n[t]={parent:a,schema:r,children:i}),n}var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#",t=e.split("/");return t[t.length-1]};function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={},r=e[t];return r&&(n=Object(c.a)({},r.schema),a&&n.$id&&delete n.$id,r.children.length>0&&r.children.forEach((function(t){var r=t;if(e[t]){try{a&&(r=e[t].schema.$id)}catch(l){console.log("catch",l)}var i=R(r);"object"===n.type&&(n.properties||(n.properties={}),n.properties[i]=P(e,t,a)),"array"===n.type&&n.items&&"object"===n.items.type&&(n.items.properties||(n.items.properties={}),n.items.properties[i]=P(e,t,a))}}))),n}var _=function(e,t){if(e&&t)return Object.entries(e).forEach((function(a){var n=Object(s.a)(a,2),r=n[0],i=(n[1],function(e,t){if("#"===t)return e;try{var a=t.split("/").filter((function(e){return"#"!==e})).join("."),n="data.".concat(a),r='"use strict";\n    const data = '.concat(JSON.stringify(e),";\n    return ").concat(n);return Function(r)()}catch(i){return}}(t,r));e[r].data=i})),e};var H=I.a.RangePicker;var Y=a(47),J=a(43),B=a(44),W=a(56),z=a(108),G=a(83),U=a(41),X=a(78),K=function(e){var t=e.fold,a=void 0!==t&&t,n=e.width,i=e.height,l=e.fill,c=e.style,s=void 0===c?{}:c,u=Object(o.a)(e,["fold","width","height","fill","style"]);return r.a.createElement("div",Object.assign({style:s,className:a?"fold-icon":"fold-icon fold-icon-active"},u),r.a.createElement("svg",{viewBox:"0 0 1024 1024",width:n||18,height:i||18},r.a.createElement("path",{d:"M942.048 306.176c-12.288-12.288-31.328-13.024-43.008-2.016L529.056 674.112c-15.072 15.872-19.008 15.808-34.816 0L124.288 304.16c-11.68-11.04-30.72-10.272-43.008 2.016-12.512 12.512-13.216 32.032-1.6 43.68L490.624 760.8c5.056 5.056 11.648 7.328 18.464 7.744h5.152c6.816-.448 13.408-2.72 18.464-7.744l410.944-410.944c11.584-11.648 10.88-31.2-1.6-43.68z",fill:l||"#3c3c3c"})))},V=function(e){var t=e.schema,a=void 0===t?{}:t,n=e.value,i=void 0===n?[]:n,l=e.index,o=q({schema:a,value:i,index:l}).filter((function(e){return e.title})).slice(0,3);return r.a.createElement("ul",{className:"flex overflow-hidden",style:{paddingRight:45}},o.map((function(e,t){return e.title?r.a.createElement("li",{className:"flex-auto mr2 overflow-hidden",key:t},r.a.createElement("span",{className:"fw5"},e.title,": "),r.a.createElement("span",null,e.text)):null})))},q=function(e){var t=e.schema,a=void 0===t?{}:t,n=e.value,r=void 0===n?[]:n,i=e.index,l=a.items,o=void 0===l?{}:l;if("object"!==o.type)return[];var c=o&&o.properties||{};c=Object.values(c);var s=r&&r.length&&r[i]||{},u=Object.values(s);return c.map((function(e,t){if(!(e&&e["ui:hidden"])){var a=e.title,n=u[t];return null===n&&void 0===n?n="":"boolean"===typeof n?n=n?"\u662f":"\u5426":"string"!==typeof n&&"number"!==typeof n&&n?n="{\u590d\u6742\u7ed3\u6784}":e.enum&&e.enumNames&&(n=function e(t,a,n){if(Array.isArray(a)&&Array.isArray(n)){if("string"===typeof t||"number"===typeof t){var r=a.indexOf(t);return r>-1?n[r]:t}if(Array.isArray(t)){var i=t.map((function(r){return e(t,a,n)}));return String(i)}return t}return t}(n,e.enum,e.enumNames)),{title:a,text:n}}})).filter((function(e){return!!e}))},Z=Object(X.c)((function(){return r.a.createElement("span",{className:"fr-move-icon"},":::")})),Q=function(e){return function(t){Object(W.a)(n,t);var a=Object(z.a)(n);function n(){var e;Object(J.a)(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).toggleFold=function(){e.props.toggleFoldItem(e.props.name)},e}return Object(B.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.p,a=void 0===t?{}:t,n=e.name,r=e.fold,i=q({schema:a.schema,value:a.value,index:n});i&&i[0]&&i[0].text&&0!==r&&this.props.toggleFoldItem(n)}},{key:"render",value:function(){var t=this.props,a=t.item,n=t.p,i=void 0===n?{}:n,l=t.name,o=t.fold,s=Object(c.a)({},i,{index:l}),u=i.options,m=void 0===u?{}:u,d=i.readonly,f=i.formData,p=i.value,h=m.foldable,v=m.hideDelete,g=m.itemButtons,b=$(v);b&&("string"===typeof b?v=function(e,t,a){return Function('"use strict";\n    const rootValue = '.concat(JSON.stringify(a),";\n    const formData = ").concat(JSON.stringify(t),";\n    return (").concat(e,")"))()}(b,f,p):"function"===typeof b&&(v=b(f,p)));var y=i.schema.items&&"object"==i.schema.items.type,E="fr-set ba b--black-10 hover-b--black-20 relative flex flex-column";return h&&o?E+=" pv12":"row"===i.displayType&&(E+=" pt44"),r.a.createElement("li",{className:E},h&&o&&y?r.a.createElement(V,s):a,h&&r.a.createElement(K,{fold:o,onClick:this.toggleFold,style:{position:"absolute",top:12,right:32}}),!d&&r.a.createElement(Z,null),!(h&&o||v||d)&&r.a.createElement("div",{className:"self-end flex"},r.a.createElement(e,{type:"dashed",icon:"delete",onClick:function(){var e=Object(Y.a)(i.value);e.splice(l,1),i.onChange(e)}},"\u5220\u9664"),g&&g.length>0&&g.map((function(t,a){return r.a.createElement(e,{key:a.toString(),className:"ml2",type:"dashed",icon:t.icon,onClick:function(){var e=Object(Y.a)(i.value);if("function"===typeof window[t.callback]){var a=window[t.callback](e,l);i.onChange(a)}}},t.text||"")}))))}}]),n}(r.a.Component)};var ee=function(e){var t,a,n=Object(X.a)(function(e){var t=Object(X.b)(Q(e));return function(a){Object(W.a)(i,a);var n=Object(z.a)(i);function i(){var e;Object(J.a)(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).handleAddClick=function(){var t=e.props,a=t.p,n=t.addUnfoldItem,r=Object(Y.a)(a.value);r.push(a.newItem),a.onChange(r),n()},e}return Object(B.a)(i,[{key:"render",value:function(){var a=this.props,n=a.p,i=a.foldList,l=void 0===i?[]:i,o=a.toggleFoldItem,c=n||{},s=c.options,u=void 0===s?{}:s,m=c.extraButtons,d=void 0===m?{}:m,f=u.buttons||d||[],p=n.readonly,h=n.schema,v=(void 0===h?{}:h).maxItems,g=n.value||[],b=!v||v>g.length;return r.a.createElement("ul",{className:"pl0 ma0"},g.map((function(e,a){return r.a.createElement(t,{key:"item-".concat(a),index:a,name:a,p:n,fold:l[a],toggleFoldItem:o,item:n.getSubField({name:a,value:n.value[a]})})})),!p&&r.a.createElement("div",{className:"tr"},b&&r.a.createElement(e,{icon:"add",onClick:this.handleAddClick},"\u65b0\u589e"),f&&f.length>0&&f.map((function(t,a){return r.a.createElement(e,{className:"ml2",icon:t.icon,key:a.toString(),onClick:function(){if("clearAll"!==t.callback){if("copyLast"===t.callback){var e=Object(Y.a)(n.value),a=e.length-1;return e.push(a>-1?e[a]:n.newItem),void n.onChange(e)}if("function"===typeof window[t.callback]){var r=Object(Y.a)(n.value);window[t.callback](r,(function(e){return n.onChange(e)}),n.newItem)}}else n.onChange([])}},t.text)}))))}}]),i}(r.a.Component)}(e));return a=t=function(e){Object(W.a)(a,e);var t=Object(z.a)(a);function a(e){var n;Object(J.a)(this,a),(n=t.call(this,e)).addUnfoldItem=function(){return n.setState({foldList:[].concat(Object(Y.a)(n.state.foldList),[0])})},n.toggleFoldItem=function(e){var t=n.state.foldList,a=void 0===t?[]:t;a[e]=!a[e],n.setState({foldList:a})},n.handleSort=function(e){var t=e.oldIndex,a=e.newIndex,r=n.props,i=r.onChange,l=r.value;i(Object(X.d)(l,t,a)),n.setState({foldList:Object(X.d)(n.state.foldList,t,a)})};var r=n.props.value.length||0;return n.state={foldList:new Array(r).fill(!1)||[]},n}return Object(B.a)(a,[{key:"render",value:function(){var e=this.state.foldList;return r.a.createElement(n,{p:this.props,foldList:e,toggleFoldItem:this.toggleFoldItem,addUnfoldItem:this.addUnfoldItem,distance:6,useDragHandle:!0,helperClass:"fr-sort-help-class",shouldCancelStart:function(e){return e.toElement&&"fr-tooltip-container"===e.toElement.className},onSortEnd:this.handleSort})}}]),a}(r.a.Component),t.defaultProps={value:[]},a}((function(e){var t,a=e.icon,n=e.children,i=Object(o.a)(e,["icon","children"]);switch(a){case"add":t="PlusCircleOutlined";break;case"delete":t="DeleteOutlined";break;default:t=a}var l=G[t];return l?r.a.createElement(U.a,Object.assign({},i,{icon:r.a.createElement(l,null)}),n):r.a.createElement(U.a,i,n)}));var te,ae,ne=a(320),re=(te=ne.a,function(e){var t=te.Option,a=e.invalid?{borderColor:"#f5222d"}:{},n=e.schema||{},i=n.enum,l=n.enumNames,o=e.value&&Array.isArray(e.value)?e.value:[];return r.a.createElement(te,Object.assign({},e.options,{style:Object(c.a)({width:"100%"},a),mode:"multiple",disabled:e.disabled||e.readonly,value:o,onChange:function(t){return e.onChange(t)}}),(i||[]).map((function(e,a){return r.a.createElement(t,{value:e,key:a},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:l?l[a]:e}}))})))}),ie=a(321),le=(ae=ie.a,function(e){var t=e.invalid?{borderColor:"#f5222d"}:{},a=e.schema,n=a.max,i=a.min,l=a.step,o={};return(n||0===n)&&(o={max:n}),(i||0===i)&&(o=Object(c.a)({},o,{min:i})),l&&(o=Object(c.a)({},o,{step:l})),r.a.createElement(ae,Object.assign({},o,{style:Object(c.a)({width:"100%"},t),disabled:e.disabled||e.readonly},e.options,{value:e.value,onChange:e.onChange}))}),oe=a(322);var ce,se=(ce=ne.a,function(e){var t=ce.Option,a=e.invalid?{borderColor:"#f5222d"}:{},n=e.schema||{},i=n.enum,l=n.enumNames;return r.a.createElement(ce,Object.assign({style:Object(c.a)({width:"100%"},a)},e.options,{disabled:e.disabled||e.readonly,value:e.value,onChange:function(t){return e.onChange(t)}}),(i||[]).map((function(e,a){var n=l?l[a]:e;return"string"===typeof n&&"<"===n[0]&&(n=r.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}})),r.a.createElement(t,{value:e,key:a},n)})))}),ue=function(e,t){return function(a){var n=a.invalid?{borderColor:"#f5222d"}:{},i=a.schema,l=i.max,o=i.min,s=i.step,u={};return(l||0===l)&&(u={max:l}),(o||0===o)&&(u=Object(c.a)({},u,{min:o})),s&&(u=Object(c.a)({},u,{step:s})),r.a.createElement("div",{className:"fr-slider"},r.a.createElement(e,Object.assign({style:{flexGrow:1,marginRight:12}},u,{onChange:a.onChange,value:"number"===typeof a.value?a.value:o||0,disabled:a.disabled||a.readonly})),a.readonly?r.a.createElement("span",{style:{width:"90px"}},""===a.value?"-":a.value):r.a.createElement(t,Object.assign({},a.options,u,{style:Object(c.a)({width:"90px"},n),value:a.value,disabled:a.disabled,onChange:a.onChange})))}}(a(318).a,ie.a),me=a(315);var de=N.a.TextArea;var fe=a(146),pe=a(323),he=a(316);var ve=a(149),ge=a(325),be=function(e,t){return"image"===e?r.a.createElement("img",{src:t||"https://img.alicdn.com/tfs/TB14tSiKhTpK1RjSZFKXXa2wXXa-354-330.png",alt:"\u56fe\u7247\u5730\u5740\u9519\u8bef",className:"fr-preview-image"}):null},ye=function(e,t){return"image"!==e?null:r.a.createElement(ge.a,{content:be(e,t),className:"fr-preview",placement:"bottom"},r.a.createElement(ve.a,null))};var Ee={checkbox:function(e){return r.a.createElement(w.a,{disabled:e.disabled||e.readonly,onChange:function(t){return e.onChange(t.target.checked)},checked:e.value})},checkboxes:function(e){var t=e.schema||{},a=t.enum,n=t.enumNames,i=e.value&&Array.isArray(e.value)?e.value:[];return r.a.createElement(w.a.Group,{disabled:e.disabled||e.readonly,value:i,onChange:e.onChange},(a||[!0,!1]).map((function(e,t){return r.a.createElement(w.a,{value:e,key:t},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:n?n[t]:e}}))})))},color:function(e){var t=e.schema.format;return r.a.createElement("div",{className:"fr-color-picker"},r.a.createElement(k.a,{type:t,animation:"slide-up",color:e.value?e.value:"#ffffff",onChange:function(t){e.disabled||e.readonly||e.onChange(t.color)}}),e.readonly?r.a.createElement("span",null,e.value||"#ffffff"):r.a.createElement(N.a,{placeholder:"#ffffff",disabled:e.disabled,value:e.value,onChange:function(t){e.onChange(t.target.value)}}))},date:function(e){var t=e.schema.format,a="time"===(void 0===t?"dateTime":t)?S.a:I.a;return function(e,t,a){var n=e.invalid?{borderColor:"#f5222d"}:{},i=e.schema.format,l=void 0===i?"dateTime":i,o=A(l),s={};e.value?s.value=T()(e.value,o):s.value="";var u=e.description?{placeholder:e.description}:{},m=Object(c.a)({},u,{},e.options,{},s,{style:Object(c.a)({width:"100%"},n),disabled:e.disabled||e.readonly,onChange:t});return"dateTime"===l&&(m.showTime=!0),r.a.createElement(a,m)}(e,(function(t,a){return e.onChange(a)}),a)},dateRange:function(e){return function(e,t,a){var n=e.schema.format,i=void 0===n?"dateTime":n,l=A(i),o={};e.value&&Array.isArray(e.value)&&e.value[0]&&e.value[1]&&(o={defaultValue:[T()(e.value[0],l),T()(e.value[1],l)]});var s=Object(c.a)({},e.options,{},o,{style:{width:"100%"},showTime:"dateTime"===i,disabled:e.disabled||e.readonly,onChange:t});return r.a.createElement(a,s)}(e,(function(t,a){return e.onChange(a)}),H)},input:function(e){var t=e.options,a=void 0===t?{}:t,n=e.invalid?{borderColor:"#f5222d"}:{},i=e.schema.format,l=void 0===i?"text":i,o="image"===l?"text":l;return r.a.createElement(N.a,Object.assign({style:n},a,{value:e.value,type:o,disabled:e.disabled||e.readonly,addonAfter:a.addonAfter?a.addonAfter:ye(l,e.value),onChange:function(t){return e.onChange(t.target.value)}}))},list:ee,map:function(){return r.a.createElement("div",{className:"w-100"})},multiSelect:re,number:le,radio:function(e){return function(e,t,a){var n=a.Group,i=e.schema||{},l=i.enum,o=i.enumNames;return r.a.createElement(n,{disabled:e.disabled||e.readonly,value:e.value,onChange:t},(l||[!0,!1]).map((function(e,t){return r.a.createElement(a,{value:e,key:t},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:o?o[t]:e}}))})))}(e,(function(t){return e.onChange(t.target.value)}),oe.a)},select:se,slider:ue,switch:function(e){return r.a.createElement(me.a,{disabled:e.disabled||e.readonly,onChange:function(t){return e.onChange(e.name,t)},defaultChecked:e.value})},textarea:function(e){var t=e.options,a=e.invalid?{borderColor:"#f5222d"}:{},n=Object(c.a)({},{rows:3},{},t);return r.a.createElement(de,Object.assign({style:a,disabled:e.disabled||e.readonly,value:e.value},n,{onChange:function(t){return e.onChange(t.target.value)}}))},upload:function(e){var t={name:"file",action:e.action,enctype:"multipart/form-data",withCredentials:!0,type:"file",onChange:function(t){"done"===t.file.status?(pe.a.success("".concat(t.file.name," \u4e0a\u4f20\u6210\u529f")),e.onChange(t.file.response.url)):"error"===t.file.status&&pe.a.error("".concat(t.file.name," \u4e0a\u4f20\u5931\u8d25"))},onRemove:function(){e.onChange("")}};return r.a.createElement("div",{className:"fr-upload-mod"},r.a.createElement(he.a,Object.assign({},t,{className:"fr-upload-file"}),r.a.createElement(U.a,null,r.a.createElement(fe.a,null)," \u4e0a\u4f20")),e.value&&r.a.createElement("a",{href:e.value,target:"_blank",rel:"noopener noreferrer",className:"fr-upload-preview"},"\u5df2\u4e0a\u4f20\u5730\u5740"))}},je={default:"input",string:"input",array:"list",boolean:"checkbox",integer:"number",number:"number",object:"map","string:upload":"upload","string:date":"date","string:dateTime":"date","string:time":"date","string:textarea":"textarea","string:color":"color","string:image":"input","range:date":"dateRange","range:dateTime":"dateRange","*?enum":"select","array?enum":"checkboxes","*?readonly":"text"};function Oe(e){var t=e.type,a=e.format,n=e.enum,r=[];e.readonly&&(r.push("".concat(t,"?readonly")),r.push("*?readonly")),n&&(r.push("".concat(t,"?enum")),r.push("*?enum")),a&&r.push("".concat(t,":").concat(a)),r.push(t);var i="";return r.some((function(e){return!!(i=je[e])})),i}a(299);function Ce(){var e,t,a=h(),n=a.flatten,i=a.onItemChange,l=p().selected,o={},s={},u=r.a.createElement("div",{className:"right-layout"});if(l&&"0"===l[0])return u;if("#"===l)return u;try{if(!(e=n[l]))return u;if(t=Oe(e.schema)){R(l);var m=b.find((function(e){return e.widget===t})).setting;o={propsSchema:{type:"object",properties:Object(c.a)({},m)},uiSchema:{}},s=e.schema}}catch(d){console.log(d)}return r.a.createElement("div",{className:"right-layout"},e&&r.a.createElement(Fe,{schema:o,formData:s,onChange:function(e){if(l)try{var t=n[l];t&&t.schema&&i(l,Object(c.a)({},t,{schema:e}))}catch(d){console.log(d,"catch")}},displayType:"row",showDescIcon:!0,widgets:Ee,preview:!0}))}var we=function(e){var t=e.children,a=void 0===t?[]:t,n=e.preview,i=h();i.onItemChange,i.flatten;return r.a.createElement(r.a.Fragment,null,a.map((function(e,t){var a={id:e,preview:n};return r.a.createElement(Ie,Object.assign({key:t.toString()},a))})))},xe=function(e){var t,a,n=e.$id,i=e.item,l=e.labelClass,o=e.contentClass,s=e.isComplex,u=h().onItemChange,m=i.schema,d=i.data,f=p(),v=f.displayType,g=f.showDescIcon,b=f.showValidate,y=f.labelWidth,E=f.widgets,j=m.type,O=m.title,C=m.description,w=m.required,x=w&&w.length>0,k={width:"number"===typeof(a=y)||"string"===typeof a&&!Number.isNaN(Number(a))?Number(y):"string"===typeof(t=y)&&t.match(/^([0-9])*(%|px|rem|em)$/i)?y:110};("boolean"===j||s||"column"===v)&&(k={flexGrow:1});var N=Oe(m),S=m["ui:widget"];S&&E[S]&&(N=S);var I=E[N],L={disabled:m["ui:disabled"],readonly:m["ui:readonly"],hidden:m["ui:hidden"],options:m["ui:options"],labelWidth:m["ui:labelWidth"],width:m["ui:width"]};return r.a.createElement(r.a.Fragment,null,m.title?r.a.createElement("div",{className:l,style:k},r.a.createElement("label",{className:"fr-label-title ".concat("boolean"===j||"column"===v?"no-colon":""),title:O},x&&r.a.createElement("span",{className:"fr-label-required"}," *"),r.a.createElement("span",{className:"".concat(s?"b":""," ").concat("column"===v?"flex-none":"")},O),C&&(g?r.a.createElement("span",{className:"fr-tooltip-toggle","aria-label":C},r.a.createElement("i",{className:"fr-tooltip-icon"}),r.a.createElement("div",{className:"fr-tooltip-container"},r.a.createElement("i",{className:"fr-tooltip-triangle"}),C)):r.a.createElement("span",{className:"fr-desc ml2"},"(\xa0",C,"\xa0)")),"row"!==v&&b&&r.a.createElement("span",{className:"fr-validate"},"validation"))):null,-1===["list"].indexOf(N)&&r.a.createElement("div",{className:o},r.a.createElement(I,Object.assign({value:d,onChange:function(e){var t=Object(c.a)({},i);t.data=e,u(n,t)},schema:m},L))))},ke=(a(300),a(148)),Ne=a(147);function Se(e){var t=e.$id,a=e.item,n=e.inside,i=void 0!==n&&n,l=e.children,o=h(),u=o.flatten,m=(o.onItemChange,o.onFlattenChange),d=f(),v=p(),g=v.selected,b=v.hovering,y=a.schema,j=y.type,O=g===t&&!i;g&&"0"===g[0]&&(O=g.substring(1)===t&&i);var C={backgroundColor:b===(i?"0"+t:t)?"#ecf5ff":"#fff"};return i?C=Object(c.a)({},C,{borderColor:"#777",marginLeft:12,padding:"8px 8px 0 0",backgroundColor:"#fafafa"}):"#"===t?C=Object(c.a)({},C,{borderColor:"#777",padding:12,height:"calc(100vh - 80px)",overflow:"auto",backgroundColor:"#fafafa"}):"object"===j&&(C=Object(c.a)({},C,{paddingTop:12})),O&&(C=Object(c.a)({},C,{outline:"2px solid #409eff",borderColor:"#fff"})),"#"===t&&i?l:r.a.createElement("div",{style:C,className:"field-wrapper relative",onClick:function(e){e.stopPropagation(),d({selected:i?"0"+t:t})},onMouseEnter:function(){},onMouseLeave:function(){}},!i&&r.a.createElement("div",{className:"absolute top-0 left-0 blue f7"},y&&y.$id&&y.$id.substring(1)),l,O&&!i&&"#"!==t&&r.a.createElement("div",{style:{position:"absolute",zIndex:20,bottom:-2,right:-2,height:24,width:54,borderTopLeftRadius:8,background:"#409eff",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{onClick:function(e){e.stopPropagation();var a=Object(c.a)({},u),n="#";try{var r=a[t].parent,i=a[r].children,l=i.indexOf(t);n=l>0?i[l-1]:i[1]||r}catch(o){console.log("catch",o)}delete a[t],m(a),d({selected:n})}},r.a.createElement(ke.a,{style:{height:16,width:16,margin:"0 8px 0 12px",color:"#fff"}})),r.a.createElement("div",{onClick:function(e){e.stopPropagation();var a=function(e,t){var a=Object(c.a)({},e);try{var n=e[t],r=t+E()(6),i=a[n.parent].children,l=i.findIndex((function(e){return e===t}));return i.splice(l+1,0,r),a[r]={parent:a[t].parent,schema:Object(c.a)({},a[t].schema),data:a[t].data,children:a[t].children},a[r].schema.$id=r,[a,r]}catch(o){return console.error(o,"catcherror"),[e,t]}}(u,t),n=Object(s.a)(a,2),r=n[0],i=n[1];m(r),d({selected:i})}},r.a.createElement(Ne.a,{style:{height:16,width:16,marginRight:12,color:"#fff"}}))))}var Ie=function(e){var t=e.id,a=void 0===t?"#":t,n=e.preview,i=void 0!==n&&n,l=h(),o=(l.onItemChange,l.onFlattenChange,l.flatten),c=p().displayType,s=o[a];if(!s)return null;var u=s.schema,m="object"===u.type,d="array"===u.type&&void 0===u.enum,f=m||d,v="fr-field w-100 ".concat(f?"fr-field-complex":""),g="fr-label mb2",b="fr-content";switch(u.type){case"object":u.title&&(v+=" ba b--black-20 pt4 pr3 pb2 relative mt3 mb4",g+=" fr-label-object bg-white absolute ph2 top-upper left-1"),v+=" fr-field-object",u.title&&(b+=" ml3");break;case"array":u.title&&!u.enum&&(g+=" mt2 mb3");break;case"boolean":u.title&&(g=(g+=" ml2").replace("mb2","mb0")),b+=" flex items-center",v+=" flex items-center flex-row-reverse justify-end";break;default:"row"===c&&(g=g.replace("mb2","mb0"))}"row"!==c||f||"boolean"===u.type||(v+=" flex items-center",g=(g+=" flex-shrink-0 fr-label-row").replace("mb2","mb0"),b+=" flex-grow-1 relative"),"row"===c&&"boolean"===u.type&&(b+=" flex justify-end pr2");var y={$id:a,item:s,labelClass:g,contentClass:b,isComplex:f},E={children:s.children,preview:i},j=s.children&&s.children.length>0?r.a.createElement("ul",{className:"".concat("#"===a?"pl0":"pl3")},r.a.createElement(we,E)):null;return i?r.a.createElement("div",{className:v},r.a.createElement(xe,y),"object"===u.type&&j):r.a.createElement(Se,{$id:a,item:s},r.a.createElement("div",{className:v},r.a.createElement(xe,y),"object"===u.type&&r.a.createElement(Se,{$id:a,item:s,inside:!0},j||r.a.createElement("div",{className:"h2"}))))},Le=a(317),Te=(a(301),a(302),a(303),N.a.TextArea),Ae={propsSchema:{type:"object"},uiSchema:{},formData:{}};var De=function(){var e=v({formData:Ae.formData,schema:Ae,selected:void 0,hovering:void 0,preview:!1}),t=Object(s.a)(e,2),a=t[0],n=t[1],i=a.schema,l=a.formData,o=a.selected,u=a.preview,m=a.hovering;return r.a.createElement(Fe,{schema:i,formData:l,onChange:function(e){n({formData:e})},onSchemaChange:function(e){var t=Object(c.a)({},i,{propsSchema:e});n({schema:t})},displayType:"row",showDescIcon:!0,widgets:Ee,selected:o,hovering:m,preview:u,setState:n,simple:!1})},Fe=function(e){var t=e.simple,a=void 0===t||t,n=e.schema,i=e.formData,l=e.onChange,f=e.onSchemaChange,p=Object(o.a)(e,["simple","schema","formData","onChange","onSchemaChange"]),h=v({showModal:!1}),g=Object(s.a)(h,2),b=g[0],y=g[1],E=p.setState,j=p.preview,C=M(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=F(t),r=n.map((function(t){var n=t.name,r=t.schema,i=r.type,l=r.enum,o=r.properties,s=r.items,u="object"===i&&o,m="array"===i&&s&&!l,d=n&&a[t.name];if(!d)return t;if(m){var f=e(s,d.items||{});return Object(c.a)({},t,{schema:Object(c.a)({},t.schema,{},d,{items:f})})}if(u){var p=e(t.schema,d);return Object(c.a)({},t,{schema:p})}return Object(c.a)({},t,{schema:Object(c.a)({},t.schema,{},d)})})),i={};r.forEach((function(e){i[e.name]=e.schema}));var l={};return Object.keys(a).forEach((function(e){"string"===typeof e&&"ui:"===e.substring(0,3)&&(l[e]=a[e])})),D(i)?Object(c.a)({},t,{},l):Object(c.a)({},t,{},l,{properties:i})}(n.propsSchema,n.uiSchema)),w=_(C,i);console.log("render");var x=function(e){var t=P(e),a=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";try{var n=t[a].data,r=Object.keys(t),i=r.filter((function(e){var t=a.split("/").length,n=e.split("/").length;return e.indexOf(a)>-1&&n>t}));return i&&i.length>0&&(void 0===n&&(n={}),i.forEach((function(r){var i=a.split("/").length;if(r.split("/").length===i+1){var l=e(t,r),o=R(r);n[o]=l}}))),n}catch(l){return}}(e);f&&f(t),l(a)},k=function(){return y({showModal:!b.showModal})},N={flatten:w,onFlattenChange:x,onItemChange:function(e,t){w[e]=t,x(w)}},S="";try{S=JSON.stringify(P(w,"#",!0),null,2)}catch(I){}return a?r.a.createElement(u.Provider,{value:E},r.a.createElement(m.Provider,{value:p},r.a.createElement(d.Provider,{value:N},r.a.createElement(Ie,{preview:!0})))):r.a.createElement(u.Provider,{value:E},r.a.createElement(m.Provider,{value:p},r.a.createElement(d.Provider,{value:N},r.a.createElement("div",{className:"flex vh-100 overflow-hidden"},r.a.createElement(O,null),r.a.createElement("div",{className:"mid-layout pr2"},r.a.createElement("div",{className:"mv3 mh1"},r.a.createElement(U.a,{type:"primary",className:"mr2",onClick:k},"\u5bfc\u51faschema"),r.a.createElement(U.a,{onClick:function(){E({preview:!j,selected:"#"})}},j?"\u5f00\u59cb\u7f16\u8f91":"\u6700\u7ec8\u5c55\u793a")),r.a.createElement(Ie,{preview:j})),r.a.createElement(Ce,null),r.a.createElement(Le.a,{visible:b.showModal,onOk:k,onCancel:k},r.a.createElement("div",{className:"mt3"},r.a.createElement(Te,{style:{fontSize:12},value:S,autoSize:{minRows:10,maxRows:30}})))))))};Fe.defaultProps={labelWidth:120},l.a.render(r.a.createElement(De,null),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.18d4d31f.chunk.js.map