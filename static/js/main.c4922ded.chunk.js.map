{"version":3,"sources":["context.js","hooks.js","Left/elementList.js","Left/index.js","utils.js","components/rangeHoc.jsx","widgets/antd/dateRange.js","components/foldIcon.jsx","components/descList.jsx","widgets/antd/list.jsx","components/multiSelectHoc.jsx","components/numberHoc.jsx","widgets/antd/multiSelect.js","widgets/antd/number.js","components/selectHoc.jsx","widgets/antd/select.js","widgets/antd/slider.js","widgets/antd/textarea.js","components/previewContent.jsx","widgets/antd/input.js","widgets/antd/index.js","widgets/antd/checkbox.js","widgets/antd/checkboxes.js","widgets/antd/color.js","widgets/antd/date.js","components/dateHoc.jsx","widgets/antd/listEditor.js","widgets/antd/map.js","widgets/antd/radio.js","components/radioHoc.jsx","widgets/antd/switch.js","widgets/antd/upload.js","widgets/antd/idInput.js","widgets/antd/percentSlider.js","mapping.js","Right/ItemSettings.js","Right/GlobalSettings.js","Right/index.js","FR/RenderChildren.js","FR/RenderField.js","FR/Wrapper.js","FR/index.js","FRWrapper.js","App.js","index.js"],"names":["Ctx","createContext","PropsCtx","InnerCtx","useGlobal","useContext","useGlobalProps","useStore","useSet","initState","useReducer","state","newState","action","payload","setState","actionName","commonSettings","$id","title","description","type","max","hideNumber","default","result","text","name","widget","schema","setting","properties","allowClear","addonBefore","addonAfter","prefix","suffix","minLength","maxLength","pattern","placeholder","format","autoSize","row","enum","enumNames","mode","items","minItems","maxItems","foldable","inputName","selectName","dateName","listName","rangeName","map","list","item","allSettings","elements","advancedElements","layouts","saves","Left","props","className","ele","idx","key","toString","Element","setGlobal","selected","flatten","onFlattenChange","onClick","newId","_selected","newFlatten","oldId","substring","nanoid","children","push","newItem","parent","data","undefined","error","console","_name","idArr","split","pop","join","siblings","findIndex","x","splice","getFormat","dateFormat","isEmpty","obj","Object","keys","length","getChildren","schemaSubs","isFunction","func","flattenSchema","_schema","deepClone","isObj","isList","entries","forEach","value","uniqueName","getKeyFromUniqueId","uniqueId","arr","changeKeyFromUniqueId","idToSchema","id","final","_item","child","childId","log","dataToFlatten","branchData","idString","idConnectedByDots","filter","string","a","JSON","stringify","Function","getDataById","RangePicker","DatePicker","FoldIcon","fold","width","height","fill","style","rest","viewBox","d","DescriptionList","index","getDescription","slice","paddingRight","i","titles","values","valueList","t","getEnumValue","enums","Array","isArray","count","indexOf","v","String","DragHandle","SortableHandle","listItem","toggleFold","toggleFoldItem","this","p","descProps","options","readonly","formData","rootValue","canFold","hideDelete","itemButtons","_isFunction","evaluateString","setClass","displayType","position","top","right","FrButton","icon","onChange","btn","window","callback","React","Component","SortableItem","SortableElement","fieldList","handleAddClick","addUnfoldItem","foldList","extraButtons","buttons","canAdd","_","lastIndex","SortableList","SortableContainer","handleSort","oldIndex","newIndex","arrayMove","len","distance","useDragHandle","helperClass","shouldCancelStart","e","toElement","onSortEnd","iconName","IconComponent","Icons","defaultProps","MultiComponent","NumberComponent","multiSelectHoc","Select","Option","invalid","borderColor","_value","disabled","val","dangerouslySetInnerHTML","__html","numberHoc","InputNumber","min","step","SelectComponent","selectHoc","option","SliderWithNumber","renderNumber","flexGrow","marginRight","TextArea","Input","src","alt","previewNode","content","previewContent","placement","PictureOutlined","widgets","checkbox","target","checked","checkboxes","Group","color","animation","date","DateComponent","TimePicker","defaultObj","moment","placeholderObj","dateParams","showTime","dateHoc","dateRange","RangeComponent","defaultValue","datePrams","rangeHoc","input","listEditor","size","DeleteOutlined","PlusCircleOutlined","multiSelect","number","radio","RadioComponent","RadioGroup","radioHoc","Radio","select","slider","switch","defaultChecked","textarea","ui","rows","upload","enctype","withCredentials","info","file","status","message","success","response","url","onRemove","UploadOutlined","href","rel","IdInput","PercentSlider","numberValue","endsWith","Number","isNaN","handleChange","newNumber","formatter","parser","replace","tipFormatter","mapping","array","boolean","integer","object","getWidgetName","_mapping","found","some","ALL","ItemSettings","itemSelected","widgetName","onItemChange","settingSchema","settingData","schemaNow","find","propsSchema","_widgets","idInput","percentSlider","overflow","FRWrapper","newSchema","showDescIcon","preview","globalProps","hovering","SCHEMA","TabPane","Tabs","Right","showRight","showItemSettings","toggleRight","ToggleIcon","padding","RightOutlined","HideRightArrow","useEffect","defaultActiveKey","tab","RenderChildren","FRProps","RenderField","str","num","labelClass","contentClass","isComplex","showValidate","labelWidth","required","isRequired","effectiveLabelWidth","getParentProps","propName","parentSchema","labelStyle","match","customWidget","Widget","contentStyle","marginLeft","usefulWidgetProps","hidden","aria-label","Wrapper","inside","isSelected","overwriteStyle","backgroundColor","paddingTop","outline","shownId","stopPropagation","onMouseEnter","onMouseLeave","zIndex","bottom","borderTopLeftRadius","background","display","justifyContent","alignItems","newSelect","margin","copyItem","CopyOutlined","FR","column","containerClass","columnStyle","fieldProps","childrenProps","childrenElement","simple","onSchemaChange","showModal","showModal2","showModal3","schemaForImport","local","setLocal","combineSchema","uiSchema","propList","newList","isArr","newItems","newObj","s","topLevelUi","flattenWithData","newData","flattenToData","ids","childrenIds","lengthOfId","lengthOfChild","c","cData","cKey","toggleModal","toggleModal2","toggleModal3","displaySchemaString","store","Provider","visible","onOk","copyTOClipboard","onCancel","okText","cancelText","fontSize","minRows","maxRows","parse","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c4922ded.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nexport const Ctx = createContext(() => {});\nexport const PropsCtx = createContext({});\nexport const InnerCtx = createContext({});\n","import { useReducer, useContext, useRef, useEffect, useState } from 'react';\nimport { Ctx, InnerCtx, PropsCtx } from './context';\n\n// 使用最顶层组件的 setState\nexport const useGlobal = () => {\n  return useContext(Ctx);\n};\n\nexport const useGlobalProps = () => {\n  return useContext(PropsCtx);\n};\n\nexport const useStore = () => {\n  return useContext(InnerCtx);\n};\n\n// const logger = reducer => {\n//   const reducerWithLogger = (state, action, actionName = 'Action') => {\n//     console.group(actionName);\n//     console.log('%cState:', 'color: #9E9E9E; font-weight: 500;', state);\n//     console.log('%cAction:', 'color: #00A7F7; font-weight: 500;', action);\n//     console.log('%cNext:', 'color: #47B04B; font-weight: 500;', {\n//       ...state,\n//       ...action,\n//     });\n//     console.groupEnd();\n//     return reducer(state, action);\n//   };\n//   return reducerWithLogger;\n// };\n\n// export default logger;\n\n// 类似于class component的setState\nexport const useSet = initState => {\n  const [state, setState] = useReducer((state, newState) => {\n    let action = newState;\n    if (typeof newState === 'function') {\n      action = action(state);\n    }\n    if (newState.action && newState.payload) {\n      action = newState.payload;\n      if (typeof action === 'function') {\n        action = action(state);\n      }\n    }\n    const result = { ...state, ...action };\n    // if (newState.action !== 'no-log') {\n    //   console.group(newState.action || 'action'); // TODO: give it a name\n    //   console.log('%cState:', 'color: #9E9E9E; font-weight: 700;', state);\n    //   console.log('%cAction:', 'color: #00A7F7; font-weight: 700;', action);\n    //   console.log('%cNext:', 'color: #47B04B; font-weight: 700;', result);\n    //   console.groupEnd();\n    // } else {\n    // }\n    return result;\n  }, initState);\n  const setStateWithActionName = (state, actionName) => {\n    setState(state);\n  };\n  return [state, setStateWithActionName];\n};\n\n// start: true 开始、false 暂停\nexport function useInterval(callback, delay, start) {\n  const savedCallback = useRef();\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  const id = useRef();\n  useEffect(() => {\n    if (!start) {\n      return;\n    }\n    function tick() {\n      savedCallback && savedCallback.current && savedCallback.current();\n    }\n    tick();\n    if (delay !== null) {\n      id.current = setInterval(tick, delay);\n      return () => clearInterval(id.current);\n    }\n  }, [delay, start]);\n  return () => clearInterval(id.current);\n}\n\nexport function usePrevious(value) {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef();\n\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n\nexport const useShowOnce = localKey => {\n  // 从 localStorage 读取 key 值\n  const [show, setShow] = useState(false);\n  let localStr;\n  try {\n    localStr = localStorage.getItem(localKey);\n  } catch (error) {}\n  if (!localStr) {\n    setShow(true);\n    localStorage.setItem(localKey, JSON.stringify(true));\n  }\n  return show;\n};\n\nexport const useModal = () => {\n  const [show, setShow] = useState(false);\n  const toggle = () => setShow(!show);\n  return [show, toggle];\n};\n\nexport const useWindowState = initState => {\n  const [state, setState] = useState(initState);\n  return [state, setState];\n};\n","// 只需写配置，方便可扩展\nconst commonSettings = {\n  $id: {\n    title: 'ID',\n    description: '数据存储的名称，请写英文，不能为空',\n    type: 'string',\n    'ui:widget': 'idInput',\n  },\n  title: {\n    title: '标题',\n    type: 'string',\n  },\n  description: {\n    title: '说明',\n    type: 'string',\n  },\n  'ui:width': {\n    title: '元素宽度',\n    type: 'string',\n    'ui:widget': 'percentSlider',\n  },\n  'ui:labelWidth': {\n    title: '标签宽度',\n    description: '默认值120',\n    type: 'number',\n    'ui:widget': 'slider',\n    max: 400,\n    'ui:options': {\n      hideNumber: true,\n    },\n  },\n  default: {\n    title: '默认值',\n    type: 'string',\n  },\n  'ui:readonly': {\n    title: '置灰',\n    type: 'boolean',\n  },\n};\n\nconst elements = [\n  {\n    text: '输入框',\n    name: 'input',\n    widget: 'input',\n    schema: {\n      title: '输入框',\n      type: 'string',\n    },\n    setting: {\n      'ui:options': {\n        title: '选项',\n        type: 'object',\n        'ui:labelWidth': 80,\n        properties: {\n          allowClear: {\n            title: '是否带清除按钮',\n            description: '填写内容后才会出现x哦',\n            type: 'boolean',\n          },\n          addonBefore: {\n            title: '前tab',\n            type: 'string',\n          },\n          addonAfter: {\n            title: '后tab',\n            type: 'string',\n          },\n          prefix: {\n            title: '前缀',\n            type: 'string',\n          },\n          suffix: {\n            title: '后缀',\n            type: 'string',\n          },\n        },\n      },\n      minLength: {\n        title: '最短字数',\n        type: 'number',\n      },\n      maxLength: {\n        title: '最长字数',\n        type: 'number',\n      },\n      pattern: {\n        title: '校验正则表达式',\n        type: 'string',\n        'ui:options': {\n          placeholder: '填写正则表达式',\n        },\n      },\n    },\n  },\n  {\n    text: '大输入框',\n    name: 'textarea',\n    widget: 'textarea',\n    schema: {\n      title: '编辑框',\n      type: 'string',\n      format: 'textarea',\n    },\n    setting: {\n      'ui:options': {\n        title: '选项',\n        type: 'object',\n        'ui:labelWidth': 80,\n        properties: {\n          autoSize: {\n            title: '高度自动',\n            type: 'boolean',\n          },\n          row: {\n            title: '指定高度',\n            type: 'number',\n          },\n        },\n      },\n      minLength: {\n        title: '最短字数',\n        type: 'number',\n      },\n      maxLength: {\n        title: '最长字数',\n        type: 'number',\n      },\n      pattern: {\n        title: '校验正则表达式',\n        type: 'string',\n        'ui:options': {\n          placeholder: '填写正则表达式',\n        },\n      },\n    },\n  },\n\n  {\n    text: '日期选择',\n    name: 'date',\n    widget: 'date',\n    schema: {\n      title: '日期选择',\n      type: 'string',\n      format: 'date',\n    },\n    setting: {\n      format: {\n        title: '格式',\n        type: 'string',\n        enum: ['dateTime', 'date', 'time'],\n        enumNames: ['日期时间', '日期', '时间'],\n      },\n    },\n  },\n  {\n    text: '数字输入框',\n    name: 'number',\n    widget: 'number',\n    schema: {\n      title: '数字输入框',\n      type: 'number',\n    },\n    setting: {},\n  },\n  {\n    text: '是否选择',\n    name: 'checkbox',\n    widget: 'checkbox',\n    schema: {\n      title: '是否选择',\n      type: 'boolean',\n    },\n    setting: {\n      default: {\n        title: '默认是否',\n        type: 'boolean',\n      },\n    },\n  },\n  {\n    text: '是否switch',\n    name: 'checkbox',\n    widget: 'switch',\n    schema: {\n      title: '是否选择',\n      type: 'boolean',\n      'ui:widget': 'switch',\n    },\n    setting: {\n      default: {\n        title: '默认是否',\n        type: 'boolean',\n      },\n    },\n  },\n  {\n    text: '下拉单选',\n    name: 'select',\n    widget: 'select',\n    schema: {\n      title: '单选',\n      type: 'string',\n      enum: ['a', 'b', 'c'],\n      enumNames: ['早', '中', '晚'],\n    },\n    setting: {\n      enum: {\n        title: '选项字段',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n      enumNames: {\n        title: '选项名称',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n    },\n  },\n  {\n    text: '点击单选',\n    name: 'radio',\n    widget: 'radio',\n    schema: {\n      title: '单选',\n      type: 'string',\n      enum: ['a', 'b', 'c'],\n      enumNames: ['早', '中', '晚'],\n      'ui:widget': 'radio',\n    },\n    setting: {\n      enum: {\n        title: '选项字段',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n      enumNames: {\n        title: '选项名称',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n    },\n  },\n  {\n    text: '下拉多选',\n    name: 'multiSelect',\n    widget: 'multiSelect',\n    schema: {\n      title: '多选',\n      description: '下拉多选',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      enum: ['A', 'B', 'C', 'D'],\n      enumNames: ['杭州', '武汉', '湖州', '贵阳'],\n      'ui:widget': 'multiSelect',\n    },\n    setting: {\n      enum: {\n        title: '选项字段',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n      enumNames: {\n        title: '选项名称',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n    },\n  },\n  {\n    text: '点击多选',\n    name: 'checkboxes',\n    widget: 'checkboxes',\n    schema: {\n      title: '多选',\n      description: '点击多选',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      enum: ['A', 'B', 'C', 'D'],\n      enumNames: ['杭州', '武汉', '湖州', '贵阳'],\n    },\n    setting: {\n      enum: {\n        title: '选项字段',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n      enumNames: {\n        title: '选项名称',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n    },\n  },\n];\n\nconst advancedElements = [\n  {\n    text: '日期范围',\n    name: 'dateRange',\n    widget: 'dateRange',\n    schema: {\n      title: '日期范围',\n      type: 'range',\n      format: 'dateTime',\n      'ui:options': {\n        placeholder: ['开始时间', '结束时间'],\n      },\n    },\n    setting: {\n      format: {\n        title: '类型',\n        type: 'string',\n        enum: ['dateTime', 'date'],\n        enumNames: ['日期时间', '日期'],\n      },\n    },\n  },\n  {\n    text: '数字（slider）',\n    name: 'slider',\n    widget: 'slider',\n    schema: {\n      title: '带滑动条',\n      type: 'number',\n      'ui:widget': 'slider',\n    },\n    setting: {},\n  },\n  {\n    text: '图片展示',\n    name: 'image',\n    // widget: 'input',\n    schema: {\n      title: '图片展示',\n      type: 'string',\n      format: 'image',\n    },\n    setting: {},\n  },\n  {\n    text: '颜色选择',\n    name: 'color',\n    widget: 'color',\n    schema: {\n      title: '颜色选择',\n      type: 'string',\n      format: 'color',\n    },\n    setting: {},\n  },\n];\n\nconst layouts = [\n  {\n    text: 'object',\n    name: 'object',\n    schema: {\n      title: '对象',\n      type: 'object',\n      properties: {},\n    },\n    widget: 'map',\n    setting: {},\n  },\n  {\n    text: '列表',\n    name: 'list',\n    widget: 'list',\n    schema: {\n      title: '数组',\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {},\n      },\n    },\n    setting: {\n      minItems: {\n        title: '最小长度',\n        type: 'number',\n      },\n      maxItems: {\n        title: '最大长度',\n        type: 'number',\n      },\n      'ui:options': {\n        title: '选项',\n        type: 'object',\n        properties: {\n          foldable: {\n            title: '是否可折叠',\n            type: 'boolean',\n          },\n        },\n      },\n    },\n  },\n];\n\nconst saves = [\n  {\n    text: '复杂结构样例',\n    name: 'something',\n    schema: {\n      title: '对象',\n      description: '这是一个对象类型',\n      type: 'object',\n      properties: {\n        inputName: {\n          title: '简单输入框',\n          type: 'string',\n        },\n        selectName: {\n          title: '单选',\n          type: 'string',\n          enum: ['a', 'b', 'c'],\n          enumNames: ['早', '中', '晚'],\n        },\n        dateName: {\n          title: '时间选择',\n          type: 'string',\n          format: 'date',\n        },\n        listName: {\n          title: '对象数组',\n          description: '对象数组嵌套功能',\n          type: 'array',\n          items: {\n            type: 'object',\n            properties: {\n              rangeName: {\n                title: '日期/时间范围',\n                type: 'range',\n                format: 'date',\n                'ui:options': {\n                  placeholder: ['开始日期', '结束日期'],\n                },\n              },\n            },\n          },\n        },\n      },\n    },\n  },\n];\n\nlet result = [elements, advancedElements, layouts, saves];\n\nresult = result.map(list =>\n  list.map(item => ({\n    ...item,\n    setting: { ...commonSettings, ...item.setting },\n  }))\n);\n\nexport default result;\n","import React from 'react';\nimport allSettings from './elementList';\nimport './index.css';\nimport { useGlobal, useGlobalProps, useStore } from '../hooks';\nimport nanoid from 'nanoid';\n\nconst [elements, advancedElements, layouts, saves] = allSettings;\n\nconst Left = props => (\n  <div className='left-layout'>\n    <p className='f6 b'>基础组件</p>\n    <ul className='pl0'>\n      {elements.map((ele, idx) => {\n        return (\n          <li key={idx.toString()} className='left-item'>\n            <Element {...ele} {...props} key={idx.toString()} />\n          </li>\n        );\n      })}\n    </ul>\n    <p className='f6 b'>复杂组件</p>\n    <ul className='pl0'>\n      {advancedElements.map((ele, idx) => {\n        return (\n          <li key={idx.toString()} className='left-item'>\n            <Element {...ele} {...props} key={idx.toString()} />\n          </li>\n        );\n      })}\n    </ul>\n    <p className='f6 b'>布局组件</p>\n    <ul className='pl0'>\n      {layouts.map((ele, idx) => {\n        return (\n          <li key={idx.toString()} className='left-item'>\n            <Element {...ele} {...props} key={idx.toString()} />\n          </li>\n        );\n      })}\n    </ul>\n    <p className='f6 b'>存档</p>\n    <ul className='pl0'>\n      {saves.map((ele, idx) => {\n        return (\n          <li key={idx.toString()} className='left-item'>\n            <Element {...ele} {...props} key={idx.toString()} />\n          </li>\n        );\n      })}\n    </ul>\n  </div>\n);\n\nexport default Left;\n\nconst Element = ({ text, name, schema }) => {\n  const setGlobal = useGlobal();\n  const { selected } = useGlobalProps();\n  const { flatten, onFlattenChange } = useStore();\n\n  const handleElementClick = () => {\n    let _selected = selected || '#';\n    let newId;\n    // 初始字段是0，说明点击了object、list的里侧\n    if ((_selected && _selected[0] === '0') || _selected === '#') {\n      try {\n        const newFlatten = { ...flatten };\n        let oldId = _selected.substring(1);\n        newId = oldId + '/' + name + '_' + nanoid(6);\n        if (_selected === '#') {\n          newId = '#/' + name + '_' + nanoid(6);\n          oldId = '#';\n        }\n        const siblings = newFlatten[oldId].children;\n        siblings.push(newId);\n        const newItem = {\n          parent: oldId,\n          schema: { ...schema, $id: newId },\n          data: undefined,\n          children: [],\n        };\n        newFlatten[newId] = newItem;\n        onFlattenChange(newFlatten);\n        setGlobal({ selected: newId });\n      } catch (error) {\n        console.error(error, 'catch');\n      }\n      return;\n    }\n\n    let _name = name + '_' + nanoid(6);\n    const idArr = selected.split('/');\n    idArr.pop();\n    idArr.push(_name);\n    newId = idArr.join('/');\n    try {\n      const newFlatten = { ...flatten };\n      const item = newFlatten[selected];\n      const siblings = newFlatten[item.parent].children;\n      const idx = siblings.findIndex(x => x === selected);\n      siblings.splice(idx + 1, 0, newId);\n      const newItem = {\n        parent: item.parent,\n        schema: { ...schema, $id: newId },\n        data: undefined,\n        children: [],\n      };\n      newFlatten[newId] = newItem;\n      onFlattenChange(newFlatten);\n      setGlobal({ selected: newId });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <div className='left-element' onClick={handleElementClick}>\n      {text}\n    </div>\n  );\n};\n","import nanoid from 'nanoid';\nimport deepClone from 'clone';\n\n// 克隆对象\nexport function clone(data) {\n  try {\n    return JSON.parse(JSON.stringify(data));\n  } catch (e) {\n    return data;\n  }\n}\n\n// '3' => true, 3 => true, undefined => false\nexport function isLooselyNumber(num) {\n  if (typeof num === 'number') return true;\n  if (typeof num === 'string') {\n    return !Number.isNaN(Number(num));\n  }\n  return false;\n}\n\nexport function isCssLength(str) {\n  if (typeof str !== 'string') return false;\n  return str.match(/^([0-9])*(%|px|rem|em)$/i);\n}\n\n// 深度对比\nexport function isDeepEqual(param1, param2) {\n  if (param1 === undefined && param2 === undefined) return true;\n  else if (param1 === undefined || param2 === undefined) return false;\n  else if (param1.constructor !== param2.constructor) return false;\n\n  if (param1.constructor === Array) {\n    if (param1.length !== param2.length) return false;\n    for (let i = 0; i < param1.length; i++) {\n      if (param1[i].constructor === Array || param1[i].constructor === Object) {\n        if (!isDeepEqual(param1[i], param2[i])) return false;\n      } else if (param1[i] !== param2[i]) return false;\n    }\n  } else if (param1.constructor === Object) {\n    if (Object.keys(param1).length !== Object.keys(param2).length) return false;\n    for (let i = 0; i < Object.keys(param1).length; i++) {\n      const key = Object.keys(param1)[i];\n      if (\n        param1[key] &&\n        typeof param1[key] !== 'number' &&\n        (param1[key].constructor === Array ||\n          param1[key].constructor === Object)\n      ) {\n        if (!isDeepEqual(param1[key], param2[key])) return false;\n      } else if (param1[key] !== param2[key]) return false;\n    }\n  } else if (param1.constructor === String || param1.constructor === Number) {\n    return param1 === param2;\n  }\n  return true;\n}\n\n// 时间组件\nexport function getFormat(format) {\n  let dateFormat;\n  switch (format) {\n    case 'date':\n      dateFormat = 'YYYY-MM-DD';\n      break;\n    case 'time':\n      dateFormat = 'HH:mm:ss';\n      break;\n    default:\n      // dateTime\n      dateFormat = 'YYYY-MM-DD HH:mm:ss';\n  }\n  return dateFormat;\n}\n\nexport function hasRepeat(list) {\n  return list.find(\n    (x, i, self) =>\n      i !== self.findIndex(y => JSON.stringify(x) === JSON.stringify(y))\n  );\n}\n\n// ----------------- schema 相关\n\n// 合并propsSchema和UISchema。由于两者的逻辑相关性，合并为一个大schema能简化内部处理\nexport function combineSchema(propsSchema = {}, uiSchema = {}) {\n  const propList = getChildren(propsSchema);\n  const newList = propList.map(p => {\n    const { name } = p;\n    const { type, enum: options, properties, items } = p.schema;\n    const isObj = type === 'object' && properties;\n    const isArr = type === 'array' && items && !options; // enum + array 代表的多选框，没有sub\n    const ui = name && uiSchema[p.name];\n    if (!ui) {\n      return p;\n    }\n    // 如果是list，递归合并items\n    if (isArr) {\n      const newItems = combineSchema(items, ui.items || {});\n      return { ...p, schema: { ...p.schema, ...ui, items: newItems } };\n    }\n    // object递归合并整个schema\n    if (isObj) {\n      const newSchema = combineSchema(p.schema, ui);\n      return { ...p, schema: newSchema };\n    }\n    return { ...p, schema: { ...p.schema, ...ui } };\n  });\n\n  const newObj = {};\n  newList.forEach(s => {\n    newObj[s.name] = s.schema;\n  });\n\n  const topLevelUi = {};\n  Object.keys(uiSchema).forEach(key => {\n    if (typeof key === 'string' && key.substring(0, 3) === 'ui:') {\n      topLevelUi[key] = uiSchema[key];\n    }\n  });\n  if (isEmpty(newObj)) {\n    return { ...propsSchema, ...topLevelUi };\n  }\n  return { ...propsSchema, ...topLevelUi, properties: newObj };\n}\n\nfunction isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n}\n\n// 获得propsSchema的children\nfunction getChildren(schema) {\n  if (!schema) return [];\n  const {\n    // object\n    properties,\n    // array\n    items,\n    type,\n  } = schema;\n  if (!properties && !items) {\n    return [];\n  }\n  let schemaSubs = {};\n  if (type === 'object') {\n    schemaSubs = properties;\n  }\n  if (type === 'array') {\n    schemaSubs = items;\n  }\n  return Object.keys(schemaSubs).map(name => ({\n    schema: schemaSubs[name],\n    name,\n  }));\n}\n\n// 合并多个schema树，比如一个schema的树节点是另一个schema\nexport function combine() {}\n\n// 代替eval的函数\nexport const parseString = string =>\n  Function('\"use strict\";return (' + string + ')')();\n\n// 解析函数字符串值\nexport const evaluateString = (string, formData, rootValue) =>\n  Function(`\"use strict\";\n    const rootValue = ${JSON.stringify(rootValue)};\n    const formData = ${JSON.stringify(formData)};\n    return (${string})`)();\n\n// 判断schema的值是是否是“函数”\n// JSON无法使用函数值的参数，所以使用\"{{...}}\"来标记为函数，也可使用@标记，不推荐。\nexport function isFunction(func) {\n  if (typeof func === 'function') {\n    return true;\n  }\n  if (typeof func === 'string' && func.substring(0, 1) === '@') {\n    return func.substring(1);\n  }\n  if (\n    typeof func === 'string' &&\n    func.substring(0, 2) === '{{' &&\n    func.substring(func.length - 2, func.length) === '}}'\n  ) {\n    return func.substring(2, func.length - 2);\n  }\n  return false;\n}\n\n// 判断schema中是否有属性值是函数表达式\nexport function isFunctionSchema(schema) {\n  return Object.keys(schema).some(key => {\n    if (typeof schema[key] === 'function') {\n      return true;\n    } else if (typeof schema[key] === 'string') {\n      return isFunction(schema[key]);\n    } else if (typeof schema[key] === 'object') {\n      return isFunctionSchema(schema[key]);\n    } else {\n      return false;\n    }\n  });\n}\n\n// 后面三个参数都是内部递归使用的，将schema的树形结构扁平化成一层, 每个item的结构\n// {\n//   parent: '#',\n//   schema: ...,\n//   children: []\n// }\nexport function flattenSchema(schema, name = '#', parent, result = {}) {\n  const _schema = deepClone(schema);\n  if (!_schema.$id) {\n    _schema.$id = name; // 给生成的schema添加一个唯一标识，方便从schema中直接读取\n  }\n  const children = [];\n  const isObj = _schema.type === 'object' && _schema.properties;\n  const isList =\n    _schema.type === 'array' && _schema.items && _schema.items.properties;\n  if (isObj) {\n    Object.entries(_schema.properties).forEach(([key, value]) => {\n      const uniqueName = name + '/' + key;\n      children.push(uniqueName);\n      flattenSchema(value, uniqueName, name, result);\n    });\n    delete _schema.properties;\n  }\n  if (isList) {\n    Object.entries(_schema.items.properties).forEach(([key, value]) => {\n      const uniqueName = name + '/' + key;\n      children.push(uniqueName);\n      flattenSchema(value, uniqueName, name, result);\n    });\n    delete _schema.items.properties;\n  }\n  if (_schema.type) {\n    result[name] = { parent, schema: _schema, children };\n  }\n  return result;\n}\n\nexport const getKeyFromUniqueId = (uniqueId = '#') => {\n  const arr = uniqueId.split('/');\n  return arr[arr.length - 1];\n};\n\nexport const changeKeyFromUniqueId = (uniqueId = '#', key = 'something') => {\n  const arr = uniqueId.split('/');\n  if (typeof key === 'string' || typeof key === 'number') {\n    arr[arr.length - 1] = key;\n  }\n  return arr.join('/');\n};\n\nconst copyFlattenItem = _item => {\n  return {\n    parent: _item.parent,\n    schema: { ..._item.schema },\n    data: _item.data,\n    children: _item.children,\n  };\n};\n\n// final = true 用于最终的导出的输出\n// 几种特例：\n// 1. 删除时值删除了item，没有删除和parent的关联，也没有删除children，所以要在解析这步来兜住 (所有的解析都是)\n// 2. 修改$id的情况, 修改的是schema内的$id, 解析的时候要把schema.$id 作为真正的id (final = true的解析)\nexport function idToSchema(flatten, id = '#', final = false) {\n  let schema = {};\n  const _item = flatten[id];\n  const item = deepClone(_item);\n  if (item) {\n    schema = { ...item.schema };\n    // 最终输出去掉 $id\n    if (final) {\n      schema.$id && delete schema.$id;\n    }\n    if (item.children.length > 0) {\n      item.children.forEach(child => {\n        let childId = child;\n        // TODO: 这个情况会出现吗？return会有问题吗？\n        if (!flatten[child]) {\n          return;\n        }\n        // 最终输出将所有的 key 值改了\n        try {\n          if (final) {\n            childId = flatten[child].schema.$id;\n          }\n        } catch (error) {\n          console.log('catch', error);\n        }\n        const key = getKeyFromUniqueId(childId);\n        if (schema.type === 'object') {\n          if (!schema.properties) {\n            schema.properties = {};\n          }\n          schema.properties[key] = idToSchema(flatten, child, final);\n        }\n        if (\n          schema.type === 'array' &&\n          schema.items &&\n          schema.items.type === 'object'\n        ) {\n          if (!schema.items.properties) {\n            schema.items.properties = {};\n          }\n          schema.items.properties[key] = idToSchema(flatten, child, final);\n        }\n      });\n    }\n  }\n  return schema;\n}\n\n// 删除对应id的schema（以及所有它的子schema）\nexport const deleteSchema = (id, schema) => {\n  const flatten = flattenSchema(schema);\n  if (id in flatten) {\n    delete flatten[id];\n  }\n  return idToSchema(flatten);\n};\n\n// 复制对应id的schema\n// export const copySchema = (id, schema) => {\n//   const flatten = flattenSchema(schema);\n//   let newId = id + '$$' + nanoid(10);\n//   if (id && typeof id === 'string' && id.split('$$').length > 1) {\n//     newId = id.split('$$')[0] + '$$' + nanoid(10);\n//   }\n//   if (id in flatten) {\n//     // 将创建的新id注入到parent的children array\n//     const parent = flatten[id].parent;\n//     if (parent && parent in flatten) {\n//       const children = flatten[parent].children;\n//       try {\n//         const idx = children.findIndex((x) => x === id);\n//         children.splice(idx + 1, 0, newId);\n//       } catch (error) {\n//         console.error(error.message);\n//       }\n//     }\n\n//     try {\n//       // 简单的实现一下拷贝\n//       flatten[newId] = {\n//         parent: flatten[id].parent,\n//         schema: { ...flatten[id].schema },\n//         children: flatten[id].children,\n//       };\n//       flatten[newId].schema.$id = newId;\n//     } catch (error) {\n//       console.error(error.message);\n//     }\n//   }\n//   return [idToSchema(flatten), newId];\n// };\n\nexport const copyItem = (flatten, $id) => {\n  let newFlatten = { ...flatten };\n  try {\n    const item = flatten[$id];\n    const newId = $id + nanoid(6);\n    const siblings = newFlatten[item.parent].children;\n    const idx = siblings.findIndex(x => x === $id);\n    siblings.splice(idx + 1, 0, newId);\n    newFlatten[newId] = deepClone(newFlatten[$id]);\n    newFlatten[newId].schema.$id = newId;\n    return [newFlatten, newId];\n  } catch (error) {\n    console.error(error, 'catcherror');\n    return [flatten, $id];\n  }\n};\n\n// schema的某个id位置后面添加一个名字是key的subSchema，生成新的schema\n// TODO: 如果没有任何选中，或者选中的是object，逻辑要变\n\nexport const addSchema = ({ id, key, schema, subSchema }) => {\n  const flatten = flattenSchema(schema);\n  let newId = changeKeyFromUniqueId(id, key) + '$$' + nanoid(10);\n  if (id in flatten) {\n    // 生成新id，并将其放置于parent节点的children属性中\n    const parent = flatten[id].parent;\n    if (parent && parent in flatten) {\n      const children = flatten[parent].children;\n      try {\n        const idx = children.findIndex(x => x === id);\n        children.splice(idx + 1, 0, newId);\n      } catch (error) {\n        console.error(error.message);\n      }\n    }\n    // 生成新节点\n    try {\n      flatten[newId] = {\n        parent: flatten[id].parent,\n        schema: subSchema,\n        children: [],\n      };\n      flatten[newId].schema.$id = newId;\n    } catch (error) {\n      console.error(error.message);\n    }\n  }\n  // 将id也返回，用于ui展示显示\n  return [idToSchema(flatten), newId];\n};\n\n// export const changeSubSchema = ({ id, schema, subSchema }) => {\n//   const flatten = flattenSchema(schema);\n//   if (id in flatten) {\n//     const oldSchema = flatten[id];\n//     const newId = subSchema.$id;\n//     if (oldSchema.$id !== subSchema.$id) {\n//     }\n//   }\n// };\n\n// 解析函数字符串值\n// TODO: 没有考虑list的情况\nexport const getDataById = (data, idString) => {\n  if (idString === '#') return data;\n  try {\n    const idConnectedByDots = idString\n      .split('/')\n      .filter(id => id !== '#')\n      .map(id => `[\"${id}\"]`)\n      .join('');\n    const string = `data${idConnectedByDots}`;\n    const a = `\"use strict\";\n    const data = ${JSON.stringify(data)};\n    return ${string}`;\n    return Function(a)();\n    // TODO: can be better\n    // let result = { ...data };\n    // idConnectedByDots.forEach((item) => {\n    //   result = result[item];\n    // });\n    // return result;\n  } catch (error) {\n    return undefined;\n  }\n};\n\n// TODO: 没有考虑list的情况\nexport const dataToFlatten = (flatten, data) => {\n  if (!flatten || !data) return;\n  Object.entries(flatten).forEach(([id, item]) => {\n    const branchData = getDataById(data, id);\n    flatten[id].data = branchData;\n  });\n  return flatten;\n};\n\nexport const onChangeById = onChange => (id, value) => {};\n\n// TODO: 没有考虑list的情况\nexport const flattenToData = (flatten, id = '#') => {\n  try {\n    let result = flatten[id].data;\n    const ids = Object.keys(flatten);\n    const childrenIds = ids.filter(item => {\n      const lengthOfId = id.split('/').length;\n      const lengthOfChild = item.split('/').length;\n      return item.indexOf(id) > -1 && lengthOfChild > lengthOfId;\n    });\n    if (childrenIds && childrenIds.length > 0) {\n      if (result === undefined) {\n        // TODO: 这个是简化的逻辑，在编辑器模型下，list和object都是object结构\n        if (['object', 'array'].indexOf(flatten[id].schema.type) > -1) {\n          result = {};\n        }\n      }\n      childrenIds.forEach(c => {\n        const lengthOfId = id.split('/').length;\n        const lengthOfChild = c.split('/').length;\n        // 只比他长1，是直属的child\n        if (lengthOfChild === lengthOfId + 1) {\n          const cData = flattenToData(flatten, c);\n          const cKey = getKeyFromUniqueId(c);\n          result[cKey] = cData;\n        }\n      });\n    }\n    return result;\n  } catch (error) {\n    return undefined;\n  }\n};\n\n// 例如当前item的id = '#/obj/input'  propName: 'ui:labelWidth'\nexport const getParentProps = (propName, id, flatten) => {\n  try {\n    const item = flatten[id];\n    if (item.schema[propName] !== undefined) return item.schema[propName];\n    if (item && item.parent) {\n      const parentSchema = flatten[item.parent].schema;\n      if (parentSchema[propName] !== undefined) {\n        return parentSchema[propName];\n      } else {\n        return getParentProps(propName, item.parent, flatten);\n      }\n    }\n  } catch (error) {\n    return undefined;\n  }\n};\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离高阶日期组件\n */\n\nimport React from 'react';\nimport moment from 'moment';\nimport { getFormat } from '../utils';\n\nexport default (p, onChange, RangeComponent) => {\n  const { format = 'dateTime' } = p.schema;\n  const dateFormat = getFormat(format);\n  let defaultObj = {};\n  if (p.value && Array.isArray(p.value) && p.value[0] && p.value[1]) {\n    defaultObj = {\n      defaultValue: [\n        moment(p.value[0], dateFormat),\n        moment(p.value[1], dateFormat),\n      ],\n    };\n  }\n  const datePrams = {\n    ...p.options,\n    ...defaultObj,\n    style: { width: '100%' },\n    showTime: format === 'dateTime',\n    disabled: p.disabled || p.readonly,\n    onChange,\n  };\n  return <RangeComponent {...datePrams} />;\n};\n","/**\n * Updated by Tw93 on 2019-12-08.\n * 日历多选组件\n */\n\nimport { DatePicker } from 'antd';\nimport rangeHoc from '../../components/rangeHoc';\n\nconst { RangePicker } = DatePicker;\n\nexport default function dateRange(p) {\n  const onChange = (value, string) => p.onChange(string);\n  return rangeHoc(p, onChange, RangePicker);\n}\n","import React from 'react';\n\nconst FoldIcon = ({\n  fold = false,\n  width,\n  height,\n  fill,\n  style = {},\n  ...rest\n}) => (\n  <div\n    style={style}\n    className={fold ? 'fold-icon' : 'fold-icon fold-icon-active'}\n    {...rest}\n  >\n    <svg viewBox=\"0 0 1024 1024\" width={width || 18} height={height || 18}>\n      <path\n        d=\"M942.048 306.176c-12.288-12.288-31.328-13.024-43.008-2.016L529.056 674.112c-15.072 15.872-19.008 15.808-34.816 0L124.288 304.16c-11.68-11.04-30.72-10.272-43.008 2.016-12.512 12.512-13.216 32.032-1.6 43.68L490.624 760.8c5.056 5.056 11.648 7.328 18.464 7.744h5.152c6.816-.448 13.408-2.72 18.464-7.744l410.944-410.944c11.584-11.648 10.88-31.2-1.6-43.68z\"\n        fill={fill || '#3c3c3c'}\n      />\n    </svg>\n  </div>\n);\n\nexport default FoldIcon;\n","import React from 'react';\nimport { isFunction } from '../utils';\n\nconst getEnumValue = (value, enums, enumNames) => {\n  if (Array.isArray(enums) && Array.isArray(enumNames)) {\n    if (typeof value === 'string' || typeof value === 'number') {\n      const count = enums.indexOf(value);\n      if (count > -1) {\n        return enumNames[count];\n      }\n      return value;\n    } else if (Array.isArray(value)) {\n      const result = value.map((v) => getEnumValue(value, enums, enumNames));\n      return String(result);\n    }\n    return value;\n  }\n  return value;\n};\n\nconst DescriptionList = ({ schema = {}, value = [], index }) => {\n  const list = getDescription({ schema, value, index })\n    .filter((item) => item.title)\n    .slice(0, 3);\n  return (\n    <ul className=\"flex overflow-hidden\" style={{ paddingRight: 45 }}>\n      {list.map((item, i) => {\n        return item.title ? (\n          <li className=\"flex-auto mr2 overflow-hidden\" key={i}>\n            <span className=\"fw5\">{item.title}: </span>\n            <span>{item.text}</span>\n          </li>\n        ) : null;\n      })}\n    </ul>\n  );\n};\n\nexport default DescriptionList;\n\n// 获得title，value值list\nexport const getDescription = ({ schema = {}, value = [], index }) => {\n  const { items = {} } = schema;\n  // 只有当items为object时才做收起（fold）处理\n  if (items.type !== 'object') {\n    return [];\n  }\n  let titles = (items && items.properties) || {};\n  titles = Object.values(titles);\n  let description = (value && value.length && value[index]) || {};\n  const valueList = Object.values(description);\n  const descList = titles.map((t, idx) => {\n    let hidden = t && t['ui:hidden'];\n    // ui:hidden为判断式时解析 TODO: 解析在外部集中做\n    if (hidden) return;\n    const title = t.title;\n    let text = valueList[idx];\n    if (text === null && text === undefined) {\n      text = '';\n    } else if (typeof text === 'boolean') {\n      text = text ? '是' : '否';\n    } else if (typeof text !== 'string' && typeof text !== 'number' && text) {\n      text = '{复杂结构}';\n    } else if (t.enum && t.enumNames) {\n      text = getEnumValue(text, t.enum, t.enumNames);\n    }\n    return {\n      title,\n      text,\n    };\n  });\n  // 去空\n  return descList.filter((d) => !!d);\n};\n","/**\n * Updated by Tw93 on 2019-12-01.\n * 数组组件\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport * as Icons from '@ant-design/icons';\nimport { Button } from 'antd';\nimport {\n  SortableContainer,\n  SortableHandle,\n  SortableElement,\n  arrayMove,\n} from 'react-sortable-hoc';\nimport { isFunction, evaluateString } from '../../utils';\nimport FoldIcon from '../../components/foldIcon';\nimport DescriptionList, { getDescription } from '../../components/descList';\n\nconst DragHandle = SortableHandle(() => (\n  <span className='fr-move-icon'>:::</span>\n));\n\nclass listItem extends React.Component {\n  componentDidMount() {\n    const { p = {}, name, fold } = this.props;\n    const description = getDescription({\n      schema: p.schema,\n      value: p.value,\n      index: name,\n    });\n    // 如果第一个值不为空，则收起\n    // 新增的值为0，不折叠\n    const hasValue = description && description[0] && description[0].text;\n    if (hasValue && fold !== 0) {\n      this.props.toggleFoldItem(name);\n    }\n  }\n\n  toggleFold = () => {\n    this.props.toggleFoldItem(this.props.name);\n  };\n\n  render() {\n    const { item, p = {}, name, fold } = this.props;\n    const descProps = { ...p, index: name };\n    const { options = {}, readonly, formData, value: rootValue } = p;\n    const { foldable: canFold } = options;\n    let { hideDelete, itemButtons } = options;\n\n    // 判断 hideDelete 是不是函数，是的话将计算后的值赋回\n    let _isFunction = isFunction(hideDelete);\n    if (_isFunction) {\n      // isFunction 返回为 true 则说明只可能为 string | Function\n      if (typeof _isFunction === 'string') {\n        hideDelete = evaluateString(_isFunction, formData, rootValue);\n      } else if (typeof _isFunction === 'function') {\n        hideDelete = _isFunction(formData, rootValue);\n      }\n    }\n\n    // 只有当items为object时才做收起（fold）处理\n    const isObj = p.schema.items && p.schema.items.type == 'object';\n    let setClass =\n      'fr-set ba b--black-10 hover-b--black-20 relative flex flex-column';\n    if (canFold && fold) {\n      setClass += ' pv12';\n    } else if (p.displayType === 'row') {\n      setClass += ' pt44';\n    }\n    return (\n      <li className={setClass}>\n        {canFold && fold && isObj ? <DescriptionList {...descProps} /> : item}\n        {canFold && (\n          <FoldIcon\n            fold={fold}\n            onClick={this.toggleFold}\n            style={{ position: 'absolute', top: 12, right: 32 }}\n          />\n        )}\n        {!readonly && <DragHandle />}\n        {!((canFold && fold) || hideDelete || readonly) && (\n          <div className='self-end flex'>\n            <FrButton\n              type='dashed'\n              icon='delete'\n              onClick={() => {\n                const value = [...p.value];\n                value.splice(name, 1);\n                p.onChange(value);\n              }}\n            >\n              删除\n            </FrButton>\n            {itemButtons &&\n              itemButtons.length > 0 &&\n              itemButtons.map((btn, idx) => {\n                return (\n                  <FrButton\n                    key={idx.toString()}\n                    className='ml2'\n                    type='dashed'\n                    icon={btn.icon}\n                    onClick={() => {\n                      const value = [...p.value];\n                      if (typeof window[btn.callback] === 'function') {\n                        const result = window[btn.callback](value, name); // eslint-disable-line\n                        p.onChange(result);\n                      }\n                    }}\n                  >\n                    {btn.text || ''}\n                  </FrButton>\n                );\n              })}\n          </div>\n        )}\n      </li>\n    );\n  }\n}\n\nconst SortableItem = SortableElement(listItem);\nclass fieldList extends React.Component {\n  handleAddClick = () => {\n    const { p, addUnfoldItem } = this.props;\n    const value = [...p.value];\n    value.push(p.newItem);\n    p.onChange(value);\n    addUnfoldItem();\n  };\n  // buttons is a list, each item looks like:\n  // {\n  //   \"text\": \"删除全部\",\n  //   \"icon\": \"delete\",\n  //   \"callback\": \"clearAll\"\n  // }\n\n  render() {\n    const { p, foldList = [], toggleFoldItem } = this.props;\n    const { options = {}, extraButtons = {} } = p || {};\n    // prefer ui:options/buttons to ui:extraButtons, but keep both for backwards compatibility\n    const buttons = options.buttons || extraButtons || [];\n    const { readonly, schema = {} } = p;\n    const { maxItems } = schema;\n    const list = p.value || [];\n    const canAdd = maxItems ? maxItems > list.length : true; // 当到达最大个数，新增按钮消失\n    return (\n      <ul className='pl0 ma0'>\n        {list.map((_, name) => (\n          <SortableItem\n            key={`item-${name}`}\n            index={name}\n            name={name}\n            p={p}\n            fold={foldList[name]}\n            toggleFoldItem={toggleFoldItem}\n            item={p.children}\n          />\n        ))}\n        {!readonly && (\n          <div className='tr'>\n            {canAdd && (\n              <FrButton icon='add' onClick={this.handleAddClick}>\n                新增\n              </FrButton>\n            )}\n            {buttons &&\n              buttons.length > 0 &&\n              buttons.map((item, i) => (\n                <FrButton\n                  className='ml2'\n                  icon={item.icon}\n                  key={i.toString()}\n                  onClick={() => {\n                    if (item.callback === 'clearAll') {\n                      p.onChange([]);\n                      return;\n                    }\n                    if (item.callback === 'copyLast') {\n                      const value = [...p.value];\n                      const lastIndex = value.length - 1;\n                      value.push(lastIndex > -1 ? value[lastIndex] : p.newItem);\n                      p.onChange(value);\n                      return;\n                    }\n                    if (typeof window[item.callback] === 'function') {\n                      const value = [...p.value];\n                      const onChange = value => p.onChange(value);\n                      window[item.callback](value, onChange, p.newItem); // eslint-disable-line\n                    }\n                  }}\n                >\n                  {item.text}\n                </FrButton>\n              ))}\n          </div>\n        )}\n      </ul>\n    );\n  }\n}\n\nconst SortableList = SortableContainer(fieldList);\nclass list extends React.Component {\n  static propTypes = {\n    value: PropTypes.array,\n  };\n\n  static defaultProps = {\n    value: [],\n  };\n\n  constructor(props) {\n    super(props);\n    const len = this.props.value.length || 0;\n    this.state = {\n      foldList: new Array(len).fill(false) || [],\n    };\n  }\n\n  // 新添加的item默认是展开的\n  addUnfoldItem = () =>\n    this.setState({\n      foldList: [...this.state.foldList, 0],\n    });\n\n  toggleFoldItem = index => {\n    const { foldList = [] } = this.state;\n    foldList[index] = !foldList[index]; // TODO: need better solution for the weird behavior caused by setState being async\n    this.setState({\n      foldList,\n    });\n  };\n\n  handleSort = ({ oldIndex, newIndex }) => {\n    const { onChange, value } = this.props;\n    onChange(arrayMove(value, oldIndex, newIndex));\n    this.setState({\n      foldList: arrayMove(this.state.foldList, oldIndex, newIndex),\n    });\n  };\n\n  render() {\n    const { foldList } = this.state;\n    return (\n      <SortableList\n        p={this.props}\n        foldList={foldList}\n        toggleFoldItem={this.toggleFoldItem}\n        addUnfoldItem={this.addUnfoldItem}\n        distance={6}\n        useDragHandle\n        helperClass='fr-sort-help-class'\n        shouldCancelStart={e =>\n          e.toElement && e.toElement.className === 'fr-tooltip-container'\n        }\n        onSortEnd={this.handleSort}\n      />\n    );\n  }\n}\n\nfunction FrButton({ icon, children, ...rest }) {\n  let iconName;\n  switch (icon) {\n    case 'add':\n      iconName = 'PlusCircleOutlined';\n      break;\n    case 'delete':\n      iconName = 'DeleteOutlined';\n      break;\n    default:\n      iconName = icon;\n      break;\n  }\n  const IconComponent = Icons[iconName];\n  if (IconComponent) {\n    return (\n      <Button {...rest} icon={<IconComponent />}>\n        {children}\n      </Button>\n    );\n  }\n  return <Button {...rest}>{children}</Button>;\n}\n\nexport default list;\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离高阶多选组件\n */\n\nimport React from 'react';\n\nexport default (MultiComponent) => (p) => {\n  const { Option } = MultiComponent;\n  const onChange = (value) => p.onChange(value);\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { enum: enums, enumNames } = p.schema || {};\n  const _value = p.value && Array.isArray(p.value) ? p.value : [];\n  return (\n    <MultiComponent\n      {...p.options}\n      style={{ width: '100%', ...style }}\n      mode=\"multiple\"\n      disabled={p.disabled || p.readonly}\n      value={_value}\n      onChange={onChange}\n    >\n      {(enums || []).map((val, index) => (\n        <Option value={val} key={index}>\n          <span\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{\n              __html: enumNames ? enumNames[index] : val,\n            }}\n          />\n        </Option>\n      ))}\n    </MultiComponent>\n  );\n};\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离数字输入组件\n */\n\nimport React from 'react';\n\nexport default (NumberComponent) => (p) => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { max, min, step } = p.schema;\n  let obj = {};\n  if (max || max === 0) {\n    obj = { max };\n  }\n\n  if (min || min === 0) {\n    obj = { ...obj, min };\n  }\n\n  if (step) {\n    obj = { ...obj, step };\n  }\n\n  return (\n    <NumberComponent\n      {...obj}\n      style={{ width: '100%', ...style }}\n      disabled={p.disabled || p.readonly}\n      {...p.options}\n      value={p.value}\n      onChange={p.onChange}\n    />\n  );\n};\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 多选组件\n */\n\nimport { Select } from 'antd';\nimport multiSelectHoc from '../../components/multiSelectHoc';\n\nexport default multiSelectHoc(Select);\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 数字输入组件\n */\n\nimport { InputNumber } from 'antd';\nimport numberHoc from '../../components/numberHoc';\n\nexport default numberHoc(InputNumber);\n","/**\n * Created by Tw93 on 2019-12-07.\n * 高阶选择组件\n */\n\nimport React from 'react';\n\nexport default (SelectComponent) => (p) => {\n  const { Option } = SelectComponent;\n  const onChange = (value) => p.onChange(value);\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { enum: enums, enumNames } = p.schema || {};\n  return (\n    <SelectComponent\n      style={{ width: '100%', ...style }}\n      {...p.options}\n      disabled={p.disabled || p.readonly}\n      value={p.value}\n      onChange={onChange}\n    >\n      {(enums || []).map((val, index) => {\n        let option = enumNames ? enumNames[index] : val;\n        const isHtml = typeof option === 'string' && option[0] === '<';\n        if (isHtml) {\n          option = <span dangerouslySetInnerHTML={{ __html: option }} />;\n        }\n        return (\n          <Option value={val} key={index}>\n            {option}\n          </Option>\n        );\n      })}\n    </SelectComponent>\n  );\n};\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 选择组件\n */\n\nimport { Select } from 'antd';\nimport selectHoc from '../../components/selectHoc';\n\nexport default selectHoc(Select);\n","/**\n * Created by Tw93 on 2019-12-07.\n * 滑动输入组件\n */\n\nimport React from 'react';\nimport { InputNumber, Slider } from 'antd';\n\nconst SliderWithNumber = p => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { max, min, step } = p.schema;\n  let setting = {};\n  if (max || max === 0) {\n    setting = { max };\n  }\n\n  if (min || min === 0) {\n    setting = { ...setting, min };\n  }\n\n  if (step) {\n    setting = { ...setting, step };\n  }\n\n  let hideNumber = false;\n  if (p.options && p.options.hideNumber) {\n    hideNumber = true;\n  }\n\n  const renderNumber = p.readonly ? (\n    <span style={{ width: '90px' }}>\n      {p.value === (undefined || '') ? '-' : p.value}\n    </span>\n  ) : (\n    <InputNumber\n      {...p.options}\n      {...setting}\n      style={{ width: '90px', ...style }}\n      value={p.value}\n      disabled={p.disabled}\n      onChange={p.onChange}\n    />\n  );\n\n  return (\n    <div className='fr-slider'>\n      <Slider\n        style={{ flexGrow: 1, marginRight: hideNumber ? 0 : 12 }}\n        {...setting}\n        onChange={p.onChange}\n        value={typeof p.value === 'number' ? p.value : min || 0}\n        disabled={p.disabled || p.readonly}\n      />\n      {hideNumber ? null : renderNumber}\n    </div>\n  );\n};\n\nexport default SliderWithNumber;\n","import React from 'react';\nimport { Input } from 'antd';\n\nconst { TextArea } = Input;\n\nexport default function ta(p) {\n  const { options, invalid } = p;\n  const style = invalid ? { borderColor: '#f5222d' } : {};\n  const defaultUi = { rows: 3 };\n  const ui = { ...defaultUi, ...options };\n  const onChange = (e) => p.onChange(e.target.value);\n  return (\n    <TextArea\n      style={style}\n      disabled={p.disabled || p.readonly}\n      value={p.value}\n      {...ui}\n      onChange={onChange}\n    />\n  );\n}\n","import React from 'react';\n\nconst defaultImg =\n  'https://img.alicdn.com/tfs/TB14tSiKhTpK1RjSZFKXXa2wXXa-354-330.png';\n\nexport default (format, value) => {\n  return format === 'image' ? (\n    <img\n      src={value || defaultImg}\n      alt=\"图片地址错误\"\n      className=\"fr-preview-image\"\n    />\n  ) : null;\n};\n","import React from 'react';\nimport { PictureOutlined } from '@ant-design/icons';\nimport { Input, Popover } from 'antd';\nimport previewContent from '../../components/previewContent';\n\nconst previewNode = (format, value) => {\n  if (format !== 'image') {\n    return null;\n  }\n  return (\n    <Popover\n      content={previewContent(format, value)}\n      className=\"fr-preview\"\n      placement=\"bottom\"\n    >\n      <PictureOutlined />\n    </Popover>\n  );\n};\n\nexport default function input(p) {\n  const { options = {}, invalid } = p;\n  const style = invalid ? { borderColor: '#f5222d' } : {};\n  const { format = 'text' } = p.schema;\n  const type = format === 'image' ? 'text' : format;\n  const handleChange = (e) => p.onChange(e.target.value);\n  return (\n    <Input\n      style={style}\n      {...options}\n      value={p.value}\n      type={type}\n      disabled={p.disabled || p.readonly}\n      addonAfter={\n        options.addonAfter ? options.addonAfter : previewNode(format, p.value)\n      }\n      onChange={handleChange}\n    />\n  );\n}\n","import checkbox from './checkbox';\nimport checkboxes from './checkboxes';\nimport color from './color';\nimport date from './date';\nimport dateRange from './dateRange';\nimport list from './list';\nimport listEditor from './listEditor';\nimport map from './map';\nimport multiSelect from './multiSelect';\nimport number from './number';\nimport radio from './radio';\nimport select from './select';\nimport slider from './slider';\nimport switch1 from './switch';\nimport textarea from './textarea';\nimport upload from './upload';\nimport input from './input';\n\nexport const widgets = {\n  checkbox,\n  checkboxes, // checkbox多选\n  color,\n  date,\n  dateRange,\n  input,\n  list,\n  listEditor,\n  map,\n  multiSelect, // 下拉多选\n  number,\n  radio,\n  select,\n  slider, // 带滚条的number\n  switch: switch1,\n  textarea,\n  upload,\n};\n","import React from 'react';\nimport { Checkbox } from 'antd';\n\nexport default function radio({ value, onChange, disabled, readonly }) {\n  const handleChange = e => {\n    onChange(e.target.checked);\n  };\n\n  return (\n    <Checkbox\n      disabled={disabled || readonly}\n      onChange={handleChange}\n      checked={value}\n    />\n  );\n}\n","import React from 'react';\nimport { Checkbox } from 'antd';\n\nexport default function checkboxes(p) {\n  const { enum: enums, enumNames } = p.schema || {};\n  const _value = p.value && Array.isArray(p.value) ? p.value : [];\n  return (\n    <Checkbox.Group\n      disabled={p.disabled || p.readonly}\n      value={_value}\n      onChange={p.onChange}\n    >\n      {(enums || [true, false]).map((val, index) => (\n        <Checkbox value={val} key={index}>\n          <span\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{\n              __html: enumNames ? enumNames[index] : val,\n            }}\n          />\n        </Checkbox>\n      ))}\n    </Checkbox.Group>\n  );\n}\n","import React from 'react';\nimport ColorPicker from 'rc-color-picker';\nimport { Input } from 'antd';\nimport 'rc-color-picker/assets/index.css';\n\nexport default function color(p) {\n  const { format } = p.schema;\n  const onPickerChange = (e) => {\n    if (p.disabled || p.readonly) return;\n    p.onChange(e.color);\n  };\n  const onInputChange = (e) => {\n    // const isHex = value.match(/^(#{0,1})([0-9A-F]{6})$/i);\n    p.onChange(e.target.value);\n  };\n\n  return (\n    <div className=\"fr-color-picker\">\n      {\n        <ColorPicker\n          type={format}\n          animation=\"slide-up\"\n          color={p.value ? p.value : '#ffffff'}\n          onChange={onPickerChange}\n        />\n      }\n      {p.readonly ? (\n        <span>{p.value || '#ffffff'}</span>\n      ) : (\n        <Input\n          placeholder=\"#ffffff\"\n          disabled={p.disabled}\n          value={p.value}\n          onChange={onInputChange}\n        />\n      )}\n    </div>\n  );\n}\n","/**\n * Updated by fateriddle on 2019-12-12.\n * 日期组件\n */\n\nimport { DatePicker, TimePicker } from 'antd';\nimport dateHoc from '../../components/dateHoc';\n\nexport default function date(p) {\n  const { format = 'dateTime' } = p.schema;\n  const onChange = (value, string) => p.onChange(string);\n  const DateComponent = format === 'time' ? TimePicker : DatePicker;\n  return dateHoc(p, onChange, DateComponent);\n}\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离高阶日期组件\n */\n\nimport React from 'react';\nimport moment from 'moment';\nimport { getFormat } from '../utils';\n\nexport default (p, onChange, DateComponent) => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { format = 'dateTime' } = p.schema;\n  const dateFormat = getFormat(format);\n  let defaultObj = {};\n  if (p.value) {\n    defaultObj.value = moment(p.value, dateFormat);\n  } else {\n    defaultObj.value = '';\n  }\n\n  const placeholderObj = p.description ? { placeholder: p.description } : {};\n\n  const dateParams = {\n    ...placeholderObj,\n    ...p.options,\n    ...defaultObj,\n    style: { width: '100%', ...style },\n    disabled: p.disabled || p.readonly,\n    onChange,\n  };\n\n  if (format === 'dateTime') {\n    dateParams.showTime = true;\n  }\n\n  return <DateComponent {...dateParams} />;\n};\n","import React from 'react';\nimport { Button } from 'antd';\nimport { PlusCircleOutlined, DeleteOutlined } from '@ant-design/icons';\n\nexport default function listEditor(props) {\n  return (\n    <div className='flex flex-column'>\n      <div className='fr-set w-100 flex flex-column ba pt4 pb2 ph2 relative b--black-10'>\n        <span className='fr-move-icon f4'>:::</span>\n        {props.children}\n        <Button\n          size='small'\n          className='self-end'\n          type='dashed'\n          icon={<DeleteOutlined />}\n        >\n          删除\n        </Button>\n      </div>\n      <Button size='small' className='self-end' icon={<PlusCircleOutlined />}>\n        添加\n      </Button>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function map({ children }) {\n  return <div className=\"w-100\">{children}</div>;\n}\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 单选组件\n */\n\nimport { Radio } from 'antd';\nimport radioHoc from '../../components/radioHoc';\n\nexport default function radio(p) {\n  const onChange = (e) => p.onChange(e.target.value);\n  return radioHoc(p, onChange, Radio);\n}\n","/**\n * Created by Tw93 on 2019-12-07.\n * 单选输入组件\n */\n\nimport React from 'react';\n\nexport default (p, onChange, RadioComponent) => {\n  const RadioGroup = RadioComponent.Group;\n  const { enum: enums, enumNames } = p.schema || {};\n  return (\n    <RadioGroup\n      disabled={p.disabled || p.readonly}\n      value={p.value}\n      onChange={onChange}\n    >\n      {(enums || [true, false]).map((val, index) => (\n        <RadioComponent value={val} key={index}>\n          <span\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{\n              __html: enumNames ? enumNames[index] : val,\n            }}\n          />\n        </RadioComponent>\n      ))}\n    </RadioGroup>\n  );\n};\n","import React from 'react';\nimport { Switch } from 'antd';\n\nexport default function sw(p) {\n  return (\n    <Switch\n      disabled={p.disabled || p.readonly}\n      onChange={checked => p.onChange(p.name, checked)}\n      defaultChecked={p.value}\n    />\n  );\n}\n","import React from 'react';\nimport { UploadOutlined } from '@ant-design/icons';\nimport { Upload, message, Button } from 'antd';\n\nexport default function input(p) {\n  const props = {\n    name: 'file',\n    action: p.action,\n    enctype: 'multipart/form-data',\n    withCredentials: true,\n    type: 'file',\n    onChange(info) {\n      if (info.file.status === 'done') {\n        message.success(`${info.file.name} 上传成功`);\n        p.onChange(info.file.response.url);\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} 上传失败`);\n      }\n    },\n    onRemove() {\n      p.onChange('');\n    },\n  };\n\n  return (\n    <div className=\"fr-upload-mod\">\n      <Upload {...props} className=\"fr-upload-file\">\n        <Button>\n          <UploadOutlined /> 上传\n        </Button>\n      </Upload>\n      {p.value && (\n        <a\n          href={p.value}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"fr-upload-preview\"\n        >\n          已上传地址\n        </a>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { Input } from 'antd';\nimport { getKeyFromUniqueId, changeKeyFromUniqueId } from '../../utils';\n\nexport default function IdInput({\n  onChange,\n  value,\n  disabled,\n  readonly,\n  options,\n}) {\n  const handleChange = e => {\n    try {\n      const newId = changeKeyFromUniqueId(value, e.target.value);\n      onChange(newId);\n    } catch (error) {}\n  };\n\n  return (\n    <Input\n      disabled={disabled || readonly}\n      {...options}\n      onChange={handleChange}\n      value={getKeyFromUniqueId(value)}\n    />\n  );\n}\n","import React from 'react';\nimport { InputNumber, Slider } from 'antd';\n\nconst PercentSlider = p => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { max, min, step } = p.schema;\n  let setting = {};\n  if (max || max === 0) {\n    setting = { max };\n  }\n\n  if (min || min === 0) {\n    setting = { ...setting, min };\n  }\n\n  if (step) {\n    setting = { ...setting, step };\n  }\n\n  let hideNumber = false;\n  if (p.options && p.options.hideNumber) {\n    hideNumber = true;\n  }\n\n  const isPercent = string =>\n    typeof string === 'string' && string.endsWith('%');\n\n  let numberValue = 100;\n  if (isPercent(p.value)) {\n    try {\n      numberValue = Number(p.value.split('%')[0]);\n      if (Number.isNaN(numberValue)) numberValue = 100;\n    } catch (error) {}\n  }\n\n  const handleChange = newNumber => {\n    const a = newNumber + '%';\n    p.onChange(a);\n  };\n\n  const renderNumber = p.readonly ? (\n    <span style={{ width: '80px' }}>\n      {p.value === (undefined || '') ? '-' : p.value + '%'}\n    </span>\n  ) : (\n    <InputNumber\n      {...p.options}\n      {...setting}\n      style={{ width: '80px', ...style }}\n      value={numberValue}\n      disabled={p.disabled}\n      onChange={handleChange}\n      formatter={value => `${value}%`}\n      parser={value => value.replace('%', '')}\n    />\n  );\n\n  return (\n    <div className='fr-slider'>\n      <Slider\n        style={{ flexGrow: 1, marginRight: hideNumber ? 0 : 12 }}\n        {...setting}\n        onChange={handleChange}\n        max={100}\n        tipFormatter={v => v + '%'}\n        value={numberValue || 100}\n        disabled={p.disabled || p.readonly}\n      />\n      {hideNumber ? null : renderNumber}\n    </div>\n  );\n};\n\nexport default PercentSlider;\n","export const mapping = {\n  default: 'input',\n  string: 'input',\n  array: 'list',\n  boolean: 'checkbox',\n  integer: 'number',\n  number: 'number',\n  object: 'map',\n  'string:upload': 'upload',\n  'string:date': 'date',\n  'string:dateTime': 'date',\n  'string:time': 'date',\n  'string:textarea': 'textarea',\n  'string:color': 'color',\n  'string:image': 'input',\n  'range:date': 'dateRange',\n  'range:dateTime': 'dateRange',\n  '*?enum': 'select',\n  'array?enum': 'checkboxes',\n  '*?readonly': 'text',\n};\n\nexport function getWidgetName(schema, _mapping = mapping) {\n  const { type, format, enum: enums, readonly } = schema;\n\n  // 如果已经注明了渲染widget，那最好\n  if (schema['ui:widget']) {\n    return schema['ui:widget'];\n  }\n\n  const list = [];\n  if (readonly) {\n    list.push(`${type}?readonly`);\n    list.push('*?readonly');\n  }\n  if (enums) {\n    list.push(`${type}?enum`);\n    // array 默认使用list，array?enum 默认使用checkboxes，*?enum 默认使用select\n    list.push('*?enum');\n  }\n  if (format) {\n    list.push(`${type}:${format}`);\n  }\n  list.push(type); // 放在最后兜底，其他都不match时使用type默认的组件\n  let found = '';\n  list.some(item => {\n    found = _mapping[item];\n    return !!found;\n  });\n  return found;\n}\n","import React from 'react';\nimport FRWrapper from '../FRWrapper';\nimport { useGlobalProps, useStore } from '../hooks';\nimport { widgets } from '../widgets/antd';\nimport IdInput from '../widgets/antd/idInput';\nimport PercentSlider from '../widgets/antd/percentSlider';\nimport ALL from '../Left/elementList';\nimport { getWidgetName } from '../mapping';\nimport { getKeyFromUniqueId } from '../utils';\n\nconst elements = [...ALL[0], ...ALL[1], ...ALL[2]]; // 前三项是所有的组件\n\nexport default function ItemSettings() {\n  const { flatten, onItemChange } = useStore();\n  const { selected } = useGlobalProps();\n\n  let settingSchema = {};\n  let settingData = {};\n\n  const onDataChange = newSchema => {\n    if (selected) {\n      try {\n        const item = flatten[selected];\n        if (item && item.schema) {\n          onItemChange(selected, { ...item, schema: newSchema });\n        }\n      } catch (error) {\n        console.log(error, 'catch');\n      }\n    }\n  };\n\n  // setting该显示什么的计算，要把选中组件的schema和它对应的widgets的整体schema进行拼接\n  let itemSelected;\n  let widgetName;\n  try {\n    itemSelected = flatten[selected];\n    if (itemSelected) {\n      widgetName = getWidgetName(itemSelected.schema);\n    }\n    if (widgetName) {\n      // const name = getKeyFromUniqueId(selected);\n      const element = elements.find(e => e.widget === widgetName);\n      const schemaNow = element.setting;\n      settingSchema = {\n        propsSchema: {\n          type: 'object',\n          properties: {\n            ...schemaNow,\n          },\n        },\n      };\n      settingData = itemSelected.schema;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  const _widgets = {\n    ...widgets,\n    idInput: IdInput,\n    percentSlider: PercentSlider,\n  };\n\n  return (\n    <div style={{ paddingRight: 24, height: 700, overflow: 'auto' }}>\n      <FRWrapper\n        schema={settingSchema}\n        formData={settingData}\n        onChange={onDataChange}\n        displayType='row'\n        showDescIcon\n        widgets={_widgets}\n        preview={true}\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport FRWrapper from '../FRWrapper';\nimport SCHEMA from './GlobalSettingSchema.json';\n// import { widgets } from '../widgets/antd';\nimport { useGlobalProps } from '../hooks';\n\nexport default function ItemSettings() {\n  const globalProps = useGlobalProps();\n\n  const {\n    hovering,\n    mapping,\n    preview,\n    selected,\n    setState,\n    widgets,\n    ...rest\n  } = globalProps;\n\n  const onDataChange = data => {\n    setState(state => ({ ...state, ...data }));\n  };\n\n  return (\n    <div style={{ paddingRight: 24, height: 700, overflow: 'auto' }}>\n      <FRWrapper\n        schema={SCHEMA}\n        formData={rest}\n        onChange={onDataChange}\n        displayType='row'\n        showDescIcon\n        widgets={widgets}\n        preview={true}\n      />\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useGlobalProps, useSet } from '../hooks';\nimport { RightOutlined } from '@ant-design/icons';\nimport './index.css';\nimport ItemSettings from './ItemSettings';\nimport GlobalSettings from './GlobalSettings';\nimport { Tabs } from 'antd';\n\nconst { TabPane } = Tabs;\n\nexport default function Right() {\n  const [state, setState] = useSet({\n    showRight: true,\n    showItemSettings: false,\n  });\n  const { selected } = useGlobalProps();\n  const { showRight, showItemSettings } = state;\n\n  const toggleRight = () => setState({ showRight: !showRight });\n\n  const ToggleIcon = () => (\n    <div\n      className='absolute top-0 left-0 pointer'\n      style={{ height: 30, width: 30, padding: '8px 0 0 8px' }}\n      onClick={toggleRight}\n    >\n      <RightOutlined className='f5' />\n    </div>\n  );\n\n  const HideRightArrow = () => (\n    <div\n      className='absolute right-0 top-0 h2 flex-center'\n      style={{ width: 40 }}\n    >\n      <ToggleIcon />\n    </div>\n  );\n\n  // 如果没有选中任何item，或者是选中了根节点，object、list的内部，显示placeholder\n  useEffect(() => {\n    if ((selected && selected[0] === '0') || selected === '#' || !selected) {\n      setState({ showItemSettings: false });\n    } else {\n      setState({ showItemSettings: true });\n    }\n  }, [selected]);\n\n  return showRight ? (\n    <div className='right-layout relative pl2'>\n      <ToggleIcon />\n      <Tabs defaultActiveKey='1' onChange={() => {}}>\n        {showItemSettings && (\n          <TabPane tab='组件配置' key='1'>\n            <ItemSettings />\n          </TabPane>\n        )}\n        <TabPane tab='表单配置' key={showItemSettings ? '2' : '1'}>\n          <GlobalSettings />\n        </TabPane>\n      </Tabs>\n    </div>\n  ) : (\n    <HideRightArrow />\n  );\n}\n","import React from 'react';\nimport { useStore } from '../hooks';\nimport FR from './index';\n\nconst RenderChildren = ({ children = [], preview }) => {\n  const { onItemChange, flatten } = useStore();\n  return (\n    <>\n      {children.map((child, i) => {\n        const FRProps = {\n          id: child,\n          preview,\n        };\n        return <FR key={i.toString()} {...FRProps} />;\n      })}\n    </>\n  );\n};\n\nexport default RenderChildren;\n","import React from 'react';\nimport { useGlobalProps, useStore } from '../hooks';\nimport { isLooselyNumber, isCssLength, getParentProps } from '../utils';\nimport { getWidgetName } from '../mapping';\n\nconst RenderField = ({\n  $id,\n  item,\n  labelClass,\n  contentClass,\n  isComplex,\n  children,\n}) => {\n  const { onItemChange, flatten } = useStore();\n  const { schema, data } = item;\n  const {\n    displayType,\n    showDescIcon,\n    showValidate,\n    labelWidth,\n    widgets,\n    mapping,\n  } = useGlobalProps();\n  const { type, title, description, required } = schema;\n  const isRequired = required && required.length > 0;\n\n  // 真正有效的label宽度需要从现在所在item开始一直往上回溯（设计成了继承关系），找到的第一个有值的 ui:labelWidth\n  const effectiveLabelWidth =\n    getParentProps('ui:labelWidth', $id, flatten) || labelWidth;\n  const _labelWidth = isLooselyNumber(effectiveLabelWidth)\n    ? Number(effectiveLabelWidth)\n    : isCssLength(effectiveLabelWidth)\n    ? effectiveLabelWidth\n    : 110; // 默认是 110px 的长度\n\n  let labelStyle = { width: _labelWidth };\n  if (type === 'boolean') {\n    labelStyle = { flexGrow: 1 };\n  } else if (isComplex || displayType === 'column') {\n    labelStyle = { flexGrow: 1 };\n  }\n\n  const onChange = value => {\n    const newItem = { ...item };\n    newItem.data = value;\n    onItemChange($id, newItem);\n  };\n\n  let widgetName = getWidgetName(schema, mapping);\n  const customWidget = schema['ui:widget'];\n  if (customWidget && widgets[customWidget]) {\n    widgetName = customWidget;\n  }\n  const Widget = widgets[widgetName];\n  // if (widgetName === 'multiSelect') {\n  //   console.log(schema['ui:widget'], customWidget, Widget);\n  // }\n  let contentStyle = {};\n  if (widgetName === 'checkbox') {\n    contentStyle.marginLeft = effectiveLabelWidth;\n  }\n\n  // TODO: useMemo\n  const usefulWidgetProps = {\n    disabled: schema['ui:disabled'],\n    readonly: schema['ui:readonly'],\n    hidden: schema['ui:hidden'],\n    options: schema['ui:options'],\n    labelWidth: schema['ui:labelWidth'],\n    width: schema['ui:width'],\n  };\n\n  return (\n    <>\n      {schema.title ? (\n        <div className={labelClass} style={labelStyle}>\n          <label\n            className={`fr-label-title ${\n              type === 'boolean' || displayType === 'column' ? 'no-colon' : ''\n            }`} // boolean不带冒号\n            title={title}\n          >\n            {isRequired && <span className='fr-label-required'> *</span>}\n            <span\n              className={`${isComplex ? 'b' : ''} ${\n                displayType === 'column' ? 'flex-none' : ''\n              }`}\n            >\n              {title}\n            </span>\n            {description &&\n              (showDescIcon ? (\n                <span className='fr-tooltip-toggle' aria-label={description}>\n                  <i className='fr-tooltip-icon' />\n                  <div className='fr-tooltip-container'>\n                    <i className='fr-tooltip-triangle' />\n                    {description}\n                  </div>\n                </span>\n              ) : (\n                <span className='fr-desc ml2'>(&nbsp;{description}&nbsp;)</span>\n              ))}\n            {displayType !== 'row' && showValidate && (\n              <span className='fr-validate'>validation</span>\n            )}\n          </label>\n        </div>\n      ) : null}\n      <div className={contentClass} style={contentStyle}>\n        <Widget\n          value={data}\n          onChange={onChange}\n          schema={schema}\n          {...usefulWidgetProps}\n          children={children}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default RenderField;\n","import React from 'react';\nimport './Wrapper.css';\nimport { useGlobal, useGlobalProps, useStore } from '../hooks';\nimport { copyItem, getKeyFromUniqueId } from '../utils';\nimport { DeleteOutlined, CopyOutlined } from '@ant-design/icons';\n\nexport default function Wrapper({\n  $id,\n  item,\n  inside = false,\n  children,\n  style,\n}) {\n  const { flatten, onItemChange, onFlattenChange } = useStore();\n  const setGlobal = useGlobal();\n  const { selected, hovering } = useGlobalProps();\n  const { schema } = item;\n  const { type } = schema;\n\n  const handleClick = e => {\n    e.stopPropagation();\n    const _id = inside ? '0' + $id : $id;\n    setGlobal({ selected: _id });\n  };\n\n  const deleteItem = e => {\n    e.stopPropagation();\n    const newFlatten = { ...flatten };\n    let newSelect = '#';\n    // 计算删除后新被选中的元素：\n    // 1. 如果是第一个，选第二个\n    // 2. 如果不是第一，选它前一个\n    // 3. 如果同级元素没了，选parent\n    try {\n      const parent = newFlatten[$id].parent;\n      const siblings = newFlatten[parent].children;\n      const idx = siblings.indexOf($id);\n      if (idx > 0) {\n        newSelect = siblings[idx - 1];\n      } else {\n        newSelect = siblings[1] || parent;\n      }\n    } catch (error) {\n      console.log('catch', error);\n    }\n    delete newFlatten[$id];\n    onFlattenChange(newFlatten);\n    setGlobal({ selected: newSelect });\n  };\n\n  const handleItemCopy = e => {\n    e.stopPropagation();\n    const [newFlatten, newId] = copyItem(flatten, $id);\n    onFlattenChange(newFlatten);\n    setGlobal({ selected: newId });\n  };\n\n  const handleMouseEnter = () => {\n    // setGlobal({ hovering: inside ? '0' + $id : $id });\n  };\n\n  const handleMouseLeave = () => {\n    // TODO: 如何写hoverLeave\n    // let hoverItem = '';\n    // if (hovering && hovering[0] === '0') {\n    //   hoverItem = $id;\n    // } else {\n    //   hoverItem = $id.split;\n    // }\n  };\n\n  // 一些computed\n  let isSelected = selected === $id && !inside;\n  if (selected && selected[0] === '0') {\n    isSelected = selected.substring(1) === $id && inside;\n  }\n\n  const hoverId = inside ? '0' + $id : $id;\n\n  let overwriteStyle = {\n    backgroundColor: hovering === hoverId ? '#ecf5ff' : '#fff',\n  };\n  if (inside) {\n    overwriteStyle = {\n      ...overwriteStyle,\n      borderColor: '#777',\n      // marginLeft: 12,\n      padding: '8px 8px 0 8px',\n      backgroundColor: '#fafafa',\n    };\n  } else if ($id === '#') {\n    overwriteStyle = {\n      ...overwriteStyle,\n      borderColor: '#777',\n      padding: 12,\n      height: 'calc(100vh - 80px)',\n      overflow: 'auto',\n      backgroundColor: '#fafafa',\n    };\n  } else if (type === 'object') {\n    overwriteStyle = { ...overwriteStyle, paddingTop: 12 };\n  }\n  if (isSelected) {\n    overwriteStyle = {\n      ...overwriteStyle,\n      outline: '2px solid #409eff',\n      borderColor: '#fff',\n    };\n  }\n  if (style && typeof style === 'object') {\n    overwriteStyle = {\n      ...overwriteStyle,\n      ...style,\n    };\n  }\n\n  if ($id === '#' && inside) return children;\n\n  // 展示的id\n  let shownId = schema && schema.$id && getKeyFromUniqueId(schema.$id);\n  if (shownId === '#') shownId = ''; // 根元素不展示了\n\n  return (\n    <div\n      style={overwriteStyle}\n      className={`field-wrapper relative w-100`}\n      onClick={handleClick}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n    >\n      {!inside && (\n        <div className='absolute top-0 right-1 blue f7'>{shownId}</div>\n      )}\n      {children}\n      {isSelected && !inside && $id !== '#' && (\n        <div\n          style={{\n            position: 'absolute',\n            zIndex: 20,\n            bottom: -2,\n            right: -2,\n            height: 24,\n            width: 54,\n            borderTopLeftRadius: 8,\n            background: '#409eff',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n          }}\n        >\n          <div className='pointer' onClick={deleteItem}>\n            <DeleteOutlined\n              style={{\n                height: 16,\n                width: 16,\n                margin: '0 8px 0 12px',\n                color: '#fff',\n              }}\n            />\n          </div>\n          <div className='pointer' onClick={handleItemCopy}>\n            <CopyOutlined\n              style={{ height: 16, width: 16, marginRight: 12, color: '#fff' }}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { useGlobalProps, useStore } from '../hooks';\nimport RenderChildren from './RenderChildren';\nimport RenderField from './RenderField';\nimport Wrapper from './Wrapper';\n\nconst FR = ({ id = '#', preview = false }) => {\n  const { onItemChange, onFlattenChange, flatten } = useStore();\n  const { displayType, column } = useGlobalProps();\n  const item = flatten[id];\n  if (!item) return null;\n\n  const { schema } = item;\n  const isObj = schema.type === 'object';\n  const isList = schema.type === 'array' && schema.enum === undefined;\n  const isComplex = isObj || isList;\n  const width = schema['ui:width'];\n  let containerClass = `fr-field w-100 ${isComplex ? 'fr-field-complex' : ''}`;\n  let labelClass = 'fr-label mb2';\n  let contentClass = 'fr-content';\n\n  let columnStyle = {};\n  if (!isComplex && width) {\n    columnStyle = {\n      width,\n      paddingRight: '12px',\n    };\n  } else if (!isComplex && column > 1) {\n    columnStyle = {\n      width: `calc(100% /${column})`,\n      paddingRight: '12px',\n    };\n  }\n\n  switch (schema.type) {\n    case 'object':\n      if (schema.title) {\n        containerClass += ' ba b--black-20 pt4 pr3 pb2 relative mt3 mb4'; // object的margin bottom由内部元素撑起\n        labelClass += ' fr-label-object bg-white absolute ph2 top-upper left-1'; // fr-label-object 无默认style，只是占位用于使用者样式覆盖\n      }\n      containerClass += ' fr-field-object'; // object的margin bottom由内部元素撑起\n      if (schema.title) {\n        contentClass += ' ml3'; // 缩进\n      }\n      break;\n    case 'array':\n      if (schema.title && !schema.enum) {\n        labelClass += ' mt2 mb3';\n      }\n      break;\n    case 'boolean':\n      if (schema.title) {\n        labelClass += ' ml2';\n        labelClass = labelClass.replace('mb2', 'mb0');\n      }\n      contentClass += ' flex items-center'; // checkbox高度短，需要居中对齐\n      containerClass += ' flex items-center flex-row-reverse justify-end';\n      break;\n    default:\n      if (displayType === 'row') {\n        labelClass = labelClass.replace('mb2', 'mb0');\n      }\n  }\n  // 横排时\n  if (displayType === 'row' && !isComplex && schema.type !== 'boolean') {\n    containerClass += ' flex items-center';\n    labelClass += ' flex-shrink-0 fr-label-row';\n    labelClass = labelClass.replace('mb2', 'mb0');\n    contentClass += ' flex-grow-1 relative';\n  }\n\n  // 横排的checkbox\n  if (displayType === 'row' && schema.type === 'boolean') {\n    contentClass += ' flex justify-end pr2';\n  }\n\n  const fieldProps = {\n    $id: id,\n    item,\n    labelClass,\n    contentClass,\n    isComplex,\n  };\n  const childrenProps = {\n    children: item.children,\n    preview,\n  };\n\n  const childrenElement =\n    item.children && item.children.length > 0 ? (\n      <ul className={`flex flex-wrap pl0`}>\n        <RenderChildren {...childrenProps} />\n      </ul>\n    ) : null;\n\n  // TODO: list 也要算进去\n  if (preview) {\n    return (\n      <div style={columnStyle} className={containerClass}>\n        <RenderField {...fieldProps}>\n          {(isObj || isList) && childrenElement}\n        </RenderField>\n      </div>\n    );\n  }\n\n  return (\n    <Wrapper style={columnStyle} $id={id} item={item}>\n      <div className={containerClass}>\n        <RenderField {...fieldProps}>\n          {(isObj || isList) && (\n            <Wrapper $id={id} item={item} inside>\n              {childrenElement || <div className='h2' />}\n            </Wrapper>\n          )}\n        </RenderField>\n      </div>\n    </Wrapper>\n  );\n};\n\nexport default FR;\n","import React from 'react';\nimport { useSet } from './hooks';\nimport copyTOClipboard from 'copy-text-to-clipboard';\nimport Left from './Left';\nimport Right from './Right';\nimport {\n  flattenSchema,\n  idToSchema,\n  combineSchema,\n  dataToFlatten,\n  flattenToData,\n} from './utils';\nimport { Ctx, PropsCtx, InnerCtx } from './context';\n// import SCHEMA from './json/basic.json';\nimport FR from './FR';\nimport { Modal, Input, message } from 'antd';\nimport { Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport 'tachyons';\nimport './App.css';\n\nconst { TextArea } = Input;\n\nconst Wrapper = ({\n  simple = true,\n  schema,\n  formData,\n  onChange,\n  onSchemaChange,\n  ...globalProps\n}) => {\n  const [local, setLocal] = useSet({\n    showModal: false,\n    showModal2: false,\n    showModal3: false,\n    schemaForImport: '',\n  });\n  const {\n    preview,\n    setState,\n    mapping,\n    widgets,\n    selected,\n    hovering,\n    ...rest\n  } = globalProps;\n  const _schema = combineSchema(schema.propsSchema, schema.uiSchema);\n  const flatten = flattenSchema(_schema);\n  const flattenWithData = dataToFlatten(flatten, formData);\n\n  const onFlattenChange = newFlatten => {\n    const newSchema = idToSchema(newFlatten);\n    const newData = flattenToData(newFlatten);\n    // 判断只有schema变化时才调用，一般需求的用户不需要\n    if (onSchemaChange) {\n      onSchemaChange(newSchema);\n    }\n    onChange(newData);\n  };\n\n  const onItemChange = (key, value) => {\n    flattenWithData[key] = value;\n    onFlattenChange(flattenWithData);\n  };\n\n  const toggleModal = () => setLocal({ showModal: !local.showModal });\n  const toggleModal2 = () => setLocal({ showModal2: !local.showModal2 });\n  const toggleModal3 = () => setLocal({ showModal3: !local.showModal3 });\n\n  const clearSchema = () => {\n    setState({\n      schema: {\n        propsSchema: {\n          type: 'object',\n          properties: {},\n        },\n      },\n      formData: {},\n      selected: undefined,\n    });\n  };\n\n  const onTextareaChange = e => {\n    setLocal({ schemaForImport: e.target.value });\n  };\n\n  const importSchema = () => {\n    try {\n      const info = JSON.parse(local.schemaForImport);\n      const { propsSchema, ...rest } = info;\n      setState({\n        schema: {\n          propsSchema,\n        },\n        formData: {},\n        selected: undefined,\n        ...rest,\n      });\n    } catch (error) {\n      message.info('格式不对哦，请重新尝试'); // 可以加个格式哪里不对的提示\n    }\n    toggleModal2();\n  };\n\n  let displaySchemaString = '';\n\n  try {\n    const propsSchema = idToSchema(flattenWithData, '#', true);\n    displaySchemaString = JSON.stringify({ propsSchema, ...rest }, null, 2);\n  } catch (error) {}\n\n  const copySchema = () => {\n    copyTOClipboard(displaySchemaString);\n    message.info('复制成功');\n  };\n\n  // TODO: flatten是频繁在变的，应该和其他两个函数分开\n  const store = {\n    flatten: flattenWithData,\n    onFlattenChange,\n    onItemChange,\n    ...globalProps,\n  };\n\n  if (simple) {\n    return (\n      <Ctx.Provider value={setState}>\n        <PropsCtx.Provider value={globalProps}>\n          <InnerCtx.Provider value={store}>\n            <FR preview={true} />\n          </InnerCtx.Provider>\n        </PropsCtx.Provider>\n      </Ctx.Provider>\n    );\n  }\n\n  return (\n    <Ctx.Provider value={setState}>\n      <PropsCtx.Provider value={globalProps}>\n        <InnerCtx.Provider value={store}>\n          <div className='flex vh-100 overflow-hidden'>\n            <Left />\n            <div className='mid-layout pr2'>\n              <div className='mv3 mh1'>\n                <Button\n                  className='mr2'\n                  onClick={() => {\n                    setState({ preview: !preview, selected: '#' });\n                  }}\n                >\n                  {preview ? '开始编辑' : '最终展示'}\n                </Button>\n                <Button className='mr2' onClick={clearSchema}>\n                  清空\n                </Button>\n                <Button className='mr2' onClick={toggleModal3}>\n                  保存\n                </Button>\n                <Button className='mr2' onClick={toggleModal2}>\n                  导入\n                </Button>\n                <Button type='primary' className='mr2' onClick={toggleModal}>\n                  导出schema\n                </Button>\n              </div>\n              <FR preview={preview} />\n            </div>\n            <Right globalProps={rest} />\n            <Modal\n              visible={local.showModal}\n              onOk={copySchema}\n              onCancel={toggleModal}\n              okText='复制'\n              cancelText='取消'\n            >\n              <div className='mt3'>\n                <TextArea\n                  style={{ fontSize: 12 }}\n                  value={displaySchemaString}\n                  autoSize={{ minRows: 10, maxRows: 30 }}\n                />\n              </div>\n            </Modal>\n            <Modal\n              visible={local.showModal2}\n              okText='导入'\n              cancelText='取消'\n              onOk={importSchema}\n              onCancel={toggleModal2}\n            >\n              <div className='mt3'>\n                <TextArea\n                  style={{ fontSize: 12 }}\n                  value={local.schemaForImport}\n                  placeholder='贴入需要导入的schema，模样可点击导出schema参考'\n                  onChange={onTextareaChange}\n                  autoSize={{ minRows: 10, maxRows: 30 }}\n                />\n              </div>\n            </Modal>\n            <Modal\n              visible={local.showModal3}\n              okText='确定'\n              cancelText='取消'\n              onOk={toggleModal3}\n              onCancel={toggleModal3}\n            >\n              <div className='mt3'>开发中，请期待</div>\n            </Modal>\n          </div>\n        </InnerCtx.Provider>\n      </PropsCtx.Provider>\n    </Ctx.Provider>\n  );\n};\n\nWrapper.defaultProps = {\n  labelWidth: 120,\n};\n\nexport default Wrapper;\n","import React from 'react';\nimport { useSet } from './hooks';\n// import SCHEMA from './json/basic.json';\nimport FRWrapper from './FRWrapper';\nimport { widgets } from './widgets/antd';\nimport { mapping } from './mapping';\nimport 'antd/dist/antd.css';\nimport 'tachyons';\nimport './App.css';\n\nconst SCHEMA = {\n  propsSchema: {\n    type: 'object',\n    properties: {\n      listName: {\n        title: '对象数组',\n        type: 'array',\n        items: {\n          type: 'object',\n          properties: {\n            inputName: {\n              title: '简单输入框',\n              type: 'string',\n            },\n          },\n        },\n      },\n    },\n  },\n  uiSchema: {},\n  formData: {},\n};\n\nfunction App() {\n  const initGlobal = {\n    displayType: 'row',\n  };\n\n  const [state, setState] = useSet({\n    formData: SCHEMA.formData,\n    schema: SCHEMA,\n    selected: undefined,\n    hovering: undefined,\n    preview: false,\n    ...initGlobal,\n  });\n\n  const { schema, formData, preview, selected, hovering, ...rest } = state;\n\n  const { displayType } = rest;\n  const showDescIcon = displayType === 'row' ? true : false;\n\n  const onChange = data => {\n    setState({ formData: data });\n  };\n\n  const onSchemaChange = newSchema => {\n    const result = { ...schema, propsSchema: newSchema };\n    setState({ schema: result });\n  };\n\n  const _mapping = { ...mapping, array: 'listEditor' };\n\n  const globalProps = {\n    preview,\n    setState,\n    simple: false,\n    mapping: _mapping,\n    widgets,\n    selected,\n    hovering,\n    ...rest,\n    showDescIcon,\n  };\n\n  const FRProps = {\n    schema,\n    formData,\n    onChange,\n    onSchemaChange,\n    ...globalProps,\n  };\n\n  return <FRWrapper {...FRProps} />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}