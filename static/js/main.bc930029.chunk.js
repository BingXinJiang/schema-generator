(this["webpackJsonpschema-generator"]=this["webpackJsonpschema-generator"]||[]).push([[0],{167:function(e,t,a){},196:function(e){e.exports=JSON.parse('{"propsSchema":{"type":"object","properties":{"column":{"title":"\u6574\u4f53\u5e03\u5c40","type":"string","enum":[1,2,3],"enumNames":["\u4e00\u884c\u4e00\u5217","\u4e00\u884c\u4e8c\u5217","\u4e00\u884c\u4e09\u5217"],"ui:options":{"placeholder":"\u9ed8\u8ba4\u4e00\u884c\u4e00\u5217"}},"labelWidth":{"title":"\u6807\u7b7e\u5bbd\u5ea6","type":"number","ui:widget":"slider","max":300,"ui:options":{"hideNumber":true}},"displayType":{"title":"\u6807\u7b7e\u5c55\u793a\u6a21\u5f0f","type":"string","enum":["row","column"],"enumNames":["\u540c\u884c","\u5355\u72ec\u4e00\u884c"],"ui:widget":"radio"}},"required":[]},"formData":{}}')},210:function(e,t,a){e.exports=a(362)},215:function(e,t,a){},221:function(e,t,a){},352:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),l=a.n(i),o=a(367),c=a(204),s=a(30),m=a(5),u=a(18),d=Object(n.createContext)((function(){})),p=Object(n.createContext)({}),f=Object(n.createContext)({}),h=function(){return Object(n.useContext)(d)},g=function(){return Object(n.useContext)(p)},v=function(){return Object(n.useContext)(f)},b=function(e){var t=Object(n.useReducer)((function(e,t){var a=t;return"function"===typeof t&&(a=a(e)),t.action&&t.payload&&"function"===typeof(a=t.payload)&&(a=a(e)),Object(m.a)({},e,{},a)}),e),a=Object(u.a)(t,2),r=a[0],i=a[1];return[r,function(e,t){i(e)}]};var y=a(28),w=a(175),E=a.n(w),j={$id:{title:"ID",description:"\u6570\u636e\u5b58\u50a8\u7684\u540d\u79f0\uff0c\u8bf7\u5199\u82f1\u6587\uff0c\u4e0d\u80fd\u4e3a\u7a7a",type:"string","ui:widget":"idInput"},title:{title:"\u6807\u9898",type:"string"},description:{title:"\u8bf4\u660e",type:"string"},"ui:width":{title:"\u5143\u7d20\u5bbd\u5ea6",type:"string","ui:widget":"percentSlider"},"ui:labelWidth":{title:"\u6807\u7b7e\u5bbd\u5ea6",description:"\u9ed8\u8ba4\u503c120",type:"number","ui:widget":"slider",max:400,"ui:options":{hideNumber:!0}},default:{title:"\u9ed8\u8ba4\u503c",type:"string"},"ui:readonly":{title:"\u7f6e\u7070",type:"boolean"}},O=[[{text:"\u8f93\u5165\u6846",name:"input",widget:"input",schema:{title:"\u8f93\u5165\u6846",type:"string"},setting:{"ui:options":{title:"\u9009\u9879",type:"object","ui:labelWidth":80,properties:{allowClear:{title:"\u662f\u5426\u5e26\u6e05\u9664\u6309\u94ae",description:"\u586b\u5199\u5185\u5bb9\u540e\u624d\u4f1a\u51fa\u73b0x\u54e6",type:"boolean"},addonBefore:{title:"\u524dtab",type:"string"},addonAfter:{title:"\u540etab",type:"string"},prefix:{title:"\u524d\u7f00",type:"string"},suffix:{title:"\u540e\u7f00",type:"string"}}},minLength:{title:"\u6700\u77ed\u5b57\u6570",type:"number"},maxLength:{title:"\u6700\u957f\u5b57\u6570",type:"number"},pattern:{title:"\u6821\u9a8c\u6b63\u5219\u8868\u8fbe\u5f0f",type:"string","ui:options":{placeholder:"\u586b\u5199\u6b63\u5219\u8868\u8fbe\u5f0f"}}}},{text:"\u5927\u8f93\u5165\u6846",name:"textarea",widget:"textarea",schema:{title:"\u7f16\u8f91\u6846",type:"string",format:"textarea"},setting:{"ui:options":{title:"\u9009\u9879",type:"object","ui:labelWidth":80,properties:{autoSize:{title:"\u9ad8\u5ea6\u81ea\u52a8",type:"boolean"},row:{title:"\u6307\u5b9a\u9ad8\u5ea6",type:"number"}}},minLength:{title:"\u6700\u77ed\u5b57\u6570",type:"number"},maxLength:{title:"\u6700\u957f\u5b57\u6570",type:"number"},pattern:{title:"\u6821\u9a8c\u6b63\u5219\u8868\u8fbe\u5f0f",type:"string","ui:options":{placeholder:"\u586b\u5199\u6b63\u5219\u8868\u8fbe\u5f0f"}}}},{text:"\u65e5\u671f\u9009\u62e9",name:"date",widget:"date",schema:{title:"\u65e5\u671f\u9009\u62e9",type:"string",format:"date"},setting:{format:{title:"\u683c\u5f0f",type:"string",enum:["dateTime","date","time"],enumNames:["\u65e5\u671f\u65f6\u95f4","\u65e5\u671f","\u65f6\u95f4"]}}},{text:"\u6570\u5b57\u8f93\u5165\u6846",name:"number",widget:"number",schema:{title:"\u6570\u5b57\u8f93\u5165\u6846",type:"number"},setting:{}},{text:"\u662f\u5426\u9009\u62e9",name:"checkbox",widget:"checkbox",schema:{title:"\u662f\u5426\u9009\u62e9",type:"boolean"},setting:{default:{title:"\u9ed8\u8ba4\u662f\u5426",type:"boolean"}}},{text:"\u662f\u5426switch",name:"checkbox",widget:"switch",schema:{title:"\u662f\u5426\u9009\u62e9",type:"boolean","ui:widget":"switch"},setting:{default:{title:"\u9ed8\u8ba4\u662f\u5426",type:"boolean"}}},{text:"\u4e0b\u62c9\u5355\u9009",name:"select",widget:"select",schema:{title:"\u5355\u9009",type:"string",enum:["a","b","c"],enumNames:["\u65e9","\u4e2d","\u665a"]},setting:{enum:{title:"\u9009\u9879\u5b57\u6bb5",type:"array",enum:[],"ui:widget":"select","ui:options":{mode:"tags"}},enumNames:{title:"\u9009\u9879\u540d\u79f0",type:"array",enum:[],"ui:widget":"select","ui:options":{mode:"tags"}}}},{text:"\u70b9\u51fb\u5355\u9009",name:"radio",widget:"radio",schema:{title:"\u5355\u9009",type:"string",enum:["a","b","c"],enumNames:["\u65e9","\u4e2d","\u665a"],"ui:widget":"radio"},setting:{enum:{title:"\u9009\u9879\u5b57\u6bb5",type:"array",enum:[],"ui:widget":"select","ui:options":{mode:"tags"}},enumNames:{title:"\u9009\u9879\u540d\u79f0",type:"array",enum:[],"ui:widget":"select","ui:options":{mode:"tags"}}}},{text:"\u4e0b\u62c9\u591a\u9009",name:"multiSelect",widget:"multiSelect",schema:{title:"\u591a\u9009",description:"\u4e0b\u62c9\u591a\u9009",type:"array",items:{type:"string"},enum:["A","B","C","D"],enumNames:["\u676d\u5dde","\u6b66\u6c49","\u6e56\u5dde","\u8d35\u9633"],"ui:widget":"multiSelect"},setting:{enum:{title:"\u9009\u9879\u5b57\u6bb5",type:"array",enum:[],"ui:widget":"select","ui:options":{mode:"tags"}},enumNames:{title:"\u9009\u9879\u540d\u79f0",type:"array",enum:[],"ui:widget":"select","ui:options":{mode:"tags"}}}},{text:"\u70b9\u51fb\u591a\u9009",name:"checkboxes",widget:"checkboxes",schema:{title:"\u591a\u9009",description:"\u70b9\u51fb\u591a\u9009",type:"array",items:{type:"string"},enum:["A","B","C","D"],enumNames:["\u676d\u5dde","\u6b66\u6c49","\u6e56\u5dde","\u8d35\u9633"]},setting:{enum:{title:"\u9009\u9879\u5b57\u6bb5",type:"array",enum:[],"ui:widget":"select","ui:options":{mode:"tags"}},enumNames:{title:"\u9009\u9879\u540d\u79f0",type:"array",enum:[],"ui:widget":"select","ui:options":{mode:"tags"}}}}],[{text:"\u65e5\u671f\u8303\u56f4",name:"dateRange",widget:"dateRange",schema:{title:"\u65e5\u671f\u8303\u56f4",type:"range",format:"dateTime","ui:options":{placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]}},setting:{format:{title:"\u7c7b\u578b",type:"string",enum:["dateTime","date"],enumNames:["\u65e5\u671f\u65f6\u95f4","\u65e5\u671f"]}}},{text:"\u6570\u5b57\uff08slider\uff09",name:"slider",widget:"slider",schema:{title:"\u5e26\u6ed1\u52a8\u6761",type:"number","ui:widget":"slider"},setting:{}},{text:"\u56fe\u7247\u5c55\u793a",name:"image",schema:{title:"\u56fe\u7247\u5c55\u793a",type:"string",format:"image"},setting:{}},{text:"\u989c\u8272\u9009\u62e9",name:"color",widget:"color",schema:{title:"\u989c\u8272\u9009\u62e9",type:"string",format:"color"},setting:{}}],[{text:"object",name:"object",schema:{title:"\u5bf9\u8c61",type:"object",properties:{}},widget:"map",setting:{}},{text:"\u5217\u8868",name:"list",widget:"list",schema:{title:"\u6570\u7ec4",type:"array",items:{type:"object",properties:{}}},setting:{minItems:{title:"\u6700\u5c0f\u957f\u5ea6",type:"number"},maxItems:{title:"\u6700\u5927\u957f\u5ea6",type:"number"},"ui:options":{title:"\u9009\u9879",type:"object",properties:{foldable:{title:"\u662f\u5426\u53ef\u6298\u53e0",type:"boolean"}}}}}],[{text:"\u590d\u6742\u7ed3\u6784\u6837\u4f8b",name:"something",schema:{title:"\u5bf9\u8c61",description:"\u8fd9\u662f\u4e00\u4e2a\u5bf9\u8c61\u7c7b\u578b",type:"object",properties:{inputName:{title:"\u7b80\u5355\u8f93\u5165\u6846",type:"string"},selectName:{title:"\u5355\u9009",type:"string",enum:["a","b","c"],enumNames:["\u65e9","\u4e2d","\u665a"]},dateName:{title:"\u65f6\u95f4\u9009\u62e9",type:"string",format:"date"},listName:{title:"\u5bf9\u8c61\u6570\u7ec4",description:"\u5bf9\u8c61\u6570\u7ec4\u5d4c\u5957\u529f\u80fd",type:"array",items:{type:"object",properties:{rangeName:{title:"\u65e5\u671f/\u65f6\u95f4\u8303\u56f4",type:"range",format:"date","ui:options":{placeholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"]}}}}}}}}]],x=O=O.map((function(e){return e.map((function(e){return Object(m.a)({},e,{setting:Object(m.a)({},j,{},e.setting)})}))})),C=(a(215),a(60)),N=a.n(C),k=a(118),S=a.n(k);function I(e){var t;switch(e){case"date":t="YYYY-MM-DD";break;case"time":t="HH:mm:ss";break;default:t="YYYY-MM-DD HH:mm:ss"}return t}function D(e){return 0===Object.keys(e).length}function T(e){if(!e)return[];var t=e.properties,a=e.items,n=e.type;if(!t&&!a)return[];var r={};return"object"===n&&(r=t),"array"===n&&(r=a),Object.keys(r).map((function(e){return{schema:r[e],name:e}}))}function L(e){return"function"===typeof e||("string"===typeof e&&"@"===e.substring(0,1)?e.substring(1):"string"===typeof e&&"{{"===e.substring(0,2)&&"}}"===e.substring(e.length-2,e.length)&&e.substring(2,e.length-2))}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=S()(e);r.$id||(r.$id=t);var i=[],l="object"===r.type&&r.properties,o="array"===r.type&&r.items&&r.items.properties;return l&&(Object.entries(r.properties).forEach((function(e){var a=Object(u.a)(e,2),r=a[0],l=a[1],o=t+"/"+r;i.push(o),R(l,o,t,n)})),delete r.properties),o&&(Object.entries(r.items.properties).forEach((function(e){var a=Object(u.a)(e,2),r=a[0],l=a[1],o=t+"/"+r;i.push(o),R(l,o,t,n)})),delete r.items.properties),r.type&&(n[t]={parent:a,schema:r,children:i}),n}var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#",t=e.split("/");return t[t.length-1]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"something",a=e.split("/");return"string"!==typeof t&&"number"!==typeof t||(a[a.length-1]=t),a.join("/")};function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={},r=e[t],i=S()(r);return i&&(n=Object(m.a)({},i.schema),a&&n.$id&&delete n.$id,i.children.length>0&&i.children.forEach((function(t){var r=t;if(e[t]){try{a&&(r=e[t].schema.$id)}catch(l){console.log("catch",l)}var i=A(r);"object"===n.type&&(n.properties||(n.properties={}),n.properties[i]=M(e,t,a)),"array"===n.type&&n.items&&"object"===n.items.type&&(n.items.properties||(n.items.properties={}),n.items.properties[i]=M(e,t,a))}}))),n}var $=function(e,t){if(e&&t)return Object.entries(e).forEach((function(a){var n=Object(u.a)(a,2),r=n[0],i=(n[1],function(e,t){if("#"===t)return e;try{var a=t.split("/").filter((function(e){return"#"!==e})).map((function(e){return'["'.concat(e,'"]')})).join(""),n="data".concat(a),r='"use strict";\n    const data = '.concat(JSON.stringify(e),";\n    return ").concat(n);return Function(r)()}catch(i){return}}(t,r));e[r].data=i})),e},P=function(){var e=localStorage.getItem("SAVES");if(!e)return 1;try{var t=JSON.parse(e).length;if(t)return t+1}catch(a){return 1}},_=a(377),J=function(e){var t=e.text,a=e.name,n=e.schema,i=Object(_.a)({item:{type:"box",dragItem:{parent:"#",schema:n,children:[]},$id:"#/".concat(a,"_").concat(N()(6))},end:function(e,t){t.getDropResult()},collect:function(e){return{isDragging:e.isDragging()}}}),l=Object(u.a)(i,2),o=(l[0].isDragging,l[1]),c=h(),s=g().selected,d=v(),p=d.flatten,f=d.onFlattenChange;return r.a.createElement("div",{ref:o,className:"left-element",onClick:function(){var e=function(e){var t,a=e.selected,n=e.name,r=e.schema,i=e.flatten,l=a||"#";if(l&&"0"===l[0]||"#"===l){var o=Object(m.a)({},i);try{var c=l.substring(1);t=c+"/"+n+"_"+N()(6),"#"===l&&(t="#/"+n+"_"+N()(6),c="#"),o[c].children.push(t);var s={parent:c,schema:Object(m.a)({},r,{$id:t}),data:void 0,children:[]};o[t]=s}catch(b){console.error(b,"catch")}return{newId:t,newFlatten:o}}var u=n+"_"+N()(6),d=a.split("/");d.pop(),d.push(u),t=d.join("/");var p=Object(m.a)({},i);try{var f=p[a],h=p[f.parent].children,g=h.findIndex((function(e){return e===a}));h.splice(g+1,0,t);var v={parent:f.parent,schema:Object(m.a)({},r,{$id:t}),data:void 0,children:[]};p[t]=v}catch(b){console.error(b)}return{newId:t,newFlatten:p}}({selected:s,name:a,schema:n,flatten:p}),t=e.newId,r=e.newFlatten;f(r),c({selected:t})}},t)},W=Object(u.a)(x,4),z=W[0],B=W[1],H=W[2],Y=W[3],V=function(e){var t=e.saveList,a=e.setSaveList,i=Object(s.a)(e,["saveList","setSaveList"]);return Object(n.useEffect)((function(){a(Y)}),[]),r.a.createElement("div",{className:"left-layout"},r.a.createElement("p",{className:"f6 b"},"\u57fa\u7840\u7ec4\u4ef6"),r.a.createElement("ul",{className:"pl0"},z.map((function(e,t){return r.a.createElement("li",{key:t.toString(),className:"left-item"},r.a.createElement(J,Object.assign({},e,i,{key:t.toString()})))}))),r.a.createElement("p",{className:"f6 b"},"\u590d\u6742\u7ec4\u4ef6"),r.a.createElement("ul",{className:"pl0"},B.map((function(e,t){return r.a.createElement("li",{key:t.toString(),className:"left-item"},r.a.createElement(J,Object.assign({},e,i,{key:t.toString()})))}))),r.a.createElement("p",{className:"f6 b"},"\u5e03\u5c40\u7ec4\u4ef6"),r.a.createElement("ul",{className:"pl0"},H.map((function(e,t){return r.a.createElement("li",{key:t.toString(),className:"left-item"},r.a.createElement(J,Object.assign({},e,i,{key:t.toString()})))}))),r.a.createElement("p",{className:"f6 b"},"\u5b58\u6863"),r.a.createElement("ul",{className:"pl0"},t.map((function(e,t){return r.a.createElement("li",{key:t.toString(),className:"left-item"},r.a.createElement(J,Object.assign({},e,i,{key:t.toString()})))}))))},G=a(169),K=(a(221),a(379));var U=a(177),X=a.n(U),q=a(372);a(274);var Z=a(365),Q=a(144),ee=a(41),te=a.n(ee);var ae=Q.a.RangePicker;var ne=a(48),re=a(49),ie=a(61),le=a(120),oe=a(66),ce=a(46),se=a(87),me=function(e){var t=e.fold,a=void 0!==t&&t,n=e.width,i=e.height,l=e.fill,o=e.style,c=void 0===o?{}:o,m=Object(s.a)(e,["fold","width","height","fill","style"]);return r.a.createElement("div",Object.assign({style:c,className:a?"fold-icon":"fold-icon fold-icon-active"},m),r.a.createElement("svg",{viewBox:"0 0 1024 1024",width:n||18,height:i||18},r.a.createElement("path",{d:"M942.048 306.176c-12.288-12.288-31.328-13.024-43.008-2.016L529.056 674.112c-15.072 15.872-19.008 15.808-34.816 0L124.288 304.16c-11.68-11.04-30.72-10.272-43.008 2.016-12.512 12.512-13.216 32.032-1.6 43.68L490.624 760.8c5.056 5.056 11.648 7.328 18.464 7.744h5.152c6.816-.448 13.408-2.72 18.464-7.744l410.944-410.944c11.584-11.648 10.88-31.2-1.6-43.68z",fill:l||"#3c3c3c"})))},ue=function(e){var t=e.schema,a=void 0===t?{}:t,n=e.value,i=void 0===n?[]:n,l=e.index,o=de({schema:a,value:i,index:l}).filter((function(e){return e.title})).slice(0,3);return r.a.createElement("ul",{className:"flex overflow-hidden",style:{paddingRight:45}},o.map((function(e,t){return e.title?r.a.createElement("li",{className:"flex-auto mr2 overflow-hidden",key:t},r.a.createElement("span",{className:"fw5"},e.title,": "),r.a.createElement("span",null,e.text)):null})))},de=function(e){var t=e.schema,a=void 0===t?{}:t,n=e.value,r=void 0===n?[]:n,i=e.index,l=a.items,o=void 0===l?{}:l;if("object"!==o.type)return[];var c=o&&o.properties||{};c=Object.values(c);var s=r&&r.length&&r[i]||{},m=Object.values(s);return c.map((function(e,t){if(!(e&&e["ui:hidden"])){var a=e.title,n=m[t];return null===n&&void 0===n?n="":"boolean"===typeof n?n=n?"\u662f":"\u5426":"string"!==typeof n&&"number"!==typeof n&&n?n="{\u590d\u6742\u7ed3\u6784}":e.enum&&e.enumNames&&(n=function e(t,a,n){if(Array.isArray(a)&&Array.isArray(n)){if("string"===typeof t||"number"===typeof t){var r=a.indexOf(t);return r>-1?n[r]:t}if(Array.isArray(t)){var i=t.map((function(r){return e(t,a,n)}));return String(i)}return t}return t}(n,e.enum,e.enumNames)),{title:a,text:n}}})).filter((function(e){return!!e}))},pe=Object(se.c)((function(){return r.a.createElement("span",{className:"fr-move-icon"},":::")})),fe=function(e){Object(ie.a)(a,e);var t=Object(le.a)(a);function a(){var e;Object(ne.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toggleFold=function(){e.props.toggleFoldItem(e.props.name)},e}return Object(re.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.p,a=void 0===t?{}:t,n=e.name,r=e.fold,i=de({schema:a.schema,value:a.value,index:n});i&&i[0]&&i[0].text&&0!==r&&this.props.toggleFoldItem(n)}},{key:"render",value:function(){var e=this.props,t=e.item,a=e.p,n=void 0===a?{}:a,i=e.name,l=e.fold,o=Object(m.a)({},n,{index:i}),c=n.options,s=void 0===c?{}:c,u=n.readonly,d=n.formData,p=n.value,f=s.foldable,h=s.hideDelete,g=s.itemButtons,v=L(h);v&&("string"===typeof v?h=function(e,t,a){return Function('"use strict";\n    const rootValue = '.concat(JSON.stringify(a),";\n    const formData = ").concat(JSON.stringify(t),";\n    return (").concat(e,")"))()}(v,d,p):"function"===typeof v&&(h=v(d,p)));var b=n.schema.items&&"object"==n.schema.items.type,w="fr-set ba b--black-10 hover-b--black-20 relative flex flex-column";return f&&l?w+=" pv12":"row"===n.displayType&&(w+=" pt44"),r.a.createElement("li",{className:w},f&&l&&b?r.a.createElement(ue,o):t,f&&r.a.createElement(me,{fold:l,onClick:this.toggleFold,style:{position:"absolute",top:12,right:32}}),!u&&r.a.createElement(pe,null),!(f&&l||h||u)&&r.a.createElement("div",{className:"self-end flex"},r.a.createElement(ye,{type:"dashed",icon:"delete",onClick:function(){var e=Object(y.a)(n.value);e.splice(i,1),n.onChange(e)}},"\u5220\u9664"),g&&g.length>0&&g.map((function(e,t){return r.a.createElement(ye,{key:t.toString(),className:"ml2",type:"dashed",icon:e.icon,onClick:function(){var t=Object(y.a)(n.value);if("function"===typeof window[e.callback]){var a=window[e.callback](t,i);n.onChange(a)}}},e.text||"")}))))}}]),a}(r.a.Component),he=Object(se.b)(fe),ge=function(e){Object(ie.a)(a,e);var t=Object(le.a)(a);function a(){var e;Object(ne.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleAddClick=function(){var t=e.props,a=t.p,n=t.addUnfoldItem,r=Object(y.a)(a.value);r.push(a.newItem),a.onChange(r),n()},e}return Object(re.a)(a,[{key:"render",value:function(){var e=this.props,t=e.p,a=e.foldList,n=void 0===a?[]:a,i=e.toggleFoldItem,l=t||{},o=l.options,c=void 0===o?{}:o,s=l.extraButtons,m=void 0===s?{}:s,u=c.buttons||m||[],d=t.readonly,p=t.schema,f=(void 0===p?{}:p).maxItems,h=t.value||[],g=!f||f>h.length;return r.a.createElement("ul",{className:"pl0 ma0"},h.map((function(e,a){return r.a.createElement(he,{key:"item-".concat(a),index:a,name:a,p:t,fold:n[a],toggleFoldItem:i,item:t.children})})),!d&&r.a.createElement("div",{className:"tr"},g&&r.a.createElement(ye,{icon:"add",onClick:this.handleAddClick},"\u65b0\u589e"),u&&u.length>0&&u.map((function(e,a){return r.a.createElement(ye,{className:"ml2",icon:e.icon,key:a.toString(),onClick:function(){if("clearAll"!==e.callback){if("copyLast"===e.callback){var a=Object(y.a)(t.value),n=a.length-1;return a.push(n>-1?a[n]:t.newItem),void t.onChange(a)}if("function"===typeof window[e.callback]){var r=Object(y.a)(t.value);window[e.callback](r,(function(e){return t.onChange(e)}),t.newItem)}}else t.onChange([])}},e.text)}))))}}]),a}(r.a.Component),ve=Object(se.a)(ge),be=function(e){Object(ie.a)(a,e);var t=Object(le.a)(a);function a(e){var n;Object(ne.a)(this,a),(n=t.call(this,e)).addUnfoldItem=function(){return n.setState({foldList:[].concat(Object(y.a)(n.state.foldList),[0])})},n.toggleFoldItem=function(e){var t=n.state.foldList,a=void 0===t?[]:t;a[e]=!a[e],n.setState({foldList:a})},n.handleSort=function(e){var t=e.oldIndex,a=e.newIndex,r=n.props,i=r.onChange,l=r.value;i(Object(se.d)(l,t,a)),n.setState({foldList:Object(se.d)(n.state.foldList,t,a)})};var r=n.props.value.length||0;return n.state={foldList:new Array(r).fill(!1)||[]},n}return Object(re.a)(a,[{key:"render",value:function(){var e=this.state.foldList;return r.a.createElement(ve,{p:this.props,foldList:e,toggleFoldItem:this.toggleFoldItem,addUnfoldItem:this.addUnfoldItem,distance:6,useDragHandle:!0,helperClass:"fr-sort-help-class",shouldCancelStart:function(e){return e.toElement&&"fr-tooltip-container"===e.toElement.className},onSortEnd:this.handleSort})}}]),a}(r.a.Component);function ye(e){var t,a=e.icon,n=e.children,i=Object(s.a)(e,["icon","children"]);switch(a){case"add":t="PlusCircleOutlined";break;case"delete":t="DeleteOutlined";break;default:t=a}var l=oe[t];return l?r.a.createElement(ce.a,Object.assign({},i,{icon:r.a.createElement(l,null)}),n):r.a.createElement(ce.a,i,n)}be.defaultProps={value:[]};var we=be,Ee=a(173),je=a(170);var Oe,xe,Ce=a(373),Ne=(Oe=Ce.a,function(e){var t=Oe.Option,a=e.invalid?{borderColor:"#f5222d"}:{},n=e.schema||{},i=n.enum,l=n.enumNames,o=e.value&&Array.isArray(e.value)?e.value:[];return r.a.createElement(Oe,Object.assign({},e.options,{style:Object(m.a)({width:"100%"},a),mode:"multiple",disabled:e.disabled||e.readonly,value:o,onChange:function(t){return e.onChange(t)}}),(i||[]).map((function(e,a){return r.a.createElement(t,{value:e,key:a},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:l?l[a]:e}}))})))}),ke=a(375),Se=(xe=ke.a,function(e){var t=e.invalid?{borderColor:"#f5222d"}:{},a=e.schema,n=a.max,i=a.min,l=a.step,o={};return(n||0===n)&&(o={max:n}),(i||0===i)&&(o=Object(m.a)({},o,{min:i})),l&&(o=Object(m.a)({},o,{step:l})),r.a.createElement(xe,Object.assign({},o,{style:Object(m.a)({width:"100%"},t),disabled:e.disabled||e.readonly},e.options,{value:e.value,onChange:e.onChange}))}),Ie=a(374);var De,Te=(De=Ce.a,function(e){var t=De.Option,a=e.invalid?{borderColor:"#f5222d"}:{},n=e.schema||{},i=n.enum,l=n.enumNames;return r.a.createElement(De,Object.assign({style:Object(m.a)({width:"100%"},a)},e.options,{disabled:e.disabled||e.readonly,value:e.value,onChange:function(t){return e.onChange(t)}}),(i||[]).map((function(e,a){var n=l?l[a]:e;return"string"===typeof n&&"<"===n[0]&&(n=r.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}})),r.a.createElement(t,{value:e,key:a},n)})))}),Le=a(371),Re=function(e){var t=e.invalid?{borderColor:"#f5222d"}:{},a=e.schema,n=a.max,i=a.min,l=a.step,o={};(n||0===n)&&(o={max:n}),(i||0===i)&&(o=Object(m.a)({},o,{min:i})),l&&(o=Object(m.a)({},o,{step:l}));var c=!1;e.options&&e.options.hideNumber&&(c=!0);var s=e.readonly?r.a.createElement("span",{style:{width:"90px"}},""===e.value?"-":e.value):r.a.createElement(ke.a,Object.assign({},e.options,o,{style:Object(m.a)({width:"90px"},t),value:e.value,disabled:e.disabled,onChange:e.onChange}));return r.a.createElement("div",{className:"fr-slider"},r.a.createElement(Le.a,Object.assign({style:{flexGrow:1,marginRight:c?0:12}},o,{onChange:e.onChange,value:"number"===typeof e.value?e.value:i||0,disabled:e.disabled||e.readonly})),c?null:s)},Ae=a(366);var Fe=q.a.TextArea;var Me=a(168),$e=a(376),Pe=a(368);var _e=a(172),Je=a(380),We=function(e,t){return"image"===e?r.a.createElement("img",{src:t||"https://img.alicdn.com/tfs/TB14tSiKhTpK1RjSZFKXXa2wXXa-354-330.png",alt:"\u56fe\u7247\u5730\u5740\u9519\u8bef",className:"fr-preview-image"}):null},ze=function(e,t){return"image"!==e?null:r.a.createElement(Je.a,{content:We(e,t),className:"fr-preview",placement:"bottom"},r.a.createElement(_e.a,null))};var Be={checkbox:function(e){var t=e.value,a=e.onChange,n=e.disabled,i=e.readonly;return r.a.createElement(K.a,{disabled:n||i,onChange:function(e){a(e.target.checked)},checked:t})},checkboxes:function(e){var t=e.schema||{},a=t.enum,n=t.enumNames,i=e.value&&Array.isArray(e.value)?e.value:[];return r.a.createElement(K.a.Group,{disabled:e.disabled||e.readonly,value:i,onChange:e.onChange},(a||[!0,!1]).map((function(e,t){return r.a.createElement(K.a,{value:e,key:t},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:n?n[t]:e}}))})))},color:function(e){var t=e.schema.format;return r.a.createElement("div",{className:"fr-color-picker"},r.a.createElement(X.a,{type:t,animation:"slide-up",color:e.value?e.value:"#ffffff",onChange:function(t){e.disabled||e.readonly||e.onChange(t.color)}}),e.readonly?r.a.createElement("span",null,e.value||"#ffffff"):r.a.createElement(q.a,{placeholder:"#ffffff",disabled:e.disabled,value:e.value,onChange:function(t){e.onChange(t.target.value)}}))},date:function(e){var t=e.schema.format,a="time"===(void 0===t?"dateTime":t)?Z.a:Q.a;return function(e,t,a){var n=e.invalid?{borderColor:"#f5222d"}:{},i=e.schema.format,l=void 0===i?"dateTime":i,o=I(l),c={};e.value?c.value=te()(e.value,o):c.value="";var s=e.description?{placeholder:e.description}:{},u=Object(m.a)({},s,{},e.options,{},c,{style:Object(m.a)({width:"100%"},n),disabled:e.disabled||e.readonly,onChange:t});return"dateTime"===l&&(u.showTime=!0),r.a.createElement(a,u)}(e,(function(t,a){return e.onChange(a)}),a)},dateRange:function(e){return function(e,t,a){var n=e.schema.format,i=void 0===n?"dateTime":n,l=I(i),o={};e.value&&Array.isArray(e.value)&&e.value[0]&&e.value[1]&&(o={defaultValue:[te()(e.value[0],l),te()(e.value[1],l)]});var c=Object(m.a)({},e.options,{},o,{style:{width:"100%"},showTime:"dateTime"===i,disabled:e.disabled||e.readonly,onChange:t});return r.a.createElement(a,c)}(e,(function(t,a){return e.onChange(a)}),ae)},input:function(e){var t=e.options,a=void 0===t?{}:t,n=e.invalid?{borderColor:"#f5222d"}:{},i=e.schema.format,l=void 0===i?"text":i,o="image"===l?"text":l;return r.a.createElement(q.a,Object.assign({style:n},a,{value:e.value,type:o,disabled:e.disabled||e.readonly,addonAfter:a.addonAfter?a.addonAfter:ze(l,e.value),onChange:function(t){return e.onChange(t.target.value)}}))},list:we,listEditor:function(e){return r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("div",{className:"fr-set w-100 flex flex-column ba pt4 pb2 ph2 relative b--black-10"},r.a.createElement("span",{className:"fr-move-icon f4"},":::"),e.children,r.a.createElement(ce.a,{size:"small",className:"self-end",type:"dashed",icon:r.a.createElement(Ee.a,null)},"\u5220\u9664")),r.a.createElement(ce.a,{size:"small",className:"self-end",icon:r.a.createElement(je.a,null)},"\u6dfb\u52a0"))},map:function(e){var t=e.children;return r.a.createElement("div",{className:"w-100"},t)},multiSelect:Ne,number:Se,radio:function(e){return function(e,t,a){var n=a.Group,i=e.schema||{},l=i.enum,o=i.enumNames;return r.a.createElement(n,{disabled:e.disabled||e.readonly,value:e.value,onChange:t},(l||[!0,!1]).map((function(e,t){return r.a.createElement(a,{value:e,key:t},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:o?o[t]:e}}))})))}(e,(function(t){return e.onChange(t.target.value)}),Ie.a)},select:Te,slider:Re,switch:function(e){return r.a.createElement(Ae.a,{disabled:e.disabled||e.readonly,onChange:function(t){return e.onChange(e.name,t)},defaultChecked:e.value})},textarea:function(e){var t=e.options,a=e.invalid?{borderColor:"#f5222d"}:{},n=Object(m.a)({},{rows:3},{},t);return r.a.createElement(Fe,Object.assign({style:a,disabled:e.disabled||e.readonly,value:e.value},n,{onChange:function(t){return e.onChange(t.target.value)}}))},upload:function(e){var t={name:"file",action:e.action,enctype:"multipart/form-data",withCredentials:!0,type:"file",onChange:function(t){"done"===t.file.status?($e.a.success("".concat(t.file.name," \u4e0a\u4f20\u6210\u529f")),e.onChange(t.file.response.url)):"error"===t.file.status&&$e.a.error("".concat(t.file.name," \u4e0a\u4f20\u5931\u8d25"))},onRemove:function(){e.onChange("")}};return r.a.createElement("div",{className:"fr-upload-mod"},r.a.createElement(Pe.a,Object.assign({},t,{className:"fr-upload-file"}),r.a.createElement(ce.a,null,r.a.createElement(Me.a,null)," \u4e0a\u4f20")),e.value&&r.a.createElement("a",{href:e.value,target:"_blank",rel:"noopener noreferrer",className:"fr-upload-preview"},"\u5df2\u4e0a\u4f20\u5730\u5740"))}};function He(e){var t=e.onChange,a=e.value,n=e.disabled,i=e.readonly,l=e.options;return r.a.createElement(q.a,Object.assign({disabled:n||i},l,{onChange:function(e){try{var n=F(a,e.target.value);t(n)}catch(r){}},value:A(a)}))}var Ye=function(e){var t=e.invalid?{borderColor:"#f5222d"}:{},a=e.schema,n=a.max,i=a.min,l=a.step,o={};(n||0===n)&&(o={max:n}),(i||0===i)&&(o=Object(m.a)({},o,{min:i})),l&&(o=Object(m.a)({},o,{step:l}));var c=!1;e.options&&e.options.hideNumber&&(c=!0);var s,u=100;if("string"===typeof(s=e.value)&&s.endsWith("%"))try{u=Number(e.value.split("%")[0]),Number.isNaN(u)&&(u=100)}catch(f){}var d=function(t){var a=t+"%";e.onChange(a)},p=e.readonly?r.a.createElement("span",{style:{width:"80px"}},""===e.value?"-":e.value+"%"):r.a.createElement(ke.a,Object.assign({},e.options,o,{style:Object(m.a)({width:"80px"},t),value:u,disabled:e.disabled,onChange:d,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")}}));return r.a.createElement("div",{className:"fr-slider"},r.a.createElement(Le.a,Object.assign({style:{flexGrow:1,marginRight:c?0:12}},o,{onChange:d,max:100,tipFormatter:function(e){return e+"%"},value:u||100,disabled:e.disabled||e.readonly})),c?null:p)},Ve={default:"input",string:"input",array:"list",boolean:"checkbox",integer:"number",number:"number",object:"map","string:upload":"upload","string:date":"date","string:dateTime":"date","string:time":"date","string:textarea":"textarea","string:color":"color","string:image":"input","range:date":"dateRange","range:dateTime":"dateRange","*?enum":"select","array?enum":"checkboxes","*?readonly":"text"};function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve,a=e.type,n=e.format,r=e.enum,i=e.readonly;if(e["ui:widget"])return e["ui:widget"];var l=[];i&&(l.push("".concat(a,"?readonly")),l.push("*?readonly")),r&&(l.push("".concat(a,"?enum")),l.push("*?enum")),n&&l.push("".concat(a,":").concat(n)),l.push(a);var o="";return l.some((function(e){return!!(o=t[e])})),o}var Ke=[].concat(Object(y.a)(x[0]),Object(y.a)(x[1]),Object(y.a)(x[2]));function Ue(){var e,t,a=v(),n=a.flatten,i=a.onItemChange,l=g().selected,o={},c={};try{if((e=n[l])&&(t=Ge(e.schema)),t){var s=Ke.find((function(e){return e.widget===t})).setting;o={propsSchema:{type:"object",properties:Object(m.a)({},s)}},c=e.schema}}catch(d){console.log(d)}var u=Object(m.a)({},Be,{idInput:He,percentSlider:Ye});return r.a.createElement("div",{style:{paddingRight:24,height:700,overflow:"auto"}},r.a.createElement(ut,{schema:o,formData:c,onChange:function(e){if(l)try{var t=n[l];t&&t.schema&&i(l,Object(m.a)({},t,{schema:e}))}catch(d){console.log(d,"catch")}},displayType:"row",showDescIcon:!0,widgets:u,preview:!0}))}var Xe=a(196);function qe(){var e=g(),t=(e.hovering,e.mapping,e.preview,e.selected,e.setState),a=e.widgets,n=Object(s.a)(e,["hovering","mapping","preview","selected","setState","widgets"]);return r.a.createElement("div",{style:{paddingRight:24,height:700,overflow:"auto"}},r.a.createElement(ut,{schema:Xe,formData:n,onChange:function(e){t((function(t){return Object(m.a)({},t,{},e)}))},displayType:"row",showDescIcon:!0,widgets:a,preview:!0}))}var Ze=a(369),Qe=Ze.a.TabPane;function et(){var e=b({showRight:!0,showItemSettings:!1}),t=Object(u.a)(e,2),a=t[0],i=t[1],l=g().selected,o=a.showRight,c=a.showItemSettings,s=function(){return i({showRight:!o})},m=function(){return r.a.createElement("div",{className:"absolute top-0 left-0 pointer",style:{height:30,width:30,padding:"8px 0 0 8px"},onClick:s},r.a.createElement(G.a,{className:"f5"}))},d=function(){return r.a.createElement("div",{className:"absolute right-0 top-0 h2 flex-center",style:{width:40}},r.a.createElement(m,null))};return Object(n.useEffect)((function(){l&&"0"===l[0]||"#"===l||!l?i({showItemSettings:!1}):i({showItemSettings:!0})}),[l]),o?r.a.createElement("div",{className:"right-layout relative pl2"},r.a.createElement(m,null),r.a.createElement(Ze.a,{defaultActiveKey:"1",onChange:function(){}},c&&r.a.createElement(Qe,{tab:"\u7ec4\u4ef6\u914d\u7f6e",key:"1"},r.a.createElement(Ue,null)),r.a.createElement(Qe,{tab:"\u8868\u5355\u914d\u7f6e",key:c?"2":"1"},r.a.createElement(qe,null)))):r.a.createElement(d,null)}var tt=function(e){var t=e.children,a=void 0===t?[]:t,n=e.preview,i=v();i.onItemChange,i.flatten;return r.a.createElement(r.a.Fragment,null,a.map((function(e,t){var a={id:e,preview:n};return r.a.createElement(ot,Object.assign({key:t.toString()},a))})))},at=function(e){var t,a,n=e.$id,i=e.item,l=e.labelClass,o=e.contentClass,c=e.isComplex,s=e.children,u=v(),d=u.onItemChange,p=u.flatten,f=i.schema,h=i.data,b=g(),y=b.displayType,w=b.showDescIcon,E=b.showValidate,j=b.labelWidth,O=b.widgets,x=b.mapping,C=f.type,N=f.title,k=f.description,S=f.required,I=S&&S.length>0,D=function e(t,a,n){try{var r=n[a];if(void 0!==r.schema[t])return r.schema[t];if(r&&r.parent){var i=n[r.parent].schema;return void 0!==i[t]?i[t]:e(t,r.parent,n)}}catch(l){return}}("ui:labelWidth",n,p)||j,T={width:"number"===typeof(a=D)||"string"===typeof a&&!Number.isNaN(Number(a))?Number(D):"string"===typeof(t=D)&&t.match(/^([0-9])*(%|px|rem|em)$/i)?D:110};("boolean"===C||c||"column"===y)&&(T={flexGrow:1});var L=Ge(f,x),R=f["ui:widget"];R&&O[R]&&(L=R);var A=O[L],F={};"checkbox"===L&&(F.marginLeft=D);var M={disabled:f["ui:disabled"],readonly:f["ui:readonly"],hidden:f["ui:hidden"],options:f["ui:options"],labelWidth:f["ui:labelWidth"],width:f["ui:width"]};return r.a.createElement(r.a.Fragment,null,f.title?r.a.createElement("div",{className:l,style:T},r.a.createElement("label",{className:"fr-label-title ".concat("boolean"===C||"column"===y?"no-colon":""),title:N},I&&r.a.createElement("span",{className:"fr-label-required"}," *"),r.a.createElement("span",{className:"".concat(c?"b":""," ").concat("column"===y?"flex-none":"")},N),k&&(w?r.a.createElement("span",{className:"fr-tooltip-toggle","aria-label":k},r.a.createElement("i",{className:"fr-tooltip-icon"}),r.a.createElement("div",{className:"fr-tooltip-container"},r.a.createElement("i",{className:"fr-tooltip-triangle"}),k)):r.a.createElement("span",{className:"fr-desc ml2"},"(\xa0",k,"\xa0)")),"row"!==y&&E&&r.a.createElement("span",{className:"fr-validate"},"validation"))):null,r.a.createElement("div",{className:o,style:F},r.a.createElement(A,Object.assign({value:h,onChange:function(e){var t=Object(m.a)({},i);t.data=e,d(n,t)},schema:f},M,{children:s}))))},nt=(a(352),a(174)),rt=a(171),it=a(378);function lt(e){var t=e.$id,a=e.item,i=e.inside,l=void 0!==i&&i,o=e.children,c=e.style,s=Object(n.useState)(),d=Object(u.a)(s,2),p=d[0],f=d[1],b=v(),y=b.flatten,w=(b.onItemChange,b.onFlattenChange),E=h(),j=g(),O=j.selected,x=j.hovering,C=a.schema,k=C.type,I=Object(n.useRef)(null),D=Object(_.a)({item:{type:"box",$id:l?0+t:t},end:function(e,t){t.getDropResult()},collect:function(e){return{isDragging:e.isDragging()}}}),T=Object(u.a)(D,3),L=T[0].isDragging,R=T[1],F=T[2],M=Object(it.a)({accept:"box",drop:function(e,a){if(!a.didDrop()){console.log(e.dragItem,"tems");var n=function(e){var t=e.dragId,a=e.dragItem,n=e.dropId,r=e.position,i=e.flatten,l="#"===n?"inside":r,o=Object(m.a)({},i);a&&(o[t]=a);var c=a||o[t],s=o[n],u=s;"inside"!==l&&(u=o[s.parent]);if(n.indexOf(t)>-1)return o;var d=t;try{var p=u.schema.$id;d=d.replace(c.parent,p)}catch(b){}try{var f=o[c.parent],h=f.children.indexOf(t);h>-1&&f.children.splice(h,1)}catch(b){console.error(b)}try{var g=u.children||[],v=g.indexOf(n);switch(l){case"up":g.splice(v,0,t);break;case"down":g.splice(v+1,0,t);break;default:g.push(t)}u.children=g}catch(b){console.error(b)}return c.parent=u.$id,[o,d]}({dragId:e.$id,dragItem:e.dragItem,dropId:t,position:p,flatten:y}),r=Object(u.a)(n,2),i=r[0],l=r[1];w(i),E({selected:l})}},hover:function(e,t){if(t.isOver({shallow:!0})){var a=I.current&&I.current.getBoundingClientRect(),n=(a.bottom-a.top)/2,r=t.getSourceClientOffset().y-a.top;l?f("inside"):(r<=n&&f("up"),r>n&&f("down"))}},collect:function(e){return{isOver:e.isOver({shallow:!0}),canDrop:e.canDrop()}}}),$=Object(u.a)(M,2),P=$[0],J=P.canDrop,W=P.isOver,z=J&&W;F((0,$[1])(I));var B=O===t&&!l;O&&"0"===O[0]&&(B=O.substring(1)===t&&l);var H={backgroundColor:x===(l?"0"+t:t)?"#ecf5ff":"#fff",opacity:L?0:1};if(l?H=Object(m.a)({},H,{borderColor:"#777",padding:"12px 12px 0",backgroundColor:"#f6f5f6"}):"#"===t?H=Object(m.a)({},H,{borderColor:"#777",padding:12,height:"calc(100vh - 80px)",overflow:"auto",backgroundColor:"#f6f5f6"}):"object"===k&&(H=Object(m.a)({},H,{paddingTop:12})),z&&(l||"up"===p?H=Object(m.a)({},H,{boxShadow:"0 -3px 0 red"}):"down"===p&&(H=Object(m.a)({},H,{boxShadow:"0 3px 0 red"}))),B&&(H=Object(m.a)({},H,{outline:"2px solid #409eff",borderColor:"#fff"})),c&&"object"===typeof c&&(H=Object(m.a)({},H,{},c)),"#"===t&&l)return o;var Y=C&&C.$id&&A(C.$id);return"#"===Y&&(Y=""),r.a.createElement("div",{ref:I,style:H,className:"field-wrapper relative w-100",onClick:function(e){e.stopPropagation(),E({selected:l?"0"+t:t})},onMouseEnter:function(){},onMouseLeave:function(){}},!l&&B&&"#"!==t&&r.a.createElement("div",{style:{position:"absolute",top:-2,left:-2,height:24,width:24,backgroundColor:"#409eff",padding:"2px 0 0 4px",cursor:"move"},ref:R},r.a.createElement(nt.a,{style:{color:"#fff"}})),!l&&r.a.createElement("div",{className:"absolute top-0 right-1 blue f7"},Y),o,B&&!l&&"#"!==t&&r.a.createElement("div",{style:{position:"absolute",zIndex:20,bottom:-2,right:-2,height:24,width:54,borderTopLeftRadius:8,background:"#409eff",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{className:"pointer",onClick:function(e){e.stopPropagation();var a=Object(m.a)({},y),n="#";try{var r=a[t].parent,i=a[r].children,l=i.indexOf(t);n=l>0?i[l-1]:i[1]||r}catch(o){console.log("catch",o)}delete a[t],w(a),E({selected:n})}},r.a.createElement(Ee.a,{style:{height:16,width:16,margin:"0 8px 0 12px",color:"#fff"}})),r.a.createElement("div",{className:"pointer",onClick:function(e){e.stopPropagation();var a=function(e,t){var a=Object(m.a)({},e);try{var n=e[t],r=t+N()(6),i=a[n.parent].children,l=i.findIndex((function(e){return e===t}));return i.splice(l+1,0,r),a[r]=S()(a[t]),a[r].schema.$id=r,[a,r]}catch(o){return console.error(o,"catcherror"),[e,t]}}(y,t),n=Object(u.a)(a,2),r=n[0],i=n[1];w(r),E({selected:i})}},r.a.createElement(rt.a,{style:{height:16,width:16,marginRight:12,color:"#fff"}}))))}var ot=function(e){var t=e.id,a=void 0===t?"#":t,n=e.preview,i=void 0!==n&&n,l=v(),o=(l.onItemChange,l.onFlattenChange,l.flatten),c=g(),s=c.displayType,m=c.column,u=o[a];if(!u)return null;var d=u.schema,p="object"===d.type,f="array"===d.type&&void 0===d.enum,h=p||f,b=d["ui:width"],y="fr-field w-100 ".concat(h?"fr-field-complex":""),w="fr-label mb2",E="fr-content",j={};switch(!h&&b?j={width:b,paddingRight:"12px"}:!h&&m>1&&(j={width:"calc(100% /".concat(m,")"),paddingRight:"12px"}),d.type){case"object":d.title&&(y+=" ba b--black-20 pt4 pr3 pb2 relative mt3 mb4",w+=" fr-label-object bg-white absolute ph2 top-upper left-1"),y+=" fr-field-object",d.title&&(E+=" ml3");break;case"array":d.title&&!d.enum&&(w+=" mt2 mb3");break;case"boolean":d.title&&(w=(w+=" ml2").replace("mb2","mb0")),E+=" flex items-center",y+=" flex items-center flex-row-reverse justify-end";break;default:"row"===s&&(w=w.replace("mb2","mb0"))}"row"!==s||h||"boolean"===d.type||(y+=" flex items-center",w=(w+=" flex-shrink-0 fr-label-row").replace("mb2","mb0"),E+=" flex-grow-1 relative"),"row"===s&&"boolean"===d.type&&(E+=" flex justify-end pr2");var O={$id:a,item:u,labelClass:w,contentClass:E,isComplex:h},x={children:u.children,preview:i},C=u.children&&u.children.length>0?r.a.createElement("ul",{className:"flex flex-wrap pl0"},r.a.createElement(tt,x)):null;return i?r.a.createElement("div",{style:j,className:y},r.a.createElement(at,O,(p||f)&&C)):Object.keys(o).length<2?r.a.createElement(lt,{style:j,$id:a,item:u},r.a.createElement("div",{className:"".concat(y," h-100 f5 black-40 flex items-center justify-center")},"\u70b9\u51fb/\u62d6\u62fd\u5de6\u4fa7\u680f\u7684\u7ec4\u4ef6\u8fdb\u884c\u6dfb\u52a0")):r.a.createElement(lt,{style:j,$id:a,item:u},r.a.createElement("div",{className:y},r.a.createElement(at,O,(p||f)&&r.a.createElement(lt,{$id:a,item:u,inside:!0},C||r.a.createElement("div",{className:"h2"})))))},ct=a(370),st=(a(165),a(166),a(167),q.a.TextArea),mt=function(e){var t=e.simple,a=void 0===t||t,i=e.schema,l=e.formData,o=e.onChange,c=e.onSchemaChange,h=Object(s.a)(e,["simple","schema","formData","onChange","onSchemaChange"]),g=b({showModal:!1,showModal2:!1,showModal3:!1,schemaForImport:""}),v=Object(u.a)(g,2),w=v[0],j=v[1],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SAVES",a=function(){var a=localStorage.getItem(t);if(a)try{return JSON.parse(a)}catch(n){return e}return e},r=Object(n.useState)(a()),i=Object(u.a)(r,2),l=i[0],o=i[1],c=function(e){o(e),localStorage.setItem(t,JSON.stringify(e))};return[l,c]}([]),x=Object(u.a)(O,2),C=x[0],N=x[1],k=Object(n.useRef)(),S=h.preview,I=h.setState,L=(h.mapping,h.widgets,h.selected,h.hovering,Object(s.a)(h,["preview","setState","mapping","widgets","selected","hovering"])),F=R(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=T(t),r=n.map((function(t){var n=t.name,r=t.schema,i=r.type,l=r.enum,o=r.properties,c=r.items,s="object"===i&&o,u="array"===i&&c&&!l,d=n&&a[t.name];if(!d)return t;if(u){var p=e(c,d.items||{});return Object(m.a)({},t,{schema:Object(m.a)({},t.schema,{},d,{items:p})})}if(s){var f=e(t.schema,d);return Object(m.a)({},t,{schema:f})}return Object(m.a)({},t,{schema:Object(m.a)({},t.schema,{},d)})})),i={};r.forEach((function(e){i[e.name]=e.schema}));var l={};return Object.keys(a).forEach((function(e){"string"===typeof e&&"ui:"===e.substring(0,3)&&(l[e]=a[e])})),D(i)?Object(m.a)({},t,{},l):Object(m.a)({},t,{},l,{properties:i})}(i.propsSchema,i.uiSchema)),_=$(F,l),J=function(e){var t=M(e),a=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";try{var n=t[a].data,r=Object.keys(t),i=r.filter((function(e){var t=a.split("/").length,n=e.split("/").length;return e.indexOf(a)>-1&&n>t}));return i&&i.length>0&&(void 0===n&&["object","array"].indexOf(t[a].schema.type)>-1&&(n={}),i.forEach((function(r){var i=a.split("/").length;if(r.split("/").length===i+1){var l=e(t,r),o=A(r);n[o]=l}}))),n}catch(l){return}}(e);c&&c(t),o(a)},W=function(){return j({showModal:!w.showModal})},z=function(){return j({showModal2:!w.showModal2})},B=function(){return j({showModal3:!w.showModal3})},H="";try{var Y=M(_,"#",!0);H=JSON.stringify(Object(m.a)({propsSchema:Y},L),null,2)}catch(K){}var G=Object(m.a)({flatten:_,onFlattenChange:J,onItemChange:function(e,t){_[e]=t,J(_)}},h);return a?r.a.createElement(d.Provider,{value:I},r.a.createElement(p.Provider,{value:h},r.a.createElement(f.Provider,{value:G},r.a.createElement(ot,{preview:!0})))):r.a.createElement(d.Provider,{value:I},r.a.createElement(p.Provider,{value:h},r.a.createElement(f.Provider,{value:G},r.a.createElement("div",{className:"flex vh-100 overflow-hidden"},r.a.createElement(V,{saveList:C,setSaveList:N}),r.a.createElement("div",{className:"mid-layout pr2"},r.a.createElement("div",{className:"mv3 mh1"},r.a.createElement(ce.a,{className:"mr2",onClick:function(){I({preview:!S,selected:"#"})}},S?"\u5f00\u59cb\u7f16\u8f91":"\u6700\u7ec8\u5c55\u793a"),r.a.createElement(ce.a,{className:"mr2",onClick:function(){I({schema:{propsSchema:{type:"object",properties:{}}},formData:{},selected:void 0})}},"\u6e05\u7a7a"),r.a.createElement(ce.a,{className:"mr2",onClick:B},"\u4fdd\u5b58"),r.a.createElement(ce.a,{className:"mr2",onClick:z},"\u5bfc\u5165"),r.a.createElement(ce.a,{type:"primary",className:"mr2",onClick:W},"\u5bfc\u51faschema")),r.a.createElement(ot,{preview:S})),r.a.createElement(et,{globalProps:L}),r.a.createElement(ct.a,{visible:w.showModal,onOk:function(){E()(H),$e.a.info("\u590d\u5236\u6210\u529f")},onCancel:W,okText:"\u590d\u5236",cancelText:"\u53d6\u6d88"},r.a.createElement("div",{className:"mt3"},r.a.createElement(st,{style:{fontSize:12},value:H,autoSize:{minRows:10,maxRows:30}}))),r.a.createElement(ct.a,{visible:w.showModal2,okText:"\u5bfc\u5165",cancelText:"\u53d6\u6d88",onOk:function(){try{var e=JSON.parse(w.schemaForImport),t=e.propsSchema,a=Object(s.a)(e,["propsSchema"]);I(Object(m.a)({schema:{propsSchema:t},formData:{},selected:void 0},a))}catch(K){$e.a.info("\u683c\u5f0f\u4e0d\u5bf9\u54e6\uff0c\u8bf7\u91cd\u65b0\u5c1d\u8bd5")}z()},onCancel:z},r.a.createElement("div",{className:"mt3"},r.a.createElement(st,{style:{fontSize:12},value:w.schemaForImport,placeholder:"\u8d34\u5165\u9700\u8981\u5bfc\u5165\u7684schema\uff0c\u6a21\u6837\u53ef\u70b9\u51fb\u5bfc\u51faschema\u53c2\u8003",onChange:function(e){j({schemaForImport:e.target.value})},autoSize:{minRows:10,maxRows:30}}))),r.a.createElement(ct.a,{visible:w.showModal3,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){try{var e=k.current.state.value,t="save"+P(),a=M(_,"#",!0);N([].concat(Object(y.a)(C),[{text:e,name:t,schema:a}])),B()}catch(K){$e.a.error("\u4fdd\u5b58\u5931\u8d25")}},onCancel:B},r.a.createElement("div",{className:"mt4 flex items-center"},r.a.createElement("div",{style:{width:100}},"\u4fdd\u5b58\u540d\u79f0\uff1a"),r.a.createElement("div",{style:{width:280}},r.a.createElement(q.a,{defaultValue:"\u5b58\u6863"+P(),ref:k}))))))))};mt.defaultProps={labelWidth:120};var ut=mt,dt={propsSchema:{type:"object",properties:{}},uiSchema:{},formData:{}};var pt=function(){var e=b(Object(m.a)({formData:dt.formData,schema:dt,selected:void 0,hovering:void 0,preview:!1},{displayType:"row"})),t=Object(u.a)(e,2),a=t[0],n=t[1],i=a.schema,l=a.formData,o=a.preview,c=a.selected,d=a.hovering,p=Object(s.a)(a,["schema","formData","preview","selected","hovering"]),f="row"===p.displayType,h=Object(m.a)({},Ve,{array:"listEditor"}),g=Object(m.a)({preview:o,setState:n,simple:!1,mapping:h,widgets:Be,selected:c,hovering:d},p,{showDescIcon:f}),v=Object(m.a)({schema:i,formData:l,onChange:function(e){n({formData:e})},onSchemaChange:function(e){var t=Object(m.a)({},i,{propsSchema:e});n({schema:t})}},g);return r.a.createElement(ut,v)},ft=(a(361),function(){return r.a.createElement(o.a,{backend:c.a},r.a.createElement(pt,null))});l.a.render(r.a.createElement(ft,null),document.getElementById("root"))}},[[210,1,2]]]);
//# sourceMappingURL=main.bc930029.chunk.js.map