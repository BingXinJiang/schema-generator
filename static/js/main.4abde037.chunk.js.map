{"version":3,"sources":["context.js","hooks.js","Left/elementList.js","Left/index.js","utils.js","components/rangeHoc.jsx","widgets/antd/dateRange.js","components/foldIcon.jsx","components/descList.jsx","widgets/antd/list.jsx","components/multiSelectHoc.jsx","components/numberHoc.jsx","widgets/antd/multiSelect.js","widgets/antd/number.js","components/selectHoc.jsx","widgets/antd/select.js","widgets/antd/slider.js","components/sliderHoc.jsx","widgets/antd/textarea.js","components/previewContent.jsx","widgets/antd/input.js","widgets/antd/index.js","widgets/antd/checkbox.js","widgets/antd/checkboxes.js","widgets/antd/color.js","widgets/antd/date.js","components/dateHoc.jsx","widgets/antd/map.js","widgets/antd/radio.js","components/radioHoc.jsx","widgets/antd/switch.js","widgets/antd/upload.js","mapping.js","Right/index.js","FR/RenderChildren.js","FR/RenderField.js","FR/Wrapper.js","FR/index.js","App.js","index.js"],"names":["Ctx","createContext","PropsCtx","InnerCtx","useGlobal","useContext","useGlobalProps","useStore","useSet","initState","useReducer","state","newState","setState","actionName","commonSettings","$id","title","type","description","width","placeholder","labelWidth","result","text","name","widget","schema","setting","minLength","maxLength","format","properties","map","item","ELEMENT_LIST2","Left","props","className","ELEMENT_LIST","ele","idx","key","toString","Element","setGlobal","selected","flatten","onFlattenChange","onClick","newId","_selected","newFlatten","oldId","substring","nanoid","children","push","newItem","parent","data","undefined","error","console","_name","idArr","split","pop","join","siblings","findIndex","x","splice","getFormat","dateFormat","isEmpty","obj","Object","keys","length","getChildren","items","schemaSubs","isFunction","func","flattenSchema","_schema","isObj","isList","entries","forEach","value","uniqueName","getKeyFromUniqueId","uniqueId","arr","idToSchema","id","final","child","childId","log","dataToFlatten","branchData","idString","idConnectedByDots","filter","string","a","JSON","stringify","Function","getDataById","RangePicker","DatePicker","FoldIcon","fold","height","fill","style","rest","viewBox","d","DescriptionList","index","list","getDescription","slice","paddingRight","i","titles","values","valueList","t","enum","enumNames","getEnumValue","enums","Array","isArray","count","indexOf","v","String","DragHandle","SortableHandle","listItemHoc","ButtonComponent","toggleFold","toggleFoldItem","this","p","descProps","options","readonly","formData","rootValue","canFold","foldable","hideDelete","itemButtons","_isFunction","evaluateString","setClass","displayType","position","top","right","icon","onChange","btn","window","callback","React","Component","listHoc","SortableList","SortableContainer","SortableItem","SortableElement","handleAddClick","addUnfoldItem","foldList","extraButtons","buttons","maxItems","canAdd","_","getSubField","lastIndex","fieldListHoc","handleSort","oldIndex","newIndex","arrayMove","len","distance","useDragHandle","helperClass","shouldCancelStart","e","toElement","onSortEnd","defaultProps","iconName","IconComponent","Icons","MultiComponent","NumberComponent","multiSelectHoc","Select","Option","invalid","borderColor","_value","mode","disabled","val","dangerouslySetInnerHTML","__html","numberHoc","InputNumber","max","min","step","SelectComponent","selectHoc","option","sliderHoc","SliderComponent","flexGrow","marginRight","Slider","TextArea","Input","src","alt","previewNode","content","previewContent","placement","PictureOutlined","widgets","checkbox","target","checked","checkboxes","Group","color","animation","date","DateComponent","TimePicker","defaultObj","moment","placeholderObj","dateParams","showTime","dateHoc","dateRange","RangeComponent","defaultValue","datePrams","rangeHoc","input","addonAfter","multiSelect","number","radio","RadioComponent","RadioGroup","radioHoc","Radio","select","slider","switch","defaultChecked","textarea","ui","rows","upload","action","enctype","withCredentials","info","file","status","message","success","response","url","onRemove","UploadOutlined","href","rel","mapping","default","array","boolean","integer","object","getWidgetName","found","some","Right","itemSelected","widgetName","onItemChange","settingSchema","settingData","Placeholder","schemaNow","find","propsSchema","uiSchema","newSchema","showDescIcon","preview","RenderChildren","FRProps","RenderField","str","num","labelClass","contentClass","isComplex","showValidate","required","isRequired","labelStyle","Number","isNaN","match","customWidget","Widget","usefulWidgetProps","hidden","aria-label","Wrapper","inside","hovering","isSelected","overwriteStyle","backgroundColor","marginLeft","padding","overflow","paddingTop","outline","stopPropagation","onMouseEnter","onMouseLeave","zIndex","bottom","borderTopLeftRadius","background","display","justifyContent","alignItems","newSelect","DeleteOutlined","margin","copyItem","CopyOutlined","FR","containerClass","replace","fieldProps","childrenProps","childrenElement","SCHEMA","App","onSchemaChange","simple","globalProps","showModal","local","setLocal","combineSchema","propList","newList","isArr","newItems","newObj","s","topLevelUi","flattenWithData","newData","flattenToData","ids","childrenIds","lengthOfId","lengthOfChild","c","cData","cKey","toggleModal","store","displaySchemaString","Provider","visible","onOk","onCancel","fontSize","autoSize","minRows","maxRows","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4abde037.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nexport const Ctx = createContext(() => {});\nexport const PropsCtx = createContext({});\nexport const InnerCtx = createContext({});\n","import { useReducer, useContext, useRef, useEffect, useState } from 'react';\nimport { Ctx, InnerCtx, PropsCtx } from './context';\n\n// 使用最顶层组件的 setState\nexport const useGlobal = () => {\n  return useContext(Ctx);\n};\n\nexport const useGlobalProps = () => {\n  return useContext(PropsCtx);\n};\n\nexport const useStore = () => {\n  return useContext(InnerCtx);\n};\n\n// const logger = reducer => {\n//   const reducerWithLogger = (state, action, actionName = 'Action') => {\n//     console.group(actionName);\n//     console.log('%cState:', 'color: #9E9E9E; font-weight: 500;', state);\n//     console.log('%cAction:', 'color: #00A7F7; font-weight: 500;', action);\n//     console.log('%cNext:', 'color: #47B04B; font-weight: 500;', {\n//       ...state,\n//       ...action,\n//     });\n//     console.groupEnd();\n//     return reducer(state, action);\n//   };\n//   return reducerWithLogger;\n// };\n\n// export default logger;\n\n// 类似于class component的setState\nexport const useSet = (initState) => {\n  const [state, setState] = useReducer((state, newState) => {\n    // console.group('action'); // TODO: give it a name\n    // console.log('%cState:', 'color: #9E9E9E; font-weight: 700;', state);\n    // console.log('%cAction:', 'color: #00A7F7; font-weight: 700;', newState);\n    // // console.log('%cNext:', 'color: #47B04B; font-weight: 700;', {\n    // //   ...state,\n    // //   ...newState,\n    // // });\n    // console.groupEnd();\n    return { ...state, ...newState };\n  }, initState);\n  const setStateWithActionName = (state, actionName) => {\n    setState(state);\n  };\n  return [state, setStateWithActionName];\n\n  // const setStateWithLogger = (action, actionName = 'Action') => {\n  //   setState(action);\n  //   const colors = {\n  //     prevState: '#9E9E9E',\n  //     action: '#03A9F4',\n  //     nextState: '#4CAF50',\n  //     error: '#F20404',\n  //   };\n  //   console.group(actionName);\n  //   console.log(\n  //     '%c state:',\n  //     `color: ${colors.prevState}; font-weight: bold;`,\n  //     state\n  //   );\n  //   console.log(\n  //     '%c action:',\n  //     `color: ${colors.action}; font-weight: bold`,\n  //     action\n  //   );\n  //   console.log('%c next:', `color: ${colors.nextState}; font-weight: bold`, {\n  //     ...state,\n  //     ...action,\n  //   });\n  //   console.groupEnd();\n  // };\n\n  // return [state, setState, setStateWithLogger];\n};\n\n// start: true 开始、false 暂停\nexport function useInterval(callback, delay, start) {\n  const savedCallback = useRef();\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  const id = useRef();\n  useEffect(() => {\n    if (!start) {\n      return;\n    }\n    function tick() {\n      savedCallback && savedCallback.current && savedCallback.current();\n    }\n    tick();\n    if (delay !== null) {\n      id.current = setInterval(tick, delay);\n      return () => clearInterval(id.current);\n    }\n  }, [delay, start]);\n  return () => clearInterval(id.current);\n}\n\nexport function usePrevious(value) {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef();\n\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n\nexport const useShowOnce = (localKey) => {\n  // 从 localStorage 读取 key 值\n  const [show, setShow] = useState(false);\n  let localStr;\n  try {\n    localStr = localStorage.getItem(localKey);\n  } catch (error) {}\n  if (!localStr) {\n    setShow(true);\n    localStorage.setItem(localKey, JSON.stringify(true));\n  }\n  return show;\n};\n\nexport const useModal = () => {\n  const [show, setShow] = useState(false);\n  const toggle = () => setShow(!show);\n  return [show, toggle];\n};\n","// 只需写配置，方便可扩展\nconst commonSettings = {\n  $id: {\n    title: 'key',\n    type: 'string',\n  },\n  title: {\n    title: '标题',\n    type: 'string',\n  },\n  description: {\n    title: '说明',\n    type: 'string',\n  },\n  width: {\n    title: '元素宽度',\n    type: 'string',\n    'ui:options': {\n      placeholder: \"例如 '50%'\",\n    },\n  },\n  labelWidth: {\n    title: '标签宽度',\n    type: 'string',\n    'ui:options': {\n      placeholder: '默认值是 120',\n    },\n  },\n};\n\nconst ELEMENT_LIST = [\n  {\n    text: 'input',\n    name: 'input',\n    widget: 'input',\n    schema: {\n      title: '简单输入框',\n      type: 'string',\n    },\n    setting: {\n      minLength: {\n        title: '最短字数',\n        type: 'number',\n      },\n      maxLength: {\n        title: '最长字数',\n        type: 'number',\n      },\n    },\n  },\n  {\n    text: 'textarea',\n    name: 'textarea',\n    widget: 'textarea',\n    schema: {\n      title: '文本编辑框',\n      type: 'string',\n      format: 'textarea',\n    },\n    setting: {\n      minLength: {\n        title: '最短字数',\n        type: 'number',\n      },\n      maxLength: {\n        title: '最长字数',\n        type: 'number',\n      },\n    },\n  },\n  {\n    text: '颜色选择',\n    name: 'color',\n    widget: 'color',\n    schema: {\n      title: '颜色选择',\n      type: 'string',\n      format: 'color',\n    },\n    setting: {},\n  },\n  {\n    text: '日期选择',\n    name: 'date',\n    widget: 'date',\n    schema: {\n      title: '日期选择',\n      type: 'string',\n      format: 'date',\n    },\n    setting: {},\n  },\n  {\n    text: '图片展示',\n    name: 'image',\n    widget: 'input',\n    schema: {\n      title: '图片展示',\n      type: 'string',\n      format: 'image',\n    },\n    setting: {},\n  },\n  {\n    text: '数字输入框',\n    name: 'number',\n    widget: 'number',\n    schema: {\n      title: '数字输入框',\n      type: 'number',\n    },\n    setting: {},\n  },\n  {\n    text: '数字（slider）',\n    name: 'slider',\n    widget: 'slider',\n    schema: {\n      title: '带滑动条',\n      type: 'number',\n      'ui:widget': 'slider',\n    },\n    setting: {},\n  },\n  {\n    text: 'date range',\n    name: 'dateRange',\n    widget: 'dateRange',\n    schema: {\n      title: '日期范围',\n      type: 'range',\n      format: 'dateTime',\n      'ui:options': {\n        placeholder: ['开始时间', '结束时间'],\n      },\n    },\n    setting: {\n      minLength: {\n        title: '最短字数',\n        type: 'number',\n      },\n      maxLength: {\n        title: '最长字数',\n        type: 'number',\n      },\n    },\n  },\n  {\n    text: 'object',\n    name: 'objectName',\n    schema: {\n      title: '对象',\n      type: 'object',\n      properties: {},\n    },\n    widget: 'map',\n    setting: {},\n  },\n];\n\nconst result = ELEMENT_LIST.map((item) => ({\n  ...item,\n  setting: { ...commonSettings, ...item.setting },\n}));\n\nexport default result;\n","import React from 'react';\nimport ELEMENT_LIST from './elementList';\nimport './index.css';\nimport { useGlobal, useGlobalProps, useStore } from '../hooks';\nimport nanoid from 'nanoid';\n\nconst ELEMENT_LIST2 = [];\n\nconst Left = (props) => (\n  <div className=\"left-layout\">\n    <p className=\"f6 b\">基础组件</p>\n    <ul className=\"pl0\">\n      {ELEMENT_LIST.map((ele, idx) => {\n        return (\n          <li key={idx.toString()} className=\"left-item\">\n            <Element {...ele} {...props} key={idx.toString()} />\n          </li>\n        );\n      })}\n    </ul>\n    <p className=\"f6 b\">定制组件</p>\n    <ul className=\"pl0\">\n      {ELEMENT_LIST2.map((ele, idx) => {\n        return (\n          <li key={idx.toString()} className=\"left-item\">\n            <Element {...ele} {...props} key={idx.toString()} />\n          </li>\n        );\n      })}\n    </ul>\n  </div>\n);\n\nexport default Left;\n\nconst Element = ({ text, name, schema }) => {\n  const setGlobal = useGlobal();\n  const { selected } = useGlobalProps();\n  const { flatten, onFlattenChange } = useStore();\n\n  const handleElementClick = () => {\n    let _selected = selected || '#';\n    let newId;\n    // 初始字段是0，说明点击了object、list的里侧\n    if ((_selected && _selected[0] === '0') || _selected === '#') {\n      try {\n        const newFlatten = { ...flatten };\n        let oldId = _selected.substring(1);\n        newId = oldId + '/' + name + '_' + nanoid(6);\n        if (_selected === '#') {\n          newId = '#/' + name + '_' + nanoid(6);\n          oldId = '#';\n        }\n        const siblings = newFlatten[oldId].children;\n        siblings.push(newId);\n        const newItem = {\n          parent: oldId,\n          schema: { ...schema, $id: newId },\n          data: undefined,\n          children: [],\n        };\n        newFlatten[newId] = newItem;\n        onFlattenChange(newFlatten);\n        setGlobal({ selected: newId });\n      } catch (error) {\n        console.error(error, 'catch');\n      }\n      return;\n    }\n\n    let _name = name + '_' + nanoid(6);\n    const idArr = selected.split('/');\n    idArr.pop();\n    idArr.push(_name);\n    newId = idArr.join('/');\n    try {\n      const newFlatten = { ...flatten };\n      const item = newFlatten[selected];\n      const siblings = newFlatten[item.parent].children;\n      const idx = siblings.findIndex((x) => x === selected);\n      siblings.splice(idx + 1, 0, newId);\n      const newItem = {\n        parent: item.parent,\n        schema: { ...schema, $id: newId },\n        data: undefined,\n        children: [],\n      };\n      newFlatten[newId] = newItem;\n      onFlattenChange(newFlatten);\n      setGlobal({ selected: newId });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <div className=\"left-element\" onClick={handleElementClick}>\n      {text}\n    </div>\n  );\n};\n","import nanoid from 'nanoid';\n\n// 克隆对象\nexport function clone(data) {\n  try {\n    return JSON.parse(JSON.stringify(data));\n  } catch (e) {\n    return data;\n  }\n}\n\n// '3' => true, 3 => true, undefined => false\nexport function isLooselyNumber(num) {\n  if (typeof num === 'number') return true;\n  if (typeof num === 'string') {\n    return !Number.isNaN(Number(num));\n  }\n  return false;\n}\n\nexport function isCssLength(str) {\n  if (typeof str !== 'string') return false;\n  return str.match(/^([0-9])*(%|px|rem|em)$/i);\n}\n\n// 深度对比\nexport function isDeepEqual(param1, param2) {\n  if (param1 === undefined && param2 === undefined) return true;\n  else if (param1 === undefined || param2 === undefined) return false;\n  else if (param1.constructor !== param2.constructor) return false;\n\n  if (param1.constructor === Array) {\n    if (param1.length !== param2.length) return false;\n    for (let i = 0; i < param1.length; i++) {\n      if (param1[i].constructor === Array || param1[i].constructor === Object) {\n        if (!isDeepEqual(param1[i], param2[i])) return false;\n      } else if (param1[i] !== param2[i]) return false;\n    }\n  } else if (param1.constructor === Object) {\n    if (Object.keys(param1).length !== Object.keys(param2).length) return false;\n    for (let i = 0; i < Object.keys(param1).length; i++) {\n      const key = Object.keys(param1)[i];\n      if (\n        param1[key] &&\n        typeof param1[key] !== 'number' &&\n        (param1[key].constructor === Array ||\n          param1[key].constructor === Object)\n      ) {\n        if (!isDeepEqual(param1[key], param2[key])) return false;\n      } else if (param1[key] !== param2[key]) return false;\n    }\n  } else if (param1.constructor === String || param1.constructor === Number) {\n    return param1 === param2;\n  }\n  return true;\n}\n\n// 时间组件\nexport function getFormat(format) {\n  let dateFormat;\n  switch (format) {\n    case 'date':\n      dateFormat = 'YYYY-MM-DD';\n      break;\n    case 'time':\n      dateFormat = 'HH:mm:ss';\n      break;\n    default:\n      // dateTime\n      dateFormat = 'YYYY-MM-DD HH:mm:ss';\n  }\n  return dateFormat;\n}\n\nexport function hasRepeat(list) {\n  return list.find(\n    (x, i, self) =>\n      i !== self.findIndex((y) => JSON.stringify(x) === JSON.stringify(y))\n  );\n}\n\n// ----------------- schema 相关\n\n// 合并propsSchema和UISchema。由于两者的逻辑相关性，合并为一个大schema能简化内部处理\nexport function combineSchema(propsSchema = {}, uiSchema = {}) {\n  const propList = getChildren(propsSchema);\n  const newList = propList.map((p) => {\n    const { name } = p;\n    const { type, enum: options, properties, items } = p.schema;\n    const isObj = type === 'object' && properties;\n    const isArr = type === 'array' && items && !options; // enum + array 代表的多选框，没有sub\n    const ui = name && uiSchema[p.name];\n    if (!ui) {\n      return p;\n    }\n    // 如果是list，递归合并items\n    if (isArr) {\n      const newItems = combineSchema(items, ui.items || {});\n      return { ...p, schema: { ...p.schema, ...ui, items: newItems } };\n    }\n    // object递归合并整个schema\n    if (isObj) {\n      const newSchema = combineSchema(p.schema, ui);\n      return { ...p, schema: newSchema };\n    }\n    return { ...p, schema: { ...p.schema, ...ui } };\n  });\n\n  const newObj = {};\n  newList.forEach((s) => {\n    newObj[s.name] = s.schema;\n  });\n\n  const topLevelUi = {};\n  Object.keys(uiSchema).forEach((key) => {\n    if (typeof key === 'string' && key.substring(0, 3) === 'ui:') {\n      topLevelUi[key] = uiSchema[key];\n    }\n  });\n  if (isEmpty(newObj)) {\n    return { ...propsSchema, ...topLevelUi };\n  }\n  return { ...propsSchema, ...topLevelUi, properties: newObj };\n}\n\nfunction isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n}\n\n// 获得propsSchema的children\nfunction getChildren(schema) {\n  if (!schema) return [];\n  const {\n    // object\n    properties,\n    // array\n    items,\n    type,\n  } = schema;\n  if (!properties && !items) {\n    return [];\n  }\n  let schemaSubs = {};\n  if (type === 'object') {\n    schemaSubs = properties;\n  }\n  if (type === 'array') {\n    schemaSubs = items;\n  }\n  return Object.keys(schemaSubs).map((name) => ({\n    schema: schemaSubs[name],\n    name,\n  }));\n}\n\n// 合并多个schema树，比如一个schema的树节点是另一个schema\nexport function combine() {}\n\n// 代替eval的函数\nexport const parseString = (string) =>\n  Function('\"use strict\";return (' + string + ')')();\n\n// 解析函数字符串值\nexport const evaluateString = (string, formData, rootValue) =>\n  Function(`\"use strict\";\n    const rootValue = ${JSON.stringify(rootValue)};\n    const formData = ${JSON.stringify(formData)};\n    return (${string})`)();\n\n// 判断schema的值是是否是“函数”\n// JSON无法使用函数值的参数，所以使用\"{{...}}\"来标记为函数，也可使用@标记，不推荐。\nexport function isFunction(func) {\n  if (typeof func === 'function') {\n    return true;\n  }\n  if (typeof func === 'string' && func.substring(0, 1) === '@') {\n    return func.substring(1);\n  }\n  if (\n    typeof func === 'string' &&\n    func.substring(0, 2) === '{{' &&\n    func.substring(func.length - 2, func.length) === '}}'\n  ) {\n    return func.substring(2, func.length - 2);\n  }\n  return false;\n}\n\n// 判断schema中是否有属性值是函数表达式\nexport function isFunctionSchema(schema) {\n  return Object.keys(schema).some((key) => {\n    if (typeof schema[key] === 'function') {\n      return true;\n    } else if (typeof schema[key] === 'string') {\n      return isFunction(schema[key]);\n    } else if (typeof schema[key] === 'object') {\n      return isFunctionSchema(schema[key]);\n    } else {\n      return false;\n    }\n  });\n}\n\n// 后面三个参数都是内部递归使用的，将schema的树形结构扁平化成一层, 每个item的结构\n// {\n//   parent: '#',\n//   schema: ...,\n//   children: []\n// }\nexport function flattenSchema(schema, name = '#', parent, result = {}) {\n  const _schema = { ...schema };\n  if (!_schema.$id) {\n    _schema.$id = name; // 给生成的schema添加一个唯一标识，方便从schema中直接读取\n  }\n  const children = [];\n  const isObj = _schema.type === 'object' && _schema.properties;\n  const isList =\n    _schema.type === 'array' && _schema.items && _schema.items.properties;\n  if (isObj) {\n    Object.entries(_schema.properties).forEach(([key, value]) => {\n      const uniqueName = name + '/' + key;\n      children.push(uniqueName);\n      flattenSchema(value, uniqueName, name, result);\n    });\n    delete _schema.properties;\n  }\n  if (isList) {\n    Object.entries(_schema.items.properties).forEach(([key, value]) => {\n      const uniqueName = name + '/' + key;\n      children.push(uniqueName);\n      flattenSchema(value, uniqueName, name, result);\n    });\n    delete _schema.items.properties;\n  }\n  if (_schema.type) {\n    result[name] = { parent, schema: _schema, children };\n  }\n  return result;\n}\n\nexport const getKeyFromUniqueId = (uniqueId = '#') => {\n  const arr = uniqueId.split('/');\n  return arr[arr.length - 1];\n};\n\nexport const changeKeyFromUniqueId = (uniqueId = '#', key = 'something') => {\n  const arr = uniqueId.split('/');\n  if (typeof key === 'string' || typeof key === 'number') {\n    arr[arr.length - 1] = key;\n  }\n  return arr.join('/');\n};\n\n// final = true 用于最终的导出的输出\n// 几种特例：\n// 1. 删除时值删除了item，没有删除和parent的关联，也没有删除children，所以要在解析这步来兜住 (所有的解析都是)\n// 2. 修改$id的情况, 修改的是schema内的$id, 解析的时候要把schema.$id 作为真正的id (final = true的解析)\nexport function idToSchema(flatten, id = '#', final = false) {\n  let schema = {};\n  const item = flatten[id];\n  if (item) {\n    schema = { ...item.schema };\n    // 最终输出去掉 $id\n    if (final) {\n      schema.$id && delete schema.$id;\n    }\n    if (item.children.length > 0) {\n      item.children.forEach((child) => {\n        let childId = child;\n        // TODO: 这个情况会出现吗？return会有问题吗？\n        if (!flatten[child]) {\n          return;\n        }\n        // 最终输出将所有的 key 值改了\n        try {\n          if (final) {\n            childId = flatten[child].schema.$id;\n          }\n        } catch (error) {\n          console.log('catch', error);\n        }\n        const key = getKeyFromUniqueId(childId);\n        if (schema.type === 'object') {\n          if (!schema.properties) {\n            schema.properties = {};\n          }\n          schema.properties[key] = idToSchema(flatten, child, final);\n        }\n        if (\n          schema.type === 'array' &&\n          schema.items &&\n          schema.items.type === 'object'\n        ) {\n          if (!schema.items.properties) {\n            schema.items.properties = {};\n          }\n          schema.items.properties[key] = idToSchema(flatten, child, final);\n        }\n      });\n    }\n  }\n  return schema;\n}\n\n// 删除对应id的schema（以及所有它的子schema）\nexport const deleteSchema = (id, schema) => {\n  const flatten = flattenSchema(schema);\n  if (id in flatten) {\n    delete flatten[id];\n  }\n  return idToSchema(flatten);\n};\n\n// 复制对应id的schema\n// export const copySchema = (id, schema) => {\n//   const flatten = flattenSchema(schema);\n//   let newId = id + '$$' + nanoid(10);\n//   if (id && typeof id === 'string' && id.split('$$').length > 1) {\n//     newId = id.split('$$')[0] + '$$' + nanoid(10);\n//   }\n//   if (id in flatten) {\n//     // 将创建的新id注入到parent的children array\n//     const parent = flatten[id].parent;\n//     if (parent && parent in flatten) {\n//       const children = flatten[parent].children;\n//       try {\n//         const idx = children.findIndex((x) => x === id);\n//         children.splice(idx + 1, 0, newId);\n//       } catch (error) {\n//         console.error(error.message);\n//       }\n//     }\n\n//     try {\n//       // 简单的实现一下拷贝\n//       flatten[newId] = {\n//         parent: flatten[id].parent,\n//         schema: { ...flatten[id].schema },\n//         children: flatten[id].children,\n//       };\n//       flatten[newId].schema.$id = newId;\n//     } catch (error) {\n//       console.error(error.message);\n//     }\n//   }\n//   return [idToSchema(flatten), newId];\n// };\n\nexport const copyItem = (flatten, $id) => {\n  let newFlatten = { ...flatten };\n  try {\n    const item = flatten[$id];\n    const newId = $id + nanoid(6);\n    const siblings = newFlatten[item.parent].children;\n    const idx = siblings.findIndex((x) => x === $id);\n    siblings.splice(idx + 1, 0, newId);\n    // 直接copy会让两个元素指向同一个object\n    newFlatten[newId] = {\n      parent: newFlatten[$id].parent,\n      schema: { ...newFlatten[$id].schema },\n      data: newFlatten[$id].data,\n      children: newFlatten[$id].children,\n    };\n    newFlatten[newId].schema.$id = newId;\n    return [newFlatten, newId];\n  } catch (error) {\n    console.error(error, 'catcherror');\n    return [flatten, $id];\n  }\n};\n\n// schema的某个id位置后面添加一个名字是key的subSchema，生成新的schema\n// TODO: 如果没有任何选中，或者选中的是object，逻辑要变\n\nexport const addSchema = ({ id, key, schema, subSchema }) => {\n  const flatten = flattenSchema(schema);\n  let newId = changeKeyFromUniqueId(id, key) + '$$' + nanoid(10);\n  if (id in flatten) {\n    // 生成新id，并将其放置于parent节点的children属性中\n    const parent = flatten[id].parent;\n    if (parent && parent in flatten) {\n      const children = flatten[parent].children;\n      try {\n        const idx = children.findIndex((x) => x === id);\n        children.splice(idx + 1, 0, newId);\n      } catch (error) {\n        console.error(error.message);\n      }\n    }\n    // 生成新节点\n    try {\n      flatten[newId] = {\n        parent: flatten[id].parent,\n        schema: subSchema,\n        children: [],\n      };\n      flatten[newId].schema.$id = newId;\n    } catch (error) {\n      console.error(error.message);\n    }\n  }\n  // 将id也返回，用于ui展示显示\n  return [idToSchema(flatten), newId];\n};\n\n// export const changeSubSchema = ({ id, schema, subSchema }) => {\n//   const flatten = flattenSchema(schema);\n//   if (id in flatten) {\n//     const oldSchema = flatten[id];\n//     const newId = subSchema.$id;\n//     if (oldSchema.$id !== subSchema.$id) {\n//     }\n//   }\n// };\n\n// 解析函数字符串值\nexport const getDataById = (data, idString) => {\n  if (idString === '#') return data;\n  try {\n    const idConnectedByDots = idString\n      .split('/')\n      .filter((id) => id !== '#')\n      .join('.');\n    const string = `data.${idConnectedByDots}`;\n    const a = `\"use strict\";\n    const data = ${JSON.stringify(data)};\n    return ${string}`;\n    return Function(a)();\n    // TODO: can be better\n    // let result = { ...data };\n    // idConnectedByDots.forEach((item) => {\n    //   result = result[item];\n    // });\n    // return result;\n  } catch (error) {\n    return undefined;\n  }\n};\n\nexport const dataToFlatten = (flatten, data) => {\n  if (!flatten || !data) return;\n  Object.entries(flatten).forEach(([id, item]) => {\n    const branchData = getDataById(data, id);\n    flatten[id].data = branchData;\n  });\n  return flatten;\n};\n\nexport const onChangeById = (onChange) => (id, value) => {};\n\nexport const flattenToData = (flatten, id = '#') => {\n  try {\n    let result = flatten[id].data;\n    const ids = Object.keys(flatten);\n    const childrenIds = ids.filter((item) => {\n      const lengthOfId = id.split('/').length;\n      const lengthOfChild = item.split('/').length;\n      return item.indexOf(id) > -1 && lengthOfChild > lengthOfId;\n    });\n    if (childrenIds && childrenIds.length > 0) {\n      if (result === undefined) result = {}; // TODO: 是不是就兜undefined？\n      childrenIds.forEach((c) => {\n        const lengthOfId = id.split('/').length;\n        const lengthOfChild = c.split('/').length;\n        if (lengthOfChild === lengthOfId + 1) {\n          const cData = flattenToData(flatten, c);\n          const cKey = getKeyFromUniqueId(c);\n          result[cKey] = cData;\n        }\n      });\n    }\n    return result;\n  } catch (error) {\n    return undefined;\n  }\n};\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离高阶日期组件\n */\n\nimport React from 'react';\nimport moment from 'moment';\nimport { getFormat } from '../utils';\n\nexport default (p, onChange, RangeComponent) => {\n  const { format = 'dateTime' } = p.schema;\n  const dateFormat = getFormat(format);\n  let defaultObj = {};\n  if (p.value && Array.isArray(p.value) && p.value[0] && p.value[1]) {\n    defaultObj = {\n      defaultValue: [\n        moment(p.value[0], dateFormat),\n        moment(p.value[1], dateFormat),\n      ],\n    };\n  }\n  const datePrams = {\n    ...p.options,\n    ...defaultObj,\n    style: { width: '100%' },\n    showTime: format === 'dateTime',\n    disabled: p.disabled || p.readonly,\n    onChange,\n  };\n  return <RangeComponent {...datePrams} />;\n};\n","/**\n * Updated by Tw93 on 2019-12-08.\n * 日历多选组件\n */\n\nimport { DatePicker } from 'antd';\nimport rangeHoc from '../../components/rangeHoc';\n\nconst { RangePicker } = DatePicker;\n\nexport default function dateRange(p) {\n  const onChange = (value, string) => p.onChange(string);\n  return rangeHoc(p, onChange, RangePicker);\n}\n","import React from 'react';\n\nconst FoldIcon = ({\n  fold = false,\n  width,\n  height,\n  fill,\n  style = {},\n  ...rest\n}) => (\n  <div\n    style={style}\n    className={fold ? 'fold-icon' : 'fold-icon fold-icon-active'}\n    {...rest}\n  >\n    <svg viewBox=\"0 0 1024 1024\" width={width || 18} height={height || 18}>\n      <path\n        d=\"M942.048 306.176c-12.288-12.288-31.328-13.024-43.008-2.016L529.056 674.112c-15.072 15.872-19.008 15.808-34.816 0L124.288 304.16c-11.68-11.04-30.72-10.272-43.008 2.016-12.512 12.512-13.216 32.032-1.6 43.68L490.624 760.8c5.056 5.056 11.648 7.328 18.464 7.744h5.152c6.816-.448 13.408-2.72 18.464-7.744l410.944-410.944c11.584-11.648 10.88-31.2-1.6-43.68z\"\n        fill={fill || '#3c3c3c'}\n      />\n    </svg>\n  </div>\n);\n\nexport default FoldIcon;\n","import React from 'react';\nimport { isFunction } from '../utils';\n\nconst getEnumValue = (value, enums, enumNames) => {\n  if (Array.isArray(enums) && Array.isArray(enumNames)) {\n    if (typeof value === 'string' || typeof value === 'number') {\n      const count = enums.indexOf(value);\n      if (count > -1) {\n        return enumNames[count];\n      }\n      return value;\n    } else if (Array.isArray(value)) {\n      const result = value.map((v) => getEnumValue(value, enums, enumNames));\n      return String(result);\n    }\n    return value;\n  }\n  return value;\n};\n\nconst DescriptionList = ({ schema = {}, value = [], index }) => {\n  const list = getDescription({ schema, value, index })\n    .filter((item) => item.title)\n    .slice(0, 3);\n  return (\n    <ul className=\"flex overflow-hidden\" style={{ paddingRight: 45 }}>\n      {list.map((item, i) => {\n        return item.title ? (\n          <li className=\"flex-auto mr2 overflow-hidden\" key={i}>\n            <span className=\"fw5\">{item.title}: </span>\n            <span>{item.text}</span>\n          </li>\n        ) : null;\n      })}\n    </ul>\n  );\n};\n\nexport default DescriptionList;\n\n// 获得title，value值list\nexport const getDescription = ({ schema = {}, value = [], index }) => {\n  const { items = {} } = schema;\n  // 只有当items为object时才做收起（fold）处理\n  if (items.type !== 'object') {\n    return [];\n  }\n  let titles = (items && items.properties) || {};\n  titles = Object.values(titles);\n  let description = (value && value.length && value[index]) || {};\n  const valueList = Object.values(description);\n  const descList = titles.map((t, idx) => {\n    let hidden = t && t['ui:hidden'];\n    // ui:hidden为判断式时解析 TODO: 解析在外部集中做\n    if (hidden) return;\n    const title = t.title;\n    let text = valueList[idx];\n    if (text === null && text === undefined) {\n      text = '';\n    } else if (typeof text === 'boolean') {\n      text = text ? '是' : '否';\n    } else if (typeof text !== 'string' && typeof text !== 'number' && text) {\n      text = '{复杂结构}';\n    } else if (t.enum && t.enumNames) {\n      text = getEnumValue(text, t.enum, t.enumNames);\n    }\n    return {\n      title,\n      text,\n    };\n  });\n  // 去空\n  return descList.filter((d) => !!d);\n};\n","/**\n * Updated by Tw93 on 2019-12-01.\n * 数组组件\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport * as Icons from '@ant-design/icons';\nimport { Button } from 'antd';\nimport {\n  SortableContainer,\n  SortableHandle,\n  SortableElement,\n  arrayMove,\n} from 'react-sortable-hoc';\nimport { isFunction, evaluateString } from '../../utils';\nimport FoldIcon from '../../components/foldIcon';\nimport DescriptionList, { getDescription } from '../../components/descList';\n\nconst DragHandle = SortableHandle(() => (\n  <span className=\"fr-move-icon\">:::</span>\n));\n\nconst listItemHoc = (ButtonComponent) =>\n  class extends React.Component {\n    componentDidMount() {\n      const { p = {}, name, fold } = this.props;\n      const description = getDescription({\n        schema: p.schema,\n        value: p.value,\n        index: name,\n      });\n      // 如果第一个值不为空，则收起\n      // 新增的值为0，不折叠\n      const hasValue = description && description[0] && description[0].text;\n      if (hasValue && fold !== 0) {\n        this.props.toggleFoldItem(name);\n      }\n    }\n\n    toggleFold = () => {\n      this.props.toggleFoldItem(this.props.name);\n    };\n\n    render() {\n      const { item, p = {}, name, fold } = this.props;\n      const descProps = { ...p, index: name };\n      const { options = {}, readonly, formData, value: rootValue } = p;\n      const { foldable: canFold } = options;\n      let { hideDelete, itemButtons } = options;\n\n      // 判断 hideDelete 是不是函数，是的话将计算后的值赋回\n      let _isFunction = isFunction(hideDelete);\n      if (_isFunction) {\n        // isFunction 返回为 true 则说明只可能为 string | Function\n        if (typeof _isFunction === 'string') {\n          hideDelete = evaluateString(_isFunction, formData, rootValue);\n        } else if (typeof _isFunction === 'function') {\n          hideDelete = _isFunction(formData, rootValue);\n        }\n      }\n\n      // 只有当items为object时才做收起（fold）处理\n      const isObj = p.schema.items && p.schema.items.type == 'object';\n      let setClass =\n        'fr-set ba b--black-10 hover-b--black-20 relative flex flex-column';\n      if (canFold && fold) {\n        setClass += ' pv12';\n      } else if (p.displayType === 'row') {\n        setClass += ' pt44';\n      }\n      return (\n        <li className={setClass}>\n          {canFold && fold && isObj ? <DescriptionList {...descProps} /> : item}\n          {canFold && (\n            <FoldIcon\n              fold={fold}\n              onClick={this.toggleFold}\n              style={{ position: 'absolute', top: 12, right: 32 }}\n            />\n          )}\n          {!readonly && <DragHandle />}\n          {!((canFold && fold) || hideDelete || readonly) && (\n            <div className=\"self-end flex\">\n              <ButtonComponent\n                type=\"dashed\"\n                icon=\"delete\"\n                onClick={() => {\n                  const value = [...p.value];\n                  value.splice(name, 1);\n                  p.onChange(value);\n                }}\n              >\n                删除\n              </ButtonComponent>\n              {itemButtons &&\n                itemButtons.length > 0 &&\n                itemButtons.map((btn, idx) => {\n                  return (\n                    <ButtonComponent\n                      key={idx.toString()}\n                      className=\"ml2\"\n                      type=\"dashed\"\n                      icon={btn.icon}\n                      onClick={() => {\n                        const value = [...p.value];\n                        if (typeof window[btn.callback] === 'function') {\n                          const result = window[btn.callback](value, name); // eslint-disable-line\n                          p.onChange(result);\n                        }\n                      }}\n                    >\n                      {btn.text || ''}\n                    </ButtonComponent>\n                  );\n                })}\n            </div>\n          )}\n        </li>\n      );\n    }\n  };\n\nconst fieldListHoc = (ButtonComponent) => {\n  const SortableItem = SortableElement(listItemHoc(ButtonComponent));\n  return class extends React.Component {\n    handleAddClick = () => {\n      const { p, addUnfoldItem } = this.props;\n      const value = [...p.value];\n      value.push(p.newItem);\n      p.onChange(value);\n      addUnfoldItem();\n    };\n    // buttons is a list, each item looks like:\n    // {\n    //   \"text\": \"删除全部\",\n    //   \"icon\": \"delete\",\n    //   \"callback\": \"clearAll\"\n    // }\n\n    render() {\n      const { p, foldList = [], toggleFoldItem } = this.props;\n      const { options = {}, extraButtons = {} } = p || {};\n      // prefer ui:options/buttons to ui:extraButtons, but keep both for backwards compatibility\n      const buttons = options.buttons || extraButtons || [];\n      const { readonly, schema = {} } = p;\n      const { maxItems } = schema;\n      const list = p.value || [];\n      const canAdd = maxItems ? maxItems > list.length : true; // 当到达最大个数，新增按钮消失\n      return (\n        <ul className=\"pl0 ma0\">\n          {list.map((_, name) => (\n            <SortableItem\n              key={`item-${name}`}\n              index={name}\n              name={name}\n              p={p}\n              fold={foldList[name]}\n              toggleFoldItem={toggleFoldItem}\n              item={p.getSubField({\n                name,\n                value: p.value[name],\n              })}\n            />\n          ))}\n          {!readonly && (\n            <div className=\"tr\">\n              {canAdd && (\n                <ButtonComponent icon=\"add\" onClick={this.handleAddClick}>\n                  新增\n                </ButtonComponent>\n              )}\n              {buttons &&\n                buttons.length > 0 &&\n                buttons.map((item, i) => (\n                  <ButtonComponent\n                    className=\"ml2\"\n                    icon={item.icon}\n                    key={i.toString()}\n                    onClick={() => {\n                      if (item.callback === 'clearAll') {\n                        p.onChange([]);\n                        return;\n                      }\n                      if (item.callback === 'copyLast') {\n                        const value = [...p.value];\n                        const lastIndex = value.length - 1;\n                        value.push(\n                          lastIndex > -1 ? value[lastIndex] : p.newItem\n                        );\n                        p.onChange(value);\n                        return;\n                      }\n                      if (typeof window[item.callback] === 'function') {\n                        const value = [...p.value];\n                        const onChange = (value) => p.onChange(value);\n                        window[item.callback](value, onChange, p.newItem); // eslint-disable-line\n                      }\n                    }}\n                  >\n                    {item.text}\n                  </ButtonComponent>\n                ))}\n            </div>\n          )}\n        </ul>\n      );\n    }\n  };\n};\n\nfunction listHoc(ButtonComponent) {\n  const SortableList = SortableContainer(fieldListHoc(ButtonComponent));\n  return class extends React.Component {\n    static propTypes = {\n      value: PropTypes.array,\n    };\n\n    static defaultProps = {\n      value: [],\n    };\n\n    constructor(props) {\n      super(props);\n      const len = this.props.value.length || 0;\n      this.state = {\n        foldList: new Array(len).fill(false) || [],\n      };\n    }\n\n    // 新添加的item默认是展开的\n    addUnfoldItem = () =>\n      this.setState({\n        foldList: [...this.state.foldList, 0],\n      });\n\n    toggleFoldItem = (index) => {\n      const { foldList = [] } = this.state;\n      foldList[index] = !foldList[index]; // TODO: need better solution for the weird behavior caused by setState being async\n      this.setState({\n        foldList,\n      });\n    };\n\n    handleSort = ({ oldIndex, newIndex }) => {\n      const { onChange, value } = this.props;\n      onChange(arrayMove(value, oldIndex, newIndex));\n      this.setState({\n        foldList: arrayMove(this.state.foldList, oldIndex, newIndex),\n      });\n    };\n\n    render() {\n      const { foldList } = this.state;\n      return (\n        <SortableList\n          p={this.props}\n          foldList={foldList}\n          toggleFoldItem={this.toggleFoldItem}\n          addUnfoldItem={this.addUnfoldItem}\n          distance={6}\n          useDragHandle\n          helperClass=\"fr-sort-help-class\"\n          shouldCancelStart={(e) =>\n            e.toElement && e.toElement.className === 'fr-tooltip-container'\n          }\n          onSortEnd={this.handleSort}\n        />\n      );\n    }\n  };\n}\n\nfunction FrButton({ icon, children, ...rest }) {\n  let iconName;\n  switch (icon) {\n    case 'add':\n      iconName = 'PlusCircleOutlined';\n      break;\n    case 'delete':\n      iconName = 'DeleteOutlined';\n      break;\n    default:\n      iconName = icon;\n      break;\n  }\n  const IconComponent = Icons[iconName];\n  if (IconComponent) {\n    return (\n      <Button {...rest} icon={<IconComponent />}>\n        {children}\n      </Button>\n    );\n  }\n  return <Button {...rest}>{children}</Button>;\n}\n\nexport default listHoc(FrButton);\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离高阶多选组件\n */\n\nimport React from 'react';\n\nexport default (MultiComponent) => (p) => {\n  const { Option } = MultiComponent;\n  const onChange = (value) => p.onChange(value);\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { enum: enums, enumNames } = p.schema || {};\n  const _value = p.value && Array.isArray(p.value) ? p.value : [];\n  return (\n    <MultiComponent\n      {...p.options}\n      style={{ width: '100%', ...style }}\n      mode=\"multiple\"\n      disabled={p.disabled || p.readonly}\n      value={_value}\n      onChange={onChange}\n    >\n      {(enums || []).map((val, index) => (\n        <Option value={val} key={index}>\n          <span\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{\n              __html: enumNames ? enumNames[index] : val,\n            }}\n          />\n        </Option>\n      ))}\n    </MultiComponent>\n  );\n};\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离数字输入组件\n */\n\nimport React from 'react';\n\nexport default (NumberComponent) => (p) => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { max, min, step } = p.schema;\n  let obj = {};\n  if (max || max === 0) {\n    obj = { max };\n  }\n\n  if (min || min === 0) {\n    obj = { ...obj, min };\n  }\n\n  if (step) {\n    obj = { ...obj, step };\n  }\n\n  return (\n    <NumberComponent\n      {...obj}\n      style={{ width: '100%', ...style }}\n      disabled={p.disabled || p.readonly}\n      {...p.options}\n      value={p.value}\n      onChange={p.onChange}\n    />\n  );\n};\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 多选组件\n */\n\nimport { Select } from 'antd';\nimport multiSelectHoc from '../../components/multiSelectHoc';\n\nexport default multiSelectHoc(Select);\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 数字输入组件\n */\n\nimport { InputNumber } from 'antd';\nimport numberHoc from '../../components/numberHoc';\n\nexport default numberHoc(InputNumber);\n","/**\n * Created by Tw93 on 2019-12-07.\n * 高阶选择组件\n */\n\nimport React from 'react';\n\nexport default (SelectComponent) => (p) => {\n  const { Option } = SelectComponent;\n  const onChange = (value) => p.onChange(value);\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { enum: enums, enumNames } = p.schema || {};\n  return (\n    <SelectComponent\n      style={{ width: '100%', ...style }}\n      {...p.options}\n      disabled={p.disabled || p.readonly}\n      value={p.value}\n      onChange={onChange}\n    >\n      {(enums || []).map((val, index) => {\n        let option = enumNames ? enumNames[index] : val;\n        const isHtml = typeof option === 'string' && option[0] === '<';\n        if (isHtml) {\n          option = <span dangerouslySetInnerHTML={{ __html: option }} />;\n        }\n        return (\n          <Option value={val} key={index}>\n            {option}\n          </Option>\n        );\n      })}\n    </SelectComponent>\n  );\n};\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 选择组件\n */\n\nimport { Select } from 'antd';\nimport selectHoc from '../../components/selectHoc';\n\nexport default selectHoc(Select);\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 滑动组件\n */\n\nimport { InputNumber, Slider } from 'antd';\nimport sliderHoc from '../../components/sliderHoc';\n\nexport default sliderHoc(Slider, InputNumber);\n","/**\n * Created by Tw93 on 2019-12-07.\n * 滑动输入组件\n */\n\nimport React from 'react';\n\nexport default (SliderComponent, NumberComponent) => (p) => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { max, min, step } = p.schema;\n  let setting = {};\n  if (max || max === 0) {\n    setting = { max };\n  }\n\n  if (min || min === 0) {\n    setting = { ...setting, min };\n  }\n\n  if (step) {\n    setting = { ...setting, step };\n  }\n\n  return (\n    <div className=\"fr-slider\">\n      <SliderComponent\n        style={{ flexGrow: 1, marginRight: 12 }}\n        {...setting}\n        onChange={p.onChange}\n        value={typeof p.value === 'number' ? p.value : min || 0}\n        disabled={p.disabled || p.readonly}\n      />\n      {p.readonly ? (\n        <span style={{ width: '90px' }}>\n          {p.value === (undefined || '') ? '-' : p.value}\n        </span>\n      ) : (\n        <NumberComponent\n          {...p.options}\n          {...setting}\n          style={{ width: '90px', ...style }}\n          value={p.value}\n          disabled={p.disabled}\n          onChange={p.onChange}\n        />\n      )}\n    </div>\n  );\n};\n","import React from 'react';\nimport { Input } from 'antd';\n\nconst { TextArea } = Input;\n\nexport default function ta(p) {\n  const { options, invalid } = p;\n  const style = invalid ? { borderColor: '#f5222d' } : {};\n  const defaultUi = { rows: 3 };\n  const ui = { ...defaultUi, ...options };\n  const onChange = (e) => p.onChange(e.target.value);\n  return (\n    <TextArea\n      style={style}\n      disabled={p.disabled || p.readonly}\n      value={p.value}\n      {...ui}\n      onChange={onChange}\n    />\n  );\n}\n","import React from 'react';\n\nconst defaultImg =\n  'https://img.alicdn.com/tfs/TB14tSiKhTpK1RjSZFKXXa2wXXa-354-330.png';\n\nexport default (format, value) => {\n  return format === 'image' ? (\n    <img\n      src={value || defaultImg}\n      alt=\"图片地址错误\"\n      className=\"fr-preview-image\"\n    />\n  ) : null;\n};\n","import React from 'react';\nimport { PictureOutlined } from '@ant-design/icons';\nimport { Input, Popover } from 'antd';\nimport previewContent from '../../components/previewContent';\n\nconst previewNode = (format, value) => {\n  if (format !== 'image') {\n    return null;\n  }\n  return (\n    <Popover\n      content={previewContent(format, value)}\n      className=\"fr-preview\"\n      placement=\"bottom\"\n    >\n      <PictureOutlined />\n    </Popover>\n  );\n};\n\nexport default function input(p) {\n  const { options = {}, invalid } = p;\n  const style = invalid ? { borderColor: '#f5222d' } : {};\n  const { format = 'text' } = p.schema;\n  const type = format === 'image' ? 'text' : format;\n  const handleChange = (e) => p.onChange(e.target.value);\n  return (\n    <Input\n      style={style}\n      {...options}\n      value={p.value}\n      type={type}\n      disabled={p.disabled || p.readonly}\n      addonAfter={\n        options.addonAfter ? options.addonAfter : previewNode(format, p.value)\n      }\n      onChange={handleChange}\n    />\n  );\n}\n","import checkbox from './checkbox';\nimport checkboxes from './checkboxes';\nimport color from './color';\nimport date from './date';\nimport dateRange from './dateRange';\nimport list from './list';\nimport map from './map';\nimport multiSelect from './multiSelect';\nimport number from './number';\nimport radio from './radio';\nimport select from './select';\nimport slider from './slider';\nimport switch1 from './switch';\nimport textarea from './textarea';\nimport upload from './upload';\nimport input from './input';\n\nexport const widgets = {\n  checkbox,\n  checkboxes, // checkbox多选\n  color,\n  date,\n  dateRange,\n  input,\n  list,\n  map,\n  multiSelect, // 下拉多选\n  number,\n  radio,\n  select,\n  slider, // 带滚条的number\n  switch: switch1,\n  textarea,\n  upload,\n};\n","import React from 'react';\nimport { Checkbox } from 'antd';\n\nexport default function radio(p) {\n  return (\n    <Checkbox\n      disabled={p.disabled || p.readonly}\n      onChange={(e) => p.onChange(e.target.checked)}\n      checked={p.value}\n    />\n  );\n}\n","import React from 'react';\nimport { Checkbox } from 'antd';\n\nexport default function checkboxes(p) {\n  const { enum: enums, enumNames } = p.schema || {};\n  const _value = p.value && Array.isArray(p.value) ? p.value : [];\n  return (\n    <Checkbox.Group\n      disabled={p.disabled || p.readonly}\n      value={_value}\n      onChange={p.onChange}\n    >\n      {(enums || [true, false]).map((val, index) => (\n        <Checkbox value={val} key={index}>\n          <span\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{\n              __html: enumNames ? enumNames[index] : val,\n            }}\n          />\n        </Checkbox>\n      ))}\n    </Checkbox.Group>\n  );\n}\n","import React from 'react';\nimport ColorPicker from 'rc-color-picker';\nimport { Input } from 'antd';\nimport 'rc-color-picker/assets/index.css';\n\nexport default function color(p) {\n  const { format } = p.schema;\n  const onPickerChange = (e) => {\n    if (p.disabled || p.readonly) return;\n    p.onChange(e.color);\n  };\n  const onInputChange = (e) => {\n    // const isHex = value.match(/^(#{0,1})([0-9A-F]{6})$/i);\n    p.onChange(e.target.value);\n  };\n\n  return (\n    <div className=\"fr-color-picker\">\n      {\n        <ColorPicker\n          type={format}\n          animation=\"slide-up\"\n          color={p.value ? p.value : '#ffffff'}\n          onChange={onPickerChange}\n        />\n      }\n      {p.readonly ? (\n        <span>{p.value || '#ffffff'}</span>\n      ) : (\n        <Input\n          placeholder=\"#ffffff\"\n          disabled={p.disabled}\n          value={p.value}\n          onChange={onInputChange}\n        />\n      )}\n    </div>\n  );\n}\n","/**\n * Updated by fateriddle on 2019-12-12.\n * 日期组件\n */\n\nimport { DatePicker, TimePicker } from 'antd';\nimport dateHoc from '../../components/dateHoc';\n\nexport default function date(p) {\n  const { format = 'dateTime' } = p.schema;\n  const onChange = (value, string) => p.onChange(string);\n  const DateComponent = format === 'time' ? TimePicker : DatePicker;\n  return dateHoc(p, onChange, DateComponent);\n}\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离高阶日期组件\n */\n\nimport React from 'react';\nimport moment from 'moment';\nimport { getFormat } from '../utils';\n\nexport default (p, onChange, DateComponent) => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { format = 'dateTime' } = p.schema;\n  const dateFormat = getFormat(format);\n  let defaultObj = {};\n  if (p.value) {\n    defaultObj.value = moment(p.value, dateFormat);\n  } else {\n    defaultObj.value = '';\n  }\n\n  const placeholderObj = p.description ? { placeholder: p.description } : {};\n\n  const dateParams = {\n    ...placeholderObj,\n    ...p.options,\n    ...defaultObj,\n    style: { width: '100%', ...style },\n    disabled: p.disabled || p.readonly,\n    onChange,\n  };\n\n  if (format === 'dateTime') {\n    dateParams.showTime = true;\n  }\n\n  return <DateComponent {...dateParams} />;\n};\n","import React from 'react';\n\nexport default function map() {\n  return <div className=\"w-100\"></div>;\n}\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 单选组件\n */\n\nimport { Radio } from 'antd';\nimport radioHoc from '../../components/radioHoc';\n\nexport default function radio(p) {\n  const onChange = (e) => p.onChange(e.target.value);\n  return radioHoc(p, onChange, Radio);\n}\n","/**\n * Created by Tw93 on 2019-12-07.\n * 单选输入组件\n */\n\nimport React from 'react';\n\nexport default (p, onChange, RadioComponent) => {\n  const RadioGroup = RadioComponent.Group;\n  const { enum: enums, enumNames } = p.schema || {};\n  return (\n    <RadioGroup\n      disabled={p.disabled || p.readonly}\n      value={p.value}\n      onChange={onChange}\n    >\n      {(enums || [true, false]).map((val, index) => (\n        <RadioComponent value={val} key={index}>\n          <span\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{\n              __html: enumNames ? enumNames[index] : val,\n            }}\n          />\n        </RadioComponent>\n      ))}\n    </RadioGroup>\n  );\n};\n","import React from 'react';\nimport { Switch } from 'antd';\n\nexport default function sw(p) {\n  return (\n    <Switch\n      disabled={p.disabled || p.readonly}\n      onChange={checked => p.onChange(p.name, checked)}\n      defaultChecked={p.value}\n    />\n  );\n}\n","import React from 'react';\nimport { UploadOutlined } from '@ant-design/icons';\nimport { Upload, message, Button } from 'antd';\n\nexport default function input(p) {\n  const props = {\n    name: 'file',\n    action: p.action,\n    enctype: 'multipart/form-data',\n    withCredentials: true,\n    type: 'file',\n    onChange(info) {\n      if (info.file.status === 'done') {\n        message.success(`${info.file.name} 上传成功`);\n        p.onChange(info.file.response.url);\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} 上传失败`);\n      }\n    },\n    onRemove() {\n      p.onChange('');\n    },\n  };\n\n  return (\n    <div className=\"fr-upload-mod\">\n      <Upload {...props} className=\"fr-upload-file\">\n        <Button>\n          <UploadOutlined /> 上传\n        </Button>\n      </Upload>\n      {p.value && (\n        <a\n          href={p.value}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"fr-upload-preview\"\n        >\n          已上传地址\n        </a>\n      )}\n    </div>\n  );\n}\n","export const mapping = {\n  default: 'input',\n  string: 'input',\n  array: 'list',\n  boolean: 'checkbox',\n  integer: 'number',\n  number: 'number',\n  object: 'map',\n  'string:upload': 'upload',\n  'string:date': 'date',\n  'string:dateTime': 'date',\n  'string:time': 'date',\n  'string:textarea': 'textarea',\n  'string:color': 'color',\n  'string:image': 'input',\n  'range:date': 'dateRange',\n  'range:dateTime': 'dateRange',\n  '*?enum': 'select',\n  'array?enum': 'checkboxes',\n  '*?readonly': 'text',\n};\n\nexport function getWidgetName(schema) {\n  const { type, format, enum: enums, readonly } = schema;\n  const list = [];\n  if (readonly) {\n    list.push(`${type}?readonly`);\n    list.push('*?readonly');\n  }\n  if (enums) {\n    list.push(`${type}?enum`);\n    // array 默认使用list，array?enum 默认使用checkboxes，*?enum 默认使用select\n    list.push('*?enum');\n  }\n  if (format) {\n    list.push(`${type}:${format}`);\n  }\n  list.push(type); // 放在最后兜底，其他都不match时使用type默认的组件\n  let found = '';\n  list.some((item) => {\n    found = mapping[item];\n    return !!found;\n  });\n  return found;\n}\n","import React from 'react';\nimport { Wrapper } from '../App';\nimport { useGlobalProps, useStore } from '../hooks';\nimport { widgets } from '../widgets/antd';\nimport ELEMENT_LIST from '../Left/elementList';\nimport { getWidgetName } from '../mapping';\nimport { getKeyFromUniqueId } from '../utils';\nimport './index.css';\n\nexport default function Right() {\n  const { flatten, onItemChange } = useStore();\n  const { selected } = useGlobalProps();\n\n  let settingSchema = {};\n  let settingData = {};\n\n  const onDataChange = (newSchema) => {\n    if (selected) {\n      try {\n        const item = flatten[selected];\n        if (item && item.schema) {\n          onItemChange(selected, { ...item, schema: newSchema });\n        }\n      } catch (error) {\n        console.log(error, 'catch');\n      }\n    }\n  };\n\n  const Placeholder = <div className=\"right-layout\"></div>;\n\n  if (selected && selected[0] === '0') return Placeholder;\n  if (selected === '#') return Placeholder;\n  let itemSelected;\n  let widgetName;\n  try {\n    itemSelected = flatten[selected];\n    if (itemSelected) {\n      widgetName = getWidgetName(itemSelected.schema);\n    } else {\n      return Placeholder;\n    }\n    if (widgetName) {\n      const name = getKeyFromUniqueId(selected);\n      const element = ELEMENT_LIST.find((e) => e.widget === widgetName);\n      const schemaNow = element.setting;\n      settingSchema = {\n        propsSchema: {\n          type: 'object',\n          properties: {\n            ...schemaNow,\n          },\n        },\n        uiSchema: {},\n      };\n      settingData = itemSelected.schema;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  return (\n    <div className=\"right-layout\">\n      {itemSelected && (\n        <Wrapper\n          schema={settingSchema}\n          formData={settingData}\n          onChange={onDataChange}\n          displayType=\"row\"\n          showDescIcon\n          widgets={widgets}\n          preview={true}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { useStore } from '../hooks';\nimport FR from './index';\n\nconst RenderChildren = ({ children = [], preview }) => {\n  const { onItemChange, flatten } = useStore();\n  return (\n    <>\n      {children.map((child, i) => {\n        const FRProps = {\n          id: child,\n          preview,\n        };\n        return <FR key={i.toString()} {...FRProps} />;\n      })}\n    </>\n  );\n};\n\nexport default RenderChildren;\n","import React from 'react';\nimport { useGlobalProps, useStore } from '../hooks';\nimport { isLooselyNumber, isCssLength } from '../utils';\nimport { getWidgetName } from '../mapping';\n\nconst RenderField = ({ $id, item, labelClass, contentClass, isComplex }) => {\n  const { onItemChange } = useStore();\n  const { schema, data } = item;\n  const {\n    displayType,\n    showDescIcon,\n    showValidate,\n    labelWidth,\n    widgets,\n  } = useGlobalProps();\n  const { type, title, description, required } = schema;\n  const isRequired = required && required.length > 0;\n\n  const _labelWidth = isLooselyNumber(labelWidth)\n    ? Number(labelWidth)\n    : isCssLength(labelWidth)\n    ? labelWidth\n    : 110; // 默认是 110px 的长度\n  let labelStyle = { width: _labelWidth };\n  if (type === 'boolean') {\n    labelStyle = { flexGrow: 1 };\n  } else if (isComplex || displayType === 'column') {\n    labelStyle = { flexGrow: 1 };\n  }\n\n  const onChange = (value) => {\n    const newItem = { ...item };\n    newItem.data = value;\n    onItemChange($id, newItem);\n  };\n\n  let widgetName = getWidgetName(schema);\n  const customWidget = schema['ui:widget'];\n  if (customWidget && widgets[customWidget]) {\n    widgetName = customWidget;\n  }\n  const Widget = widgets[widgetName];\n  // if (widgetName === 'multiSelect') {\n  //   console.log(schema['ui:widget'], customWidget, Widget);\n  // }\n\n  // TODO: useMemo\n  const usefulWidgetProps = {\n    disabled: schema['ui:disabled'],\n    readonly: schema['ui:readonly'],\n    hidden: schema['ui:hidden'],\n    options: schema['ui:options'],\n    labelWidth: schema['ui:labelWidth'],\n    width: schema['ui:width'],\n  };\n\n  return (\n    <>\n      {schema.title ? (\n        <div className={labelClass} style={labelStyle}>\n          <label\n            className={`fr-label-title ${\n              type === 'boolean' || displayType === 'column' ? 'no-colon' : ''\n            }`} // boolean不带冒号\n            title={title}\n          >\n            {isRequired && <span className=\"fr-label-required\"> *</span>}\n            <span\n              className={`${isComplex ? 'b' : ''} ${\n                displayType === 'column' ? 'flex-none' : ''\n              }`}\n            >\n              {title}\n            </span>\n            {description &&\n              (showDescIcon ? (\n                <span className=\"fr-tooltip-toggle\" aria-label={description}>\n                  <i className=\"fr-tooltip-icon\" />\n                  <div className=\"fr-tooltip-container\">\n                    <i className=\"fr-tooltip-triangle\" />\n                    {description}\n                  </div>\n                </span>\n              ) : (\n                <span className=\"fr-desc ml2\">(&nbsp;{description}&nbsp;)</span>\n              ))}\n            {displayType !== 'row' && showValidate && (\n              <span className=\"fr-validate\">validation</span>\n            )}\n          </label>\n        </div>\n      ) : null}\n      {['list'].indexOf(widgetName) === -1 && (\n        <div className={contentClass}>\n          <Widget\n            value={data}\n            onChange={onChange}\n            schema={schema}\n            {...usefulWidgetProps}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default RenderField;\n","import React from 'react';\nimport './Wrapper.css';\nimport { useGlobal, useGlobalProps, useStore } from '../hooks';\nimport { copyItem } from '../utils';\nimport { DeleteOutlined, CopyOutlined } from '@ant-design/icons';\n\nexport default function Wrapper({ $id, item, inside = false, children }) {\n  const { flatten, onItemChange, onFlattenChange } = useStore();\n  const setGlobal = useGlobal();\n  const { selected, hovering } = useGlobalProps();\n  const { schema } = item;\n  const { type } = schema;\n\n  const handleClick = (e) => {\n    e.stopPropagation();\n    const _id = inside ? '0' + $id : $id;\n    setGlobal({ selected: _id });\n  };\n\n  const deleteItem = (e) => {\n    e.stopPropagation();\n    const newFlatten = { ...flatten };\n    let newSelect = '#';\n    // 计算删除后新被选中的元素：\n    // 1. 如果是第一个，选第二个\n    // 2. 如果不是第一，选它前一个\n    // 3. 如果同级元素没了，选parent\n    try {\n      const parent = newFlatten[$id].parent;\n      const siblings = newFlatten[parent].children;\n      const idx = siblings.indexOf($id);\n      if (idx > 0) {\n        newSelect = siblings[idx - 1];\n      } else {\n        newSelect = siblings[1] || parent;\n      }\n    } catch (error) {\n      console.log('catch', error);\n    }\n    delete newFlatten[$id];\n    onFlattenChange(newFlatten);\n    setGlobal({ selected: newSelect });\n  };\n\n  const handleItemCopy = (e) => {\n    e.stopPropagation();\n    const [newFlatten, newId] = copyItem(flatten, $id);\n    onFlattenChange(newFlatten);\n    setGlobal({ selected: newId });\n  };\n\n  const handleMouseEnter = () => {\n    // setGlobal({ hovering: inside ? '0' + $id : $id });\n  };\n\n  const handleMouseLeave = () => {\n    // TODO: 如何写hoverLeave\n    // let hoverItem = '';\n    // if (hovering && hovering[0] === '0') {\n    //   hoverItem = $id;\n    // } else {\n    //   hoverItem = $id.split;\n    // }\n  };\n\n  // 一些computed\n  let isSelected = selected === $id && !inside;\n  if (selected && selected[0] === '0') {\n    isSelected = selected.substring(1) === $id && inside;\n  }\n\n  const hoverId = inside ? '0' + $id : $id;\n\n  let overwriteStyle = {\n    backgroundColor: hovering === hoverId ? '#ecf5ff' : '#fff',\n  };\n  if (inside) {\n    overwriteStyle = {\n      ...overwriteStyle,\n      borderColor: '#777',\n      marginLeft: 12,\n      padding: '8px 8px 0 0',\n      backgroundColor: '#fafafa',\n    };\n  } else if ($id === '#') {\n    overwriteStyle = {\n      ...overwriteStyle,\n      borderColor: '#777',\n      padding: 12,\n      height: 'calc(100vh - 80px)',\n      overflow: 'auto',\n      backgroundColor: '#fafafa',\n    };\n  } else if (type === 'object') {\n    overwriteStyle = { ...overwriteStyle, paddingTop: 12 };\n  }\n  if (isSelected) {\n    overwriteStyle = {\n      ...overwriteStyle,\n      outline: '2px solid #409eff',\n      borderColor: '#fff',\n    };\n  }\n\n  if ($id === '#' && inside) return children;\n\n  return (\n    <div\n      style={overwriteStyle}\n      className={`field-wrapper relative`}\n      onClick={handleClick}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n    >\n      {!inside && (\n        <div className=\"absolute top-0 left-0 blue f7\">\n          {schema && schema.$id && schema.$id.substring(1)}\n        </div>\n      )}\n      {children}\n      {isSelected && !inside && $id !== '#' && (\n        <div\n          style={{\n            position: 'absolute',\n            zIndex: 20,\n            bottom: -2,\n            right: -2,\n            height: 24,\n            width: 54,\n            borderTopLeftRadius: 8,\n            background: '#409eff',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n          }}\n        >\n          <div onClick={deleteItem}>\n            <DeleteOutlined\n              style={{\n                height: 16,\n                width: 16,\n                margin: '0 8px 0 12px',\n                color: '#fff',\n              }}\n            />\n          </div>\n          <div onClick={handleItemCopy}>\n            <CopyOutlined\n              style={{ height: 16, width: 16, marginRight: 12, color: '#fff' }}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { useGlobalProps, useStore } from '../hooks';\nimport RenderChildren from './RenderChildren';\nimport RenderField from './RenderField';\nimport Wrapper from './Wrapper';\n\nconst FR = ({ id = '#', preview = false }) => {\n  const { onItemChange, onFlattenChange, flatten } = useStore();\n  const { displayType } = useGlobalProps();\n  const item = flatten[id];\n  if (!item) return null;\n\n  const { schema } = item;\n  const isObj = schema.type === 'object';\n  const isList = schema.type === 'array' && schema.enum === undefined;\n  const isComplex = isObj || isList;\n  let containerClass = `fr-field w-100 ${isComplex ? 'fr-field-complex' : ''}`;\n  let labelClass = 'fr-label mb2';\n  let contentClass = 'fr-content';\n\n  switch (schema.type) {\n    case 'object':\n      if (schema.title) {\n        containerClass += ' ba b--black-20 pt4 pr3 pb2 relative mt3 mb4'; // object的margin bottom由内部元素撑起\n        labelClass += ' fr-label-object bg-white absolute ph2 top-upper left-1'; // fr-label-object 无默认style，只是占位用于使用者样式覆盖\n      }\n      containerClass += ' fr-field-object'; // object的margin bottom由内部元素撑起\n      if (schema.title) {\n        contentClass += ' ml3'; // 缩进\n      }\n      break;\n    case 'array':\n      if (schema.title && !schema.enum) {\n        labelClass += ' mt2 mb3';\n      }\n      break;\n    case 'boolean':\n      if (schema.title) {\n        labelClass += ' ml2';\n        labelClass = labelClass.replace('mb2', 'mb0');\n      }\n      contentClass += ' flex items-center'; // checkbox高度短，需要居中对齐\n      containerClass += ' flex items-center flex-row-reverse justify-end';\n      break;\n    default:\n      if (displayType === 'row') {\n        labelClass = labelClass.replace('mb2', 'mb0');\n      }\n  }\n  // 横排时\n  if (displayType === 'row' && !isComplex && schema.type !== 'boolean') {\n    containerClass += ' flex items-center';\n    labelClass += ' flex-shrink-0 fr-label-row';\n    labelClass = labelClass.replace('mb2', 'mb0');\n    contentClass += ' flex-grow-1 relative';\n  }\n\n  // 横排的checkbox\n  if (displayType === 'row' && schema.type === 'boolean') {\n    contentClass += ' flex justify-end pr2';\n  }\n\n  const fieldProps = {\n    $id: id,\n    item,\n    labelClass,\n    contentClass,\n    isComplex,\n  };\n  const childrenProps = {\n    children: item.children,\n    preview,\n  };\n\n  const childrenElement =\n    item.children && item.children.length > 0 ? (\n      <ul className={`${id === '#' ? 'pl0' : 'pl3'}`}>\n        <RenderChildren {...childrenProps} />\n      </ul>\n    ) : null;\n\n  if (preview) {\n    return (\n      <div className={containerClass}>\n        <RenderField {...fieldProps} />\n        {schema.type === 'object' && childrenElement}\n      </div>\n    );\n  }\n\n  return (\n    <Wrapper $id={id} item={item}>\n      <div className={containerClass}>\n        <RenderField {...fieldProps} />\n        {schema.type === 'object' && (\n          <Wrapper $id={id} item={item} inside>\n            {childrenElement || <div className=\"h2\" />}\n          </Wrapper>\n        )}\n      </div>\n    </Wrapper>\n  );\n};\n\nexport default FR;\n","import React, { useMemo } from 'react';\nimport { useSet } from './hooks';\nimport Left from './Left';\nimport Right from './Right';\nimport {\n  flattenSchema,\n  idToSchema,\n  combineSchema,\n  dataToFlatten,\n  flattenToData,\n} from './utils';\nimport { Ctx, PropsCtx, InnerCtx } from './context';\n// import SCHEMA from './json/basic.json';\nimport FR from './FR';\nimport { Modal, Input } from 'antd';\nimport { widgets } from './widgets/antd';\nimport { Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport 'tachyons';\nimport './App.css';\n\nconst { TextArea } = Input;\n\nconst SCHEMA = {\n  propsSchema: {\n    type: 'object',\n  },\n  uiSchema: {},\n  formData: {},\n};\n\nfunction App() {\n  const [state, setState] = useSet({\n    formData: SCHEMA.formData,\n    schema: SCHEMA,\n    selected: undefined,\n    hovering: undefined,\n    preview: false,\n  });\n\n  const { schema, formData, selected, preview, hovering } = state;\n\n  const onChange = (data) => {\n    setState({ formData: data });\n  };\n\n  const onSchemaChange = (newSchema) => {\n    const result = { ...schema, propsSchema: newSchema };\n    setState({ schema: result });\n  };\n\n  return (\n    <Wrapper\n      schema={schema}\n      formData={formData}\n      onChange={onChange}\n      onSchemaChange={onSchemaChange}\n      displayType=\"row\"\n      showDescIcon\n      widgets={widgets}\n      selected={selected}\n      hovering={hovering}\n      preview={preview}\n      setState={setState}\n      simple={false}\n    />\n  );\n}\n\nexport default App;\n\nexport const Wrapper = ({\n  simple = true,\n  schema,\n  formData,\n  onChange,\n  onSchemaChange,\n  ...globalProps\n}) => {\n  const [local, setLocal] = useSet({ showModal: false });\n  const { setState, preview } = globalProps;\n  const _schema = combineSchema(schema.propsSchema, schema.uiSchema);\n  const flatten = flattenSchema(_schema);\n  const flattenWithData = dataToFlatten(flatten, formData);\n  // console.group('flatten');\n  // console.log(flattenWithData);\n  // console.groupEnd();\n  console.log('render');\n\n  const onFlattenChange = (newFlatten) => {\n    const newSchema = idToSchema(newFlatten);\n    const newData = flattenToData(newFlatten);\n    // console.group('schema');\n    // console.log(flattenWithData, newData);\n    // console.groupEnd();\n    // 判断只有schema变化时才调用，一般需求的用户不需要\n    if (onSchemaChange) {\n      onSchemaChange(newSchema);\n    }\n    onChange(newData);\n  };\n\n  const onItemChange = (key, value) => {\n    flattenWithData[key] = value;\n    onFlattenChange(flattenWithData);\n  };\n\n  const toggleModal = () => setLocal({ showModal: !local.showModal });\n\n  // TODO: flatten是频繁在变的，应该和其他两个函数分开\n  const store = {\n    flatten: flattenWithData,\n    onFlattenChange,\n    onItemChange,\n  };\n\n  let displaySchemaString = '';\n  try {\n    displaySchemaString = JSON.stringify(\n      idToSchema(flattenWithData, '#', true),\n      null,\n      2\n    );\n  } catch (error) {}\n\n  if (simple) {\n    return (\n      <Ctx.Provider value={setState}>\n        <PropsCtx.Provider value={globalProps}>\n          <InnerCtx.Provider value={store}>\n            <FR preview={true} />\n          </InnerCtx.Provider>\n        </PropsCtx.Provider>\n      </Ctx.Provider>\n    );\n  }\n\n  return (\n    <Ctx.Provider value={setState}>\n      <PropsCtx.Provider value={globalProps}>\n        <InnerCtx.Provider value={store}>\n          <div className=\"flex vh-100 overflow-hidden\">\n            <Left />\n            <div className=\"mid-layout pr2\">\n              <div className=\"mv3 mh1\">\n                <Button type=\"primary\" className=\"mr2\" onClick={toggleModal}>\n                  导出schema\n                </Button>\n                <Button\n                  onClick={() => {\n                    setState({ preview: !preview, selected: '#' });\n                  }}\n                >\n                  {preview ? '开始编辑' : '最终展示'}\n                </Button>\n              </div>\n              <FR preview={preview} />\n            </div>\n            <Right />\n            <Modal\n              visible={local.showModal}\n              onOk={toggleModal}\n              onCancel={toggleModal}\n            >\n              <div className=\"mt3\">\n                <TextArea\n                  style={{ fontSize: 12 }}\n                  value={displaySchemaString}\n                  autoSize={{ minRows: 10, maxRows: 30 }}\n                />\n              </div>\n            </Modal>\n          </div>\n        </InnerCtx.Provider>\n      </PropsCtx.Provider>\n    </Ctx.Provider>\n  );\n};\n\nWrapper.defaultProps = {\n  labelWidth: 120,\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}