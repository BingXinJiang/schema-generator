{"version":3,"sources":["context.js","hooks.js","Left/elementList.js","utils.js","Left/Element.js","Left/index.js","components/rangeHoc.jsx","widgets/antd/dateRange.js","components/foldIcon.jsx","components/descList.jsx","widgets/antd/list.jsx","components/multiSelectHoc.jsx","components/numberHoc.jsx","widgets/antd/multiSelect.js","widgets/antd/number.js","components/selectHoc.jsx","widgets/antd/select.js","widgets/antd/slider.js","widgets/antd/textarea.js","components/previewContent.jsx","widgets/antd/input.js","widgets/antd/index.js","widgets/antd/checkbox.js","widgets/antd/checkboxes.js","widgets/antd/color.js","widgets/antd/date.js","components/dateHoc.jsx","widgets/antd/listEditor.js","widgets/antd/map.js","widgets/antd/radio.js","components/radioHoc.jsx","widgets/antd/switch.js","widgets/antd/upload.js","widgets/antd/idInput.js","widgets/antd/percentSlider.js","mapping.js","Right/ItemSettings.js","Right/GlobalSettings.js","Right/index.js","FR/RenderChildren.js","FR/RenderField.js","FR/Wrapper.js","FR/index.js","FRWrapper.js","App.js","index.js"],"names":["Ctx","createContext","PropsCtx","InnerCtx","useGlobal","useContext","useGlobalProps","useStore","useSet","initState","useReducer","state","newState","action","payload","setState","actionName","commonSettings","$id","title","description","type","max","hideNumber","default","result","text","name","widget","schema","setting","properties","allowClear","addonBefore","addonAfter","prefix","suffix","minLength","maxLength","pattern","placeholder","format","autoSize","row","enum","enumNames","mode","items","minItems","maxItems","foldable","inputName","selectName","dateName","listName","rangeName","map","list","item","getFormat","dateFormat","isEmpty","obj","Object","keys","length","getChildren","schemaSubs","isFunction","func","substring","flattenSchema","parent","_schema","deepClone","children","isObj","isList","entries","forEach","key","value","uniqueName","push","getKeyFromUniqueId","uniqueId","arr","split","changeKeyFromUniqueId","join","idToSchema","flatten","id","final","_item","child","childId","error","console","log","dataToFlatten","data","branchData","idString","idConnectedByDots","filter","string","a","JSON","stringify","Function","getDataById","getSaveNumber","searchStr","localStorage","getItem","parse","Element","useDrag","dragItem","nanoid","end","monitor","getDropResult","collect","isDragging","dragRef","setGlobal","selected","onFlattenChange","ref","className","onClick","newId","_selected","newFlatten","oldId","newItem","undefined","_name","idArr","pop","siblings","idx","findIndex","x","splice","addItem","allSettings","elements","advancedElements","layouts","saves","Left","saveList","setSaveList","rest","useEffect","ele","toString","RangePicker","DatePicker","FoldIcon","fold","width","height","fill","style","viewBox","d","DescriptionList","index","getDescription","slice","paddingRight","i","titles","values","valueList","t","getEnumValue","enums","Array","isArray","count","indexOf","v","String","DragHandle","SortableHandle","listItem","toggleFold","props","toggleFoldItem","this","p","descProps","options","readonly","formData","rootValue","canFold","hideDelete","itemButtons","_isFunction","evaluateString","setClass","displayType","position","top","right","FrButton","icon","onChange","btn","window","callback","React","Component","SortableItem","SortableElement","fieldList","handleAddClick","addUnfoldItem","foldList","extraButtons","buttons","canAdd","_","lastIndex","SortableList","SortableContainer","handleSort","oldIndex","newIndex","arrayMove","len","distance","useDragHandle","helperClass","shouldCancelStart","e","toElement","onSortEnd","iconName","IconComponent","Icons","defaultProps","MultiComponent","NumberComponent","multiSelectHoc","Select","Option","invalid","borderColor","_value","disabled","val","dangerouslySetInnerHTML","__html","numberHoc","InputNumber","min","step","SelectComponent","selectHoc","option","SliderWithNumber","renderNumber","flexGrow","marginRight","TextArea","Input","src","alt","previewNode","content","previewContent","placement","PictureOutlined","widgets","checkbox","target","checked","checkboxes","Group","color","animation","date","DateComponent","TimePicker","defaultObj","moment","placeholderObj","dateParams","showTime","dateHoc","dateRange","RangeComponent","defaultValue","datePrams","rangeHoc","input","listEditor","size","DeleteOutlined","PlusCircleOutlined","multiSelect","number","radio","RadioComponent","RadioGroup","radioHoc","Radio","select","slider","switch","defaultChecked","textarea","ui","rows","upload","enctype","withCredentials","info","file","status","message","success","response","url","onRemove","UploadOutlined","href","rel","IdInput","PercentSlider","numberValue","endsWith","Number","isNaN","handleChange","newNumber","formatter","parser","replace","tipFormatter","mapping","array","boolean","integer","object","getWidgetName","_mapping","found","some","ALL","ItemSettings","itemSelected","widgetName","onItemChange","settingSchema","settingData","schemaNow","find","propsSchema","_widgets","idInput","percentSlider","overflow","FRWrapper","newSchema","showDescIcon","preview","globalProps","hovering","SCHEMA","TabPane","Tabs","Right","showRight","showItemSettings","toggleRight","ToggleIcon","padding","RightOutlined","HideRightArrow","defaultActiveKey","tab","RenderChildren","FRProps","RenderField","str","num","labelClass","contentClass","isComplex","showValidate","labelWidth","required","isRequired","effectiveLabelWidth","getParentProps","propName","parentSchema","labelStyle","match","customWidget","Widget","contentStyle","marginLeft","usefulWidgetProps","hidden","aria-label","Wrapper","inside","useState","setPosition","boxRef","useRef","dragPreview","useDrop","accept","drop","didDrop","dragId","dropId","_position","_dragItem","dropItem","dropParent","newParentId","dragParent","newChildren","hover","isOver","shallow","hoverBoundingRect","current","getBoundingClientRect","hoverMiddleY","bottom","hoverClientY","getSourceClientOffset","y","canDrop","isActive","dropRef","isSelected","overwriteStyle","backgroundColor","opacity","paddingTop","boxShadow","outline","shownId","stopPropagation","onMouseEnter","onMouseLeave","left","cursor","DragOutlined","zIndex","borderTopLeftRadius","background","display","justifyContent","alignItems","newSelect","margin","copyItem","CopyOutlined","FR","column","containerClass","columnStyle","fieldProps","childrenProps","childrenElement","simple","onSchemaChange","showModal","showModal2","showModal3","schemaForImport","local","setLocal","searchKey","readSearchFromStorage","setData","setSearchWithStorage","search","setItem","useStorageState","saveNameRef","combineSchema","uiSchema","propList","newList","isArr","newItems","newObj","s","topLevelUi","flattenWithData","newData","flattenToData","ids","childrenIds","lengthOfId","lengthOfChild","c","cData","cKey","toggleModal","toggleModal2","toggleModal3","displaySchemaString","store","Provider","visible","onOk","copyTOClipboard","onCancel","okText","cancelText","fontSize","minRows","maxRows","App","Root","DndProvider","backend","HTML5Backend","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bc930029.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nexport const Ctx = createContext(() => {});\nexport const PropsCtx = createContext({});\nexport const InnerCtx = createContext({});\n","import { useReducer, useContext, useRef, useEffect, useState } from 'react';\nimport { Ctx, InnerCtx, PropsCtx } from './context';\n\n// 使用最顶层组件的 setState\nexport const useGlobal = () => {\n  return useContext(Ctx);\n};\n\nexport const useGlobalProps = () => {\n  return useContext(PropsCtx);\n};\n\nexport const useStore = () => {\n  return useContext(InnerCtx);\n};\n\n// const logger = reducer => {\n//   const reducerWithLogger = (state, action, actionName = 'Action') => {\n//     console.group(actionName);\n//     console.log('%cState:', 'color: #9E9E9E; font-weight: 500;', state);\n//     console.log('%cAction:', 'color: #00A7F7; font-weight: 500;', action);\n//     console.log('%cNext:', 'color: #47B04B; font-weight: 500;', {\n//       ...state,\n//       ...action,\n//     });\n//     console.groupEnd();\n//     return reducer(state, action);\n//   };\n//   return reducerWithLogger;\n// };\n\n// export default logger;\n\n// 类似于class component的setState\nexport const useSet = initState => {\n  const [state, setState] = useReducer((state, newState) => {\n    let action = newState;\n    if (typeof newState === 'function') {\n      action = action(state);\n    }\n    if (newState.action && newState.payload) {\n      action = newState.payload;\n      if (typeof action === 'function') {\n        action = action(state);\n      }\n    }\n    const result = { ...state, ...action };\n    // if (newState.action !== 'no-log') {\n    //   console.group(newState.action || 'action'); // TODO: give it a name\n    //   console.log('%cState:', 'color: #9E9E9E; font-weight: 700;', state);\n    //   console.log('%cAction:', 'color: #00A7F7; font-weight: 700;', action);\n    //   console.log('%cNext:', 'color: #47B04B; font-weight: 700;', result);\n    //   console.groupEnd();\n    // } else {\n    // }\n    return result;\n  }, initState);\n  const setStateWithActionName = (state, actionName) => {\n    setState(state);\n  };\n  return [state, setStateWithActionName];\n};\n\n// start: true 开始、false 暂停\nexport function useInterval(callback, delay, start) {\n  const savedCallback = useRef();\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  const id = useRef();\n  useEffect(() => {\n    if (!start) {\n      return;\n    }\n    function tick() {\n      savedCallback && savedCallback.current && savedCallback.current();\n    }\n    tick();\n    if (delay !== null) {\n      id.current = setInterval(tick, delay);\n      return () => clearInterval(id.current);\n    }\n  }, [delay, start]);\n  return () => clearInterval(id.current);\n}\n\nexport function usePrevious(value) {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef();\n\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n\nexport const useShowOnce = localKey => {\n  // 从 localStorage 读取 key 值\n  const [show, setShow] = useState(false);\n  let localStr;\n  try {\n    localStr = localStorage.getItem(localKey);\n  } catch (error) {}\n  if (!localStr) {\n    setShow(true);\n    localStorage.setItem(localKey, JSON.stringify(true));\n  }\n  return show;\n};\n\nexport const useModal = () => {\n  const [show, setShow] = useState(false);\n  const toggle = () => setShow(!show);\n  return [show, toggle];\n};\n\nexport const useWindowState = initState => {\n  const [state, setState] = useState(initState);\n  return [state, setState];\n};\n\nexport const useStorageState = (initState = {}, searchKey = 'SAVES') => {\n  // 从 localStorage 读取 search 值\n  const readSearchFromStorage = () => {\n    const searchStr = localStorage.getItem(searchKey);\n    if (searchStr) {\n      try {\n        return JSON.parse(searchStr);\n      } catch (error) {\n        return initState;\n      }\n    }\n    return initState;\n  };\n  const [data, setData] = useState(readSearchFromStorage());\n  // 存储搜索值到 localStorage\n  const setSearchWithStorage = search => {\n    setData(search);\n    localStorage.setItem(searchKey, JSON.stringify(search));\n  };\n  return [data, setSearchWithStorage];\n};\n","// 只需写配置，方便可扩展\nconst commonSettings = {\n  $id: {\n    title: 'ID',\n    description: '数据存储的名称，请写英文，不能为空',\n    type: 'string',\n    'ui:widget': 'idInput',\n  },\n  title: {\n    title: '标题',\n    type: 'string',\n  },\n  description: {\n    title: '说明',\n    type: 'string',\n  },\n  'ui:width': {\n    title: '元素宽度',\n    type: 'string',\n    'ui:widget': 'percentSlider',\n  },\n  'ui:labelWidth': {\n    title: '标签宽度',\n    description: '默认值120',\n    type: 'number',\n    'ui:widget': 'slider',\n    max: 400,\n    'ui:options': {\n      hideNumber: true,\n    },\n  },\n  default: {\n    title: '默认值',\n    type: 'string',\n  },\n  'ui:readonly': {\n    title: '置灰',\n    type: 'boolean',\n  },\n};\n\n// widget 用于schema中每个元素对应的右侧配置知道用哪个setting\n\nconst elements = [\n  {\n    text: '输入框',\n    name: 'input',\n    widget: 'input',\n    schema: {\n      title: '输入框',\n      type: 'string',\n    },\n    setting: {\n      'ui:options': {\n        title: '选项',\n        type: 'object',\n        'ui:labelWidth': 80,\n        properties: {\n          allowClear: {\n            title: '是否带清除按钮',\n            description: '填写内容后才会出现x哦',\n            type: 'boolean',\n          },\n          addonBefore: {\n            title: '前tab',\n            type: 'string',\n          },\n          addonAfter: {\n            title: '后tab',\n            type: 'string',\n          },\n          prefix: {\n            title: '前缀',\n            type: 'string',\n          },\n          suffix: {\n            title: '后缀',\n            type: 'string',\n          },\n        },\n      },\n      minLength: {\n        title: '最短字数',\n        type: 'number',\n      },\n      maxLength: {\n        title: '最长字数',\n        type: 'number',\n      },\n      pattern: {\n        title: '校验正则表达式',\n        type: 'string',\n        'ui:options': {\n          placeholder: '填写正则表达式',\n        },\n      },\n    },\n  },\n  {\n    text: '大输入框',\n    name: 'textarea',\n    widget: 'textarea',\n    schema: {\n      title: '编辑框',\n      type: 'string',\n      format: 'textarea',\n    },\n    setting: {\n      'ui:options': {\n        title: '选项',\n        type: 'object',\n        'ui:labelWidth': 80,\n        properties: {\n          autoSize: {\n            title: '高度自动',\n            type: 'boolean',\n          },\n          row: {\n            title: '指定高度',\n            type: 'number',\n          },\n        },\n      },\n      minLength: {\n        title: '最短字数',\n        type: 'number',\n      },\n      maxLength: {\n        title: '最长字数',\n        type: 'number',\n      },\n      pattern: {\n        title: '校验正则表达式',\n        type: 'string',\n        'ui:options': {\n          placeholder: '填写正则表达式',\n        },\n      },\n    },\n  },\n\n  {\n    text: '日期选择',\n    name: 'date',\n    widget: 'date',\n    schema: {\n      title: '日期选择',\n      type: 'string',\n      format: 'date',\n    },\n    setting: {\n      format: {\n        title: '格式',\n        type: 'string',\n        enum: ['dateTime', 'date', 'time'],\n        enumNames: ['日期时间', '日期', '时间'],\n      },\n    },\n  },\n  {\n    text: '数字输入框',\n    name: 'number',\n    widget: 'number',\n    schema: {\n      title: '数字输入框',\n      type: 'number',\n    },\n    setting: {},\n  },\n  {\n    text: '是否选择',\n    name: 'checkbox',\n    widget: 'checkbox',\n    schema: {\n      title: '是否选择',\n      type: 'boolean',\n    },\n    setting: {\n      default: {\n        title: '默认是否',\n        type: 'boolean',\n      },\n    },\n  },\n  {\n    text: '是否switch',\n    name: 'checkbox',\n    widget: 'switch',\n    schema: {\n      title: '是否选择',\n      type: 'boolean',\n      'ui:widget': 'switch',\n    },\n    setting: {\n      default: {\n        title: '默认是否',\n        type: 'boolean',\n      },\n    },\n  },\n  {\n    text: '下拉单选',\n    name: 'select',\n    widget: 'select',\n    schema: {\n      title: '单选',\n      type: 'string',\n      enum: ['a', 'b', 'c'],\n      enumNames: ['早', '中', '晚'],\n    },\n    setting: {\n      enum: {\n        title: '选项字段',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n      enumNames: {\n        title: '选项名称',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n    },\n  },\n  {\n    text: '点击单选',\n    name: 'radio',\n    widget: 'radio',\n    schema: {\n      title: '单选',\n      type: 'string',\n      enum: ['a', 'b', 'c'],\n      enumNames: ['早', '中', '晚'],\n      'ui:widget': 'radio',\n    },\n    setting: {\n      enum: {\n        title: '选项字段',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n      enumNames: {\n        title: '选项名称',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n    },\n  },\n  {\n    text: '下拉多选',\n    name: 'multiSelect',\n    widget: 'multiSelect',\n    schema: {\n      title: '多选',\n      description: '下拉多选',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      enum: ['A', 'B', 'C', 'D'],\n      enumNames: ['杭州', '武汉', '湖州', '贵阳'],\n      'ui:widget': 'multiSelect',\n    },\n    setting: {\n      enum: {\n        title: '选项字段',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n      enumNames: {\n        title: '选项名称',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n    },\n  },\n  {\n    text: '点击多选',\n    name: 'checkboxes',\n    widget: 'checkboxes',\n    schema: {\n      title: '多选',\n      description: '点击多选',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      enum: ['A', 'B', 'C', 'D'],\n      enumNames: ['杭州', '武汉', '湖州', '贵阳'],\n    },\n    setting: {\n      enum: {\n        title: '选项字段',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n      enumNames: {\n        title: '选项名称',\n        type: 'array',\n        enum: [],\n        'ui:widget': 'select',\n        'ui:options': {\n          mode: 'tags',\n        },\n      },\n    },\n  },\n];\n\nconst advancedElements = [\n  {\n    text: '日期范围',\n    name: 'dateRange',\n    widget: 'dateRange',\n    schema: {\n      title: '日期范围',\n      type: 'range',\n      format: 'dateTime',\n      'ui:options': {\n        placeholder: ['开始时间', '结束时间'],\n      },\n    },\n    setting: {\n      format: {\n        title: '类型',\n        type: 'string',\n        enum: ['dateTime', 'date'],\n        enumNames: ['日期时间', '日期'],\n      },\n    },\n  },\n  {\n    text: '数字（slider）',\n    name: 'slider',\n    widget: 'slider',\n    schema: {\n      title: '带滑动条',\n      type: 'number',\n      'ui:widget': 'slider',\n    },\n    setting: {},\n  },\n  {\n    text: '图片展示',\n    name: 'image',\n    // widget: 'input',\n    schema: {\n      title: '图片展示',\n      type: 'string',\n      format: 'image',\n    },\n    setting: {},\n  },\n  {\n    text: '颜色选择',\n    name: 'color',\n    widget: 'color',\n    schema: {\n      title: '颜色选择',\n      type: 'string',\n      format: 'color',\n    },\n    setting: {},\n  },\n];\n\nconst layouts = [\n  {\n    text: 'object',\n    name: 'object',\n    schema: {\n      title: '对象',\n      type: 'object',\n      properties: {},\n    },\n    widget: 'map',\n    setting: {},\n  },\n  {\n    text: '列表',\n    name: 'list',\n    widget: 'list',\n    schema: {\n      title: '数组',\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {},\n      },\n    },\n    setting: {\n      minItems: {\n        title: '最小长度',\n        type: 'number',\n      },\n      maxItems: {\n        title: '最大长度',\n        type: 'number',\n      },\n      'ui:options': {\n        title: '选项',\n        type: 'object',\n        properties: {\n          foldable: {\n            title: '是否可折叠',\n            type: 'boolean',\n          },\n        },\n      },\n    },\n  },\n];\n\nconst saves = [\n  {\n    text: '复杂结构样例',\n    name: 'something',\n    schema: {\n      title: '对象',\n      description: '这是一个对象类型',\n      type: 'object',\n      properties: {\n        inputName: {\n          title: '简单输入框',\n          type: 'string',\n        },\n        selectName: {\n          title: '单选',\n          type: 'string',\n          enum: ['a', 'b', 'c'],\n          enumNames: ['早', '中', '晚'],\n        },\n        dateName: {\n          title: '时间选择',\n          type: 'string',\n          format: 'date',\n        },\n        listName: {\n          title: '对象数组',\n          description: '对象数组嵌套功能',\n          type: 'array',\n          items: {\n            type: 'object',\n            properties: {\n              rangeName: {\n                title: '日期/时间范围',\n                type: 'range',\n                format: 'date',\n                'ui:options': {\n                  placeholder: ['开始日期', '结束日期'],\n                },\n              },\n            },\n          },\n        },\n      },\n    },\n  },\n];\n\nlet result = [elements, advancedElements, layouts, saves];\n\nresult = result.map(list =>\n  list.map(item => ({\n    ...item,\n    setting: { ...commonSettings, ...item.setting },\n  }))\n);\n\nexport default result;\n","import nanoid from 'nanoid';\nimport deepClone from 'clone';\n\n// 克隆对象\nexport function clone(data) {\n  try {\n    return JSON.parse(JSON.stringify(data));\n  } catch (e) {\n    return data;\n  }\n}\n\n// '3' => true, 3 => true, undefined => false\nexport function isLooselyNumber(num) {\n  if (typeof num === 'number') return true;\n  if (typeof num === 'string') {\n    return !Number.isNaN(Number(num));\n  }\n  return false;\n}\n\nexport function isCssLength(str) {\n  if (typeof str !== 'string') return false;\n  return str.match(/^([0-9])*(%|px|rem|em)$/i);\n}\n\n// 深度对比\nexport function isDeepEqual(param1, param2) {\n  if (param1 === undefined && param2 === undefined) return true;\n  else if (param1 === undefined || param2 === undefined) return false;\n  else if (param1.constructor !== param2.constructor) return false;\n\n  if (param1.constructor === Array) {\n    if (param1.length !== param2.length) return false;\n    for (let i = 0; i < param1.length; i++) {\n      if (param1[i].constructor === Array || param1[i].constructor === Object) {\n        if (!isDeepEqual(param1[i], param2[i])) return false;\n      } else if (param1[i] !== param2[i]) return false;\n    }\n  } else if (param1.constructor === Object) {\n    if (Object.keys(param1).length !== Object.keys(param2).length) return false;\n    for (let i = 0; i < Object.keys(param1).length; i++) {\n      const key = Object.keys(param1)[i];\n      if (\n        param1[key] &&\n        typeof param1[key] !== 'number' &&\n        (param1[key].constructor === Array ||\n          param1[key].constructor === Object)\n      ) {\n        if (!isDeepEqual(param1[key], param2[key])) return false;\n      } else if (param1[key] !== param2[key]) return false;\n    }\n  } else if (param1.constructor === String || param1.constructor === Number) {\n    return param1 === param2;\n  }\n  return true;\n}\n\n// 时间组件\nexport function getFormat(format) {\n  let dateFormat;\n  switch (format) {\n    case 'date':\n      dateFormat = 'YYYY-MM-DD';\n      break;\n    case 'time':\n      dateFormat = 'HH:mm:ss';\n      break;\n    default:\n      // dateTime\n      dateFormat = 'YYYY-MM-DD HH:mm:ss';\n  }\n  return dateFormat;\n}\n\nexport function hasRepeat(list) {\n  return list.find(\n    (x, i, self) =>\n      i !== self.findIndex(y => JSON.stringify(x) === JSON.stringify(y))\n  );\n}\n\n// ----------------- schema 相关\n\n// 合并propsSchema和UISchema。由于两者的逻辑相关性，合并为一个大schema能简化内部处理\nexport function combineSchema(propsSchema = {}, uiSchema = {}) {\n  const propList = getChildren(propsSchema);\n  const newList = propList.map(p => {\n    const { name } = p;\n    const { type, enum: options, properties, items } = p.schema;\n    const isObj = type === 'object' && properties;\n    const isArr = type === 'array' && items && !options; // enum + array 代表的多选框，没有sub\n    const ui = name && uiSchema[p.name];\n    if (!ui) {\n      return p;\n    }\n    // 如果是list，递归合并items\n    if (isArr) {\n      const newItems = combineSchema(items, ui.items || {});\n      return { ...p, schema: { ...p.schema, ...ui, items: newItems } };\n    }\n    // object递归合并整个schema\n    if (isObj) {\n      const newSchema = combineSchema(p.schema, ui);\n      return { ...p, schema: newSchema };\n    }\n    return { ...p, schema: { ...p.schema, ...ui } };\n  });\n\n  const newObj = {};\n  newList.forEach(s => {\n    newObj[s.name] = s.schema;\n  });\n\n  const topLevelUi = {};\n  Object.keys(uiSchema).forEach(key => {\n    if (typeof key === 'string' && key.substring(0, 3) === 'ui:') {\n      topLevelUi[key] = uiSchema[key];\n    }\n  });\n  if (isEmpty(newObj)) {\n    return { ...propsSchema, ...topLevelUi };\n  }\n  return { ...propsSchema, ...topLevelUi, properties: newObj };\n}\n\nfunction isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n}\n\n// 获得propsSchema的children\nfunction getChildren(schema) {\n  if (!schema) return [];\n  const {\n    // object\n    properties,\n    // array\n    items,\n    type,\n  } = schema;\n  if (!properties && !items) {\n    return [];\n  }\n  let schemaSubs = {};\n  if (type === 'object') {\n    schemaSubs = properties;\n  }\n  if (type === 'array') {\n    schemaSubs = items;\n  }\n  return Object.keys(schemaSubs).map(name => ({\n    schema: schemaSubs[name],\n    name,\n  }));\n}\n\n// 合并多个schema树，比如一个schema的树节点是另一个schema\nexport function combine() {}\n\n// 代替eval的函数\nexport const parseString = string =>\n  Function('\"use strict\";return (' + string + ')')();\n\n// 解析函数字符串值\nexport const evaluateString = (string, formData, rootValue) =>\n  Function(`\"use strict\";\n    const rootValue = ${JSON.stringify(rootValue)};\n    const formData = ${JSON.stringify(formData)};\n    return (${string})`)();\n\n// 判断schema的值是是否是“函数”\n// JSON无法使用函数值的参数，所以使用\"{{...}}\"来标记为函数，也可使用@标记，不推荐。\nexport function isFunction(func) {\n  if (typeof func === 'function') {\n    return true;\n  }\n  if (typeof func === 'string' && func.substring(0, 1) === '@') {\n    return func.substring(1);\n  }\n  if (\n    typeof func === 'string' &&\n    func.substring(0, 2) === '{{' &&\n    func.substring(func.length - 2, func.length) === '}}'\n  ) {\n    return func.substring(2, func.length - 2);\n  }\n  return false;\n}\n\n// 判断schema中是否有属性值是函数表达式\nexport function isFunctionSchema(schema) {\n  return Object.keys(schema).some(key => {\n    if (typeof schema[key] === 'function') {\n      return true;\n    } else if (typeof schema[key] === 'string') {\n      return isFunction(schema[key]);\n    } else if (typeof schema[key] === 'object') {\n      return isFunctionSchema(schema[key]);\n    } else {\n      return false;\n    }\n  });\n}\n\n// 后面三个参数都是内部递归使用的，将schema的树形结构扁平化成一层, 每个item的结构\n// {\n//   parent: '#',\n//   schema: ...,\n//   children: []\n// }\nexport function flattenSchema(schema, name = '#', parent, result = {}) {\n  const _schema = deepClone(schema);\n  if (!_schema.$id) {\n    _schema.$id = name; // 给生成的schema添加一个唯一标识，方便从schema中直接读取\n  }\n  const children = [];\n  const isObj = _schema.type === 'object' && _schema.properties;\n  const isList =\n    _schema.type === 'array' && _schema.items && _schema.items.properties;\n  if (isObj) {\n    Object.entries(_schema.properties).forEach(([key, value]) => {\n      const uniqueName = name + '/' + key;\n      children.push(uniqueName);\n      flattenSchema(value, uniqueName, name, result);\n    });\n    delete _schema.properties;\n  }\n  if (isList) {\n    Object.entries(_schema.items.properties).forEach(([key, value]) => {\n      const uniqueName = name + '/' + key;\n      children.push(uniqueName);\n      flattenSchema(value, uniqueName, name, result);\n    });\n    delete _schema.items.properties;\n  }\n  if (_schema.type) {\n    result[name] = { parent, schema: _schema, children };\n  }\n  return result;\n}\n\nexport const getKeyFromUniqueId = (uniqueId = '#') => {\n  const arr = uniqueId.split('/');\n  return arr[arr.length - 1];\n};\n\nexport const changeKeyFromUniqueId = (uniqueId = '#', key = 'something') => {\n  const arr = uniqueId.split('/');\n  if (typeof key === 'string' || typeof key === 'number') {\n    arr[arr.length - 1] = key;\n  }\n  return arr.join('/');\n};\n\nconst copyFlattenItem = _item => {\n  return {\n    parent: _item.parent,\n    schema: { ..._item.schema },\n    data: _item.data,\n    children: _item.children,\n  };\n};\n\n// final = true 用于最终的导出的输出\n// 几种特例：\n// 1. 删除时值删除了item，没有删除和parent的关联，也没有删除children，所以要在解析这步来兜住 (所有的解析都是)\n// 2. 修改$id的情况, 修改的是schema内的$id, 解析的时候要把schema.$id 作为真正的id (final = true的解析)\nexport function idToSchema(flatten, id = '#', final = false) {\n  let schema = {};\n  const _item = flatten[id];\n  const item = deepClone(_item);\n  if (item) {\n    schema = { ...item.schema };\n    // 最终输出去掉 $id\n    if (final) {\n      schema.$id && delete schema.$id;\n    }\n    if (item.children.length > 0) {\n      item.children.forEach(child => {\n        let childId = child;\n        // TODO: 这个情况会出现吗？return会有问题吗？\n        if (!flatten[child]) {\n          return;\n        }\n        // 最终输出将所有的 key 值改了\n        try {\n          if (final) {\n            childId = flatten[child].schema.$id;\n          }\n        } catch (error) {\n          console.log('catch', error);\n        }\n        const key = getKeyFromUniqueId(childId);\n        if (schema.type === 'object') {\n          if (!schema.properties) {\n            schema.properties = {};\n          }\n          schema.properties[key] = idToSchema(flatten, child, final);\n        }\n        if (\n          schema.type === 'array' &&\n          schema.items &&\n          schema.items.type === 'object'\n        ) {\n          if (!schema.items.properties) {\n            schema.items.properties = {};\n          }\n          schema.items.properties[key] = idToSchema(flatten, child, final);\n        }\n      });\n    }\n  }\n  return schema;\n}\n\n// 删除对应id的schema（以及所有它的子schema）\nexport const deleteSchema = (id, schema) => {\n  const flatten = flattenSchema(schema);\n  if (id in flatten) {\n    delete flatten[id];\n  }\n  return idToSchema(flatten);\n};\n\n// 复制对应id的schema\n// export const copySchema = (id, schema) => {\n//   const flatten = flattenSchema(schema);\n//   let newId = id + '$$' + nanoid(10);\n//   if (id && typeof id === 'string' && id.split('$$').length > 1) {\n//     newId = id.split('$$')[0] + '$$' + nanoid(10);\n//   }\n//   if (id in flatten) {\n//     // 将创建的新id注入到parent的children array\n//     const parent = flatten[id].parent;\n//     if (parent && parent in flatten) {\n//       const children = flatten[parent].children;\n//       try {\n//         const idx = children.findIndex((x) => x === id);\n//         children.splice(idx + 1, 0, newId);\n//       } catch (error) {\n//         console.error(error.message);\n//       }\n//     }\n\n//     try {\n//       // 简单的实现一下拷贝\n//       flatten[newId] = {\n//         parent: flatten[id].parent,\n//         schema: { ...flatten[id].schema },\n//         children: flatten[id].children,\n//       };\n//       flatten[newId].schema.$id = newId;\n//     } catch (error) {\n//       console.error(error.message);\n//     }\n//   }\n//   return [idToSchema(flatten), newId];\n// };\n\nexport const copyItem = (flatten, $id) => {\n  let newFlatten = { ...flatten };\n  try {\n    const item = flatten[$id];\n    const newId = $id + nanoid(6);\n    const siblings = newFlatten[item.parent].children;\n    const idx = siblings.findIndex(x => x === $id);\n    siblings.splice(idx + 1, 0, newId);\n    newFlatten[newId] = deepClone(newFlatten[$id]);\n    newFlatten[newId].schema.$id = newId;\n    return [newFlatten, newId];\n  } catch (error) {\n    console.error(error, 'catcherror');\n    return [flatten, $id];\n  }\n};\n\n// schema的某个id位置后面添加一个名字是key的subSchema，生成新的schema\n// TODO: 如果没有任何选中，或者选中的是object，逻辑要变\n\nexport const addSchema = ({ id, key, schema, subSchema }) => {\n  const flatten = flattenSchema(schema);\n  let newId = changeKeyFromUniqueId(id, key) + '$$' + nanoid(10);\n  if (id in flatten) {\n    // 生成新id，并将其放置于parent节点的children属性中\n    const parent = flatten[id].parent;\n    if (parent && parent in flatten) {\n      const children = flatten[parent].children;\n      try {\n        const idx = children.findIndex(x => x === id);\n        children.splice(idx + 1, 0, newId);\n      } catch (error) {\n        console.error(error.message);\n      }\n    }\n    // 生成新节点\n    try {\n      flatten[newId] = {\n        parent: flatten[id].parent,\n        schema: subSchema,\n        children: [],\n      };\n      flatten[newId].schema.$id = newId;\n    } catch (error) {\n      console.error(error.message);\n    }\n  }\n  // 将id也返回，用于ui展示显示\n  return [idToSchema(flatten), newId];\n};\n\n// Left 点击添加 item\nexport const addItem = ({ selected, name, schema, flatten }) => {\n  let _selected = selected || '#';\n  let newId;\n  // string第一个是0，说明点击了object、list的里侧\n  if ((_selected && _selected[0] === '0') || _selected === '#') {\n    const newFlatten = { ...flatten };\n    try {\n      let oldId = _selected.substring(1);\n      newId = oldId + '/' + name + '_' + nanoid(6);\n      if (_selected === '#') {\n        newId = '#/' + name + '_' + nanoid(6);\n        oldId = '#';\n      }\n      const siblings = newFlatten[oldId].children;\n      siblings.push(newId);\n      const newItem = {\n        parent: oldId,\n        schema: { ...schema, $id: newId },\n        data: undefined,\n        children: [],\n      };\n      newFlatten[newId] = newItem;\n    } catch (error) {\n      console.error(error, 'catch');\n    }\n    return { newId, newFlatten };\n  }\n  let _name = name + '_' + nanoid(6);\n  const idArr = selected.split('/');\n  idArr.pop();\n  idArr.push(_name);\n  newId = idArr.join('/');\n  const newFlatten = { ...flatten };\n  try {\n    const item = newFlatten[selected];\n    const siblings = newFlatten[item.parent].children;\n    const idx = siblings.findIndex(x => x === selected);\n    siblings.splice(idx + 1, 0, newId);\n    const newItem = {\n      parent: item.parent,\n      schema: { ...schema, $id: newId },\n      data: undefined,\n      children: [],\n    };\n    newFlatten[newId] = newItem;\n  } catch (error) {\n    console.error(error);\n  }\n  return { newId, newFlatten };\n};\n\n// position 代表 drop 在元素的哪里: 'up' 上 'down' 下 'inside' 内部\nexport const dropItem = ({ dragId, dragItem, dropId, position, flatten }) => {\n  const _position = dropId === '#' ? 'inside' : position;\n  let newFlatten = { ...flatten };\n  // 会动到三块数据，dragItem, dragParent, dropParent. 其中dropParent可能就是dropItem（inside的情况）\n  if (dragItem) {\n    newFlatten[dragId] = dragItem;\n  }\n  const _dragItem = dragItem || newFlatten[dragId];\n\n  const dropItem = newFlatten[dropId];\n  let dropParent = dropItem;\n  if (_position !== 'inside') {\n    const parentId = dropItem.parent;\n    dropParent = newFlatten[parentId];\n  }\n  // TODO: 这块的体验，现在这样兜底了，但是drag起一个元素了，应该让原本变空\n  if (dropId.indexOf(dragId) > -1) {\n    return newFlatten;\n  }\n\n  let newId = dragId;\n  try {\n    const newParentId = dropParent.schema.$id;\n    newId = newId.replace(_dragItem.parent, newParentId);\n  } catch (error) {}\n\n  // dragParent 的 children 删除 dragId\n  try {\n    const dragParent = newFlatten[_dragItem.parent];\n    const idx = dragParent.children.indexOf(dragId);\n    if (idx > -1) {\n      dragParent.children.splice(idx, 1);\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  try {\n    // dropParent 的 children 添加 dragId\n    const newChildren = dropParent.children || []; // 要考虑children为空，inside的情况\n    const idx = newChildren.indexOf(dropId);\n    switch (_position) {\n      case 'up':\n        newChildren.splice(idx, 0, dragId);\n        break;\n      case 'down':\n        newChildren.splice(idx + 1, 0, dragId);\n        break;\n      default:\n        // inside 作为 default 情况\n        newChildren.push(dragId);\n        break;\n    }\n    // console.log(newChildren, dropParent, 'dropParent');\n    dropParent.children = newChildren;\n  } catch (error) {\n    console.error(error);\n  }\n\n  _dragItem.parent = dropParent.$id;\n  return [newFlatten, newId];\n};\n// TODO: 是不是要考虑如果drag前，已经有id和schema.id不一致的情况，会不会有问题？\n\n// export const changeSubSchema = ({ id, schema, subSchema }) => {\n//   const flatten = flattenSchema(schema);\n//   if (id in flatten) {\n//     const oldSchema = flatten[id];\n//     const newId = subSchema.$id;\n//     if (oldSchema.$id !== subSchema.$id) {\n//     }\n//   }\n// };\n\n// 解析函数字符串值\n// TODO: 没有考虑list的情况\nexport const getDataById = (data, idString) => {\n  if (idString === '#') return data;\n  try {\n    const idConnectedByDots = idString\n      .split('/')\n      .filter(id => id !== '#')\n      .map(id => `[\"${id}\"]`)\n      .join('');\n    const string = `data${idConnectedByDots}`;\n    const a = `\"use strict\";\n    const data = ${JSON.stringify(data)};\n    return ${string}`;\n    return Function(a)();\n    // TODO: can be better\n    // let result = { ...data };\n    // idConnectedByDots.forEach((item) => {\n    //   result = result[item];\n    // });\n    // return result;\n  } catch (error) {\n    return undefined;\n  }\n};\n\n// TODO: 没有考虑list的情况\nexport const dataToFlatten = (flatten, data) => {\n  if (!flatten || !data) return;\n  Object.entries(flatten).forEach(([id, item]) => {\n    const branchData = getDataById(data, id);\n    flatten[id].data = branchData;\n  });\n  return flatten;\n};\n\nexport const onChangeById = onChange => (id, value) => {};\n\n// TODO: 没有考虑list的情况\nexport const flattenToData = (flatten, id = '#') => {\n  try {\n    let result = flatten[id].data;\n    const ids = Object.keys(flatten);\n    const childrenIds = ids.filter(item => {\n      const lengthOfId = id.split('/').length;\n      const lengthOfChild = item.split('/').length;\n      return item.indexOf(id) > -1 && lengthOfChild > lengthOfId;\n    });\n    if (childrenIds && childrenIds.length > 0) {\n      if (result === undefined) {\n        // TODO: 这个是简化的逻辑，在编辑器模型下，list和object都是object结构\n        if (['object', 'array'].indexOf(flatten[id].schema.type) > -1) {\n          result = {};\n        }\n      }\n      childrenIds.forEach(c => {\n        const lengthOfId = id.split('/').length;\n        const lengthOfChild = c.split('/').length;\n        // 只比他长1，是直属的child\n        if (lengthOfChild === lengthOfId + 1) {\n          const cData = flattenToData(flatten, c);\n          const cKey = getKeyFromUniqueId(c);\n          result[cKey] = cData;\n        }\n      });\n    }\n    return result;\n  } catch (error) {\n    return undefined;\n  }\n};\n\n// 例如当前item的id = '#/obj/input'  propName: 'ui:labelWidth' 往上一直找，直到找到第一个不是undefined的值\nexport const getParentProps = (propName, id, flatten) => {\n  try {\n    const item = flatten[id];\n    if (item.schema[propName] !== undefined) return item.schema[propName];\n    if (item && item.parent) {\n      const parentSchema = flatten[item.parent].schema;\n      if (parentSchema[propName] !== undefined) {\n        return parentSchema[propName];\n      } else {\n        return getParentProps(propName, item.parent, flatten);\n      }\n    }\n  } catch (error) {\n    return undefined;\n  }\n};\n\nexport const getSaveNumber = () => {\n  const searchStr = localStorage.getItem('SAVES');\n  if (searchStr) {\n    try {\n      const saves = JSON.parse(searchStr);\n      const length = saves.length;\n      if (length) return length + 1;\n    } catch (error) {\n      return 1;\n    }\n  } else {\n    return 1;\n  }\n};\n","import React from 'react';\nimport { useGlobal, useGlobalProps, useStore } from '../hooks';\nimport { addItem } from '../utils';\nimport nanoid from 'nanoid';\nimport { useDrag } from 'react-dnd';\n\nconst Element = ({ text, name, schema }) => {\n  const [{ isDragging }, dragRef] = useDrag({\n    item: {\n      type: 'box',\n      dragItem: {\n        parent: '#',\n        schema,\n        children: [],\n      },\n      $id: `#/${name}_${nanoid(6)}`,\n    },\n    end: (item, monitor) => {\n      const dropResult = monitor.getDropResult();\n      if (item && dropResult) {\n        // alert(`You dropped into ${dropResult.name}!`);\n      }\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n  const setGlobal = useGlobal();\n  const { selected } = useGlobalProps();\n  const { flatten, onFlattenChange } = useStore();\n\n  const handleElementClick = () => {\n    const { newId, newFlatten } = addItem({ selected, name, schema, flatten });\n    onFlattenChange(newFlatten);\n    setGlobal({ selected: newId });\n  };\n\n  return (\n    <div ref={dragRef} className=\"left-element\" onClick={handleElementClick}>\n      {text}\n    </div>\n  );\n};\n\nexport default Element;\n","import React, { useEffect } from 'react';\nimport allSettings from './elementList';\nimport './index.css';\nimport Element from './Element';\n\nconst [elements, advancedElements, layouts, saves] = allSettings;\n\nconst Left = ({ saveList, setSaveList, ...rest }) => {\n  useEffect(() => {\n    setSaveList(saves);\n  }, []); // eslint-disable-line\n\n  return (\n    <div className=\"left-layout\">\n      <p className=\"f6 b\">基础组件</p>\n      <ul className=\"pl0\">\n        {elements.map((ele, idx) => {\n          return (\n            <li key={idx.toString()} className=\"left-item\">\n              <Element {...ele} {...rest} key={idx.toString()} />\n            </li>\n          );\n        })}\n      </ul>\n      <p className=\"f6 b\">复杂组件</p>\n      <ul className=\"pl0\">\n        {advancedElements.map((ele, idx) => {\n          return (\n            <li key={idx.toString()} className=\"left-item\">\n              <Element {...ele} {...rest} key={idx.toString()} />\n            </li>\n          );\n        })}\n      </ul>\n      <p className=\"f6 b\">布局组件</p>\n      <ul className=\"pl0\">\n        {layouts.map((ele, idx) => {\n          return (\n            <li key={idx.toString()} className=\"left-item\">\n              <Element {...ele} {...rest} key={idx.toString()} />\n            </li>\n          );\n        })}\n      </ul>\n      <p className=\"f6 b\">存档</p>\n      <ul className=\"pl0\">\n        {saveList.map((ele, idx) => {\n          return (\n            <li key={idx.toString()} className=\"left-item\">\n              <Element {...ele} {...rest} key={idx.toString()} />\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nexport default Left;\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离高阶日期组件\n */\n\nimport React from 'react';\nimport moment from 'moment';\nimport { getFormat } from '../utils';\n\nexport default (p, onChange, RangeComponent) => {\n  const { format = 'dateTime' } = p.schema;\n  const dateFormat = getFormat(format);\n  let defaultObj = {};\n  if (p.value && Array.isArray(p.value) && p.value[0] && p.value[1]) {\n    defaultObj = {\n      defaultValue: [\n        moment(p.value[0], dateFormat),\n        moment(p.value[1], dateFormat),\n      ],\n    };\n  }\n  const datePrams = {\n    ...p.options,\n    ...defaultObj,\n    style: { width: '100%' },\n    showTime: format === 'dateTime',\n    disabled: p.disabled || p.readonly,\n    onChange,\n  };\n  return <RangeComponent {...datePrams} />;\n};\n","/**\n * Updated by Tw93 on 2019-12-08.\n * 日历多选组件\n */\n\nimport { DatePicker } from 'antd';\nimport rangeHoc from '../../components/rangeHoc';\n\nconst { RangePicker } = DatePicker;\n\nexport default function dateRange(p) {\n  const onChange = (value, string) => p.onChange(string);\n  return rangeHoc(p, onChange, RangePicker);\n}\n","import React from 'react';\n\nconst FoldIcon = ({\n  fold = false,\n  width,\n  height,\n  fill,\n  style = {},\n  ...rest\n}) => (\n  <div\n    style={style}\n    className={fold ? 'fold-icon' : 'fold-icon fold-icon-active'}\n    {...rest}\n  >\n    <svg viewBox=\"0 0 1024 1024\" width={width || 18} height={height || 18}>\n      <path\n        d=\"M942.048 306.176c-12.288-12.288-31.328-13.024-43.008-2.016L529.056 674.112c-15.072 15.872-19.008 15.808-34.816 0L124.288 304.16c-11.68-11.04-30.72-10.272-43.008 2.016-12.512 12.512-13.216 32.032-1.6 43.68L490.624 760.8c5.056 5.056 11.648 7.328 18.464 7.744h5.152c6.816-.448 13.408-2.72 18.464-7.744l410.944-410.944c11.584-11.648 10.88-31.2-1.6-43.68z\"\n        fill={fill || '#3c3c3c'}\n      />\n    </svg>\n  </div>\n);\n\nexport default FoldIcon;\n","import React from 'react';\nimport { isFunction } from '../utils';\n\nconst getEnumValue = (value, enums, enumNames) => {\n  if (Array.isArray(enums) && Array.isArray(enumNames)) {\n    if (typeof value === 'string' || typeof value === 'number') {\n      const count = enums.indexOf(value);\n      if (count > -1) {\n        return enumNames[count];\n      }\n      return value;\n    } else if (Array.isArray(value)) {\n      const result = value.map((v) => getEnumValue(value, enums, enumNames));\n      return String(result);\n    }\n    return value;\n  }\n  return value;\n};\n\nconst DescriptionList = ({ schema = {}, value = [], index }) => {\n  const list = getDescription({ schema, value, index })\n    .filter((item) => item.title)\n    .slice(0, 3);\n  return (\n    <ul className=\"flex overflow-hidden\" style={{ paddingRight: 45 }}>\n      {list.map((item, i) => {\n        return item.title ? (\n          <li className=\"flex-auto mr2 overflow-hidden\" key={i}>\n            <span className=\"fw5\">{item.title}: </span>\n            <span>{item.text}</span>\n          </li>\n        ) : null;\n      })}\n    </ul>\n  );\n};\n\nexport default DescriptionList;\n\n// 获得title，value值list\nexport const getDescription = ({ schema = {}, value = [], index }) => {\n  const { items = {} } = schema;\n  // 只有当items为object时才做收起（fold）处理\n  if (items.type !== 'object') {\n    return [];\n  }\n  let titles = (items && items.properties) || {};\n  titles = Object.values(titles);\n  let description = (value && value.length && value[index]) || {};\n  const valueList = Object.values(description);\n  const descList = titles.map((t, idx) => {\n    let hidden = t && t['ui:hidden'];\n    // ui:hidden为判断式时解析 TODO: 解析在外部集中做\n    if (hidden) return;\n    const title = t.title;\n    let text = valueList[idx];\n    if (text === null && text === undefined) {\n      text = '';\n    } else if (typeof text === 'boolean') {\n      text = text ? '是' : '否';\n    } else if (typeof text !== 'string' && typeof text !== 'number' && text) {\n      text = '{复杂结构}';\n    } else if (t.enum && t.enumNames) {\n      text = getEnumValue(text, t.enum, t.enumNames);\n    }\n    return {\n      title,\n      text,\n    };\n  });\n  // 去空\n  return descList.filter((d) => !!d);\n};\n","/**\n * Updated by Tw93 on 2019-12-01.\n * 数组组件\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport * as Icons from '@ant-design/icons';\nimport { Button } from 'antd';\nimport {\n  SortableContainer,\n  SortableHandle,\n  SortableElement,\n  arrayMove,\n} from 'react-sortable-hoc';\nimport { isFunction, evaluateString } from '../../utils';\nimport FoldIcon from '../../components/foldIcon';\nimport DescriptionList, { getDescription } from '../../components/descList';\n\nconst DragHandle = SortableHandle(() => (\n  <span className='fr-move-icon'>:::</span>\n));\n\nclass listItem extends React.Component {\n  componentDidMount() {\n    const { p = {}, name, fold } = this.props;\n    const description = getDescription({\n      schema: p.schema,\n      value: p.value,\n      index: name,\n    });\n    // 如果第一个值不为空，则收起\n    // 新增的值为0，不折叠\n    const hasValue = description && description[0] && description[0].text;\n    if (hasValue && fold !== 0) {\n      this.props.toggleFoldItem(name);\n    }\n  }\n\n  toggleFold = () => {\n    this.props.toggleFoldItem(this.props.name);\n  };\n\n  render() {\n    const { item, p = {}, name, fold } = this.props;\n    const descProps = { ...p, index: name };\n    const { options = {}, readonly, formData, value: rootValue } = p;\n    const { foldable: canFold } = options;\n    let { hideDelete, itemButtons } = options;\n\n    // 判断 hideDelete 是不是函数，是的话将计算后的值赋回\n    let _isFunction = isFunction(hideDelete);\n    if (_isFunction) {\n      // isFunction 返回为 true 则说明只可能为 string | Function\n      if (typeof _isFunction === 'string') {\n        hideDelete = evaluateString(_isFunction, formData, rootValue);\n      } else if (typeof _isFunction === 'function') {\n        hideDelete = _isFunction(formData, rootValue);\n      }\n    }\n\n    // 只有当items为object时才做收起（fold）处理\n    const isObj = p.schema.items && p.schema.items.type == 'object';\n    let setClass =\n      'fr-set ba b--black-10 hover-b--black-20 relative flex flex-column';\n    if (canFold && fold) {\n      setClass += ' pv12';\n    } else if (p.displayType === 'row') {\n      setClass += ' pt44';\n    }\n    return (\n      <li className={setClass}>\n        {canFold && fold && isObj ? <DescriptionList {...descProps} /> : item}\n        {canFold && (\n          <FoldIcon\n            fold={fold}\n            onClick={this.toggleFold}\n            style={{ position: 'absolute', top: 12, right: 32 }}\n          />\n        )}\n        {!readonly && <DragHandle />}\n        {!((canFold && fold) || hideDelete || readonly) && (\n          <div className='self-end flex'>\n            <FrButton\n              type='dashed'\n              icon='delete'\n              onClick={() => {\n                const value = [...p.value];\n                value.splice(name, 1);\n                p.onChange(value);\n              }}\n            >\n              删除\n            </FrButton>\n            {itemButtons &&\n              itemButtons.length > 0 &&\n              itemButtons.map((btn, idx) => {\n                return (\n                  <FrButton\n                    key={idx.toString()}\n                    className='ml2'\n                    type='dashed'\n                    icon={btn.icon}\n                    onClick={() => {\n                      const value = [...p.value];\n                      if (typeof window[btn.callback] === 'function') {\n                        const result = window[btn.callback](value, name); // eslint-disable-line\n                        p.onChange(result);\n                      }\n                    }}\n                  >\n                    {btn.text || ''}\n                  </FrButton>\n                );\n              })}\n          </div>\n        )}\n      </li>\n    );\n  }\n}\n\nconst SortableItem = SortableElement(listItem);\nclass fieldList extends React.Component {\n  handleAddClick = () => {\n    const { p, addUnfoldItem } = this.props;\n    const value = [...p.value];\n    value.push(p.newItem);\n    p.onChange(value);\n    addUnfoldItem();\n  };\n  // buttons is a list, each item looks like:\n  // {\n  //   \"text\": \"删除全部\",\n  //   \"icon\": \"delete\",\n  //   \"callback\": \"clearAll\"\n  // }\n\n  render() {\n    const { p, foldList = [], toggleFoldItem } = this.props;\n    const { options = {}, extraButtons = {} } = p || {};\n    // prefer ui:options/buttons to ui:extraButtons, but keep both for backwards compatibility\n    const buttons = options.buttons || extraButtons || [];\n    const { readonly, schema = {} } = p;\n    const { maxItems } = schema;\n    const list = p.value || [];\n    const canAdd = maxItems ? maxItems > list.length : true; // 当到达最大个数，新增按钮消失\n    return (\n      <ul className='pl0 ma0'>\n        {list.map((_, name) => (\n          <SortableItem\n            key={`item-${name}`}\n            index={name}\n            name={name}\n            p={p}\n            fold={foldList[name]}\n            toggleFoldItem={toggleFoldItem}\n            item={p.children}\n          />\n        ))}\n        {!readonly && (\n          <div className='tr'>\n            {canAdd && (\n              <FrButton icon='add' onClick={this.handleAddClick}>\n                新增\n              </FrButton>\n            )}\n            {buttons &&\n              buttons.length > 0 &&\n              buttons.map((item, i) => (\n                <FrButton\n                  className='ml2'\n                  icon={item.icon}\n                  key={i.toString()}\n                  onClick={() => {\n                    if (item.callback === 'clearAll') {\n                      p.onChange([]);\n                      return;\n                    }\n                    if (item.callback === 'copyLast') {\n                      const value = [...p.value];\n                      const lastIndex = value.length - 1;\n                      value.push(lastIndex > -1 ? value[lastIndex] : p.newItem);\n                      p.onChange(value);\n                      return;\n                    }\n                    if (typeof window[item.callback] === 'function') {\n                      const value = [...p.value];\n                      const onChange = value => p.onChange(value);\n                      window[item.callback](value, onChange, p.newItem); // eslint-disable-line\n                    }\n                  }}\n                >\n                  {item.text}\n                </FrButton>\n              ))}\n          </div>\n        )}\n      </ul>\n    );\n  }\n}\n\nconst SortableList = SortableContainer(fieldList);\nclass list extends React.Component {\n  static propTypes = {\n    value: PropTypes.array,\n  };\n\n  static defaultProps = {\n    value: [],\n  };\n\n  constructor(props) {\n    super(props);\n    const len = this.props.value.length || 0;\n    this.state = {\n      foldList: new Array(len).fill(false) || [],\n    };\n  }\n\n  // 新添加的item默认是展开的\n  addUnfoldItem = () =>\n    this.setState({\n      foldList: [...this.state.foldList, 0],\n    });\n\n  toggleFoldItem = index => {\n    const { foldList = [] } = this.state;\n    foldList[index] = !foldList[index]; // TODO: need better solution for the weird behavior caused by setState being async\n    this.setState({\n      foldList,\n    });\n  };\n\n  handleSort = ({ oldIndex, newIndex }) => {\n    const { onChange, value } = this.props;\n    onChange(arrayMove(value, oldIndex, newIndex));\n    this.setState({\n      foldList: arrayMove(this.state.foldList, oldIndex, newIndex),\n    });\n  };\n\n  render() {\n    const { foldList } = this.state;\n    return (\n      <SortableList\n        p={this.props}\n        foldList={foldList}\n        toggleFoldItem={this.toggleFoldItem}\n        addUnfoldItem={this.addUnfoldItem}\n        distance={6}\n        useDragHandle\n        helperClass='fr-sort-help-class'\n        shouldCancelStart={e =>\n          e.toElement && e.toElement.className === 'fr-tooltip-container'\n        }\n        onSortEnd={this.handleSort}\n      />\n    );\n  }\n}\n\nfunction FrButton({ icon, children, ...rest }) {\n  let iconName;\n  switch (icon) {\n    case 'add':\n      iconName = 'PlusCircleOutlined';\n      break;\n    case 'delete':\n      iconName = 'DeleteOutlined';\n      break;\n    default:\n      iconName = icon;\n      break;\n  }\n  const IconComponent = Icons[iconName];\n  if (IconComponent) {\n    return (\n      <Button {...rest} icon={<IconComponent />}>\n        {children}\n      </Button>\n    );\n  }\n  return <Button {...rest}>{children}</Button>;\n}\n\nexport default list;\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离高阶多选组件\n */\n\nimport React from 'react';\n\nexport default (MultiComponent) => (p) => {\n  const { Option } = MultiComponent;\n  const onChange = (value) => p.onChange(value);\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { enum: enums, enumNames } = p.schema || {};\n  const _value = p.value && Array.isArray(p.value) ? p.value : [];\n  return (\n    <MultiComponent\n      {...p.options}\n      style={{ width: '100%', ...style }}\n      mode=\"multiple\"\n      disabled={p.disabled || p.readonly}\n      value={_value}\n      onChange={onChange}\n    >\n      {(enums || []).map((val, index) => (\n        <Option value={val} key={index}>\n          <span\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{\n              __html: enumNames ? enumNames[index] : val,\n            }}\n          />\n        </Option>\n      ))}\n    </MultiComponent>\n  );\n};\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离数字输入组件\n */\n\nimport React from 'react';\n\nexport default (NumberComponent) => (p) => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { max, min, step } = p.schema;\n  let obj = {};\n  if (max || max === 0) {\n    obj = { max };\n  }\n\n  if (min || min === 0) {\n    obj = { ...obj, min };\n  }\n\n  if (step) {\n    obj = { ...obj, step };\n  }\n\n  return (\n    <NumberComponent\n      {...obj}\n      style={{ width: '100%', ...style }}\n      disabled={p.disabled || p.readonly}\n      {...p.options}\n      value={p.value}\n      onChange={p.onChange}\n    />\n  );\n};\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 多选组件\n */\n\nimport { Select } from 'antd';\nimport multiSelectHoc from '../../components/multiSelectHoc';\n\nexport default multiSelectHoc(Select);\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 数字输入组件\n */\n\nimport { InputNumber } from 'antd';\nimport numberHoc from '../../components/numberHoc';\n\nexport default numberHoc(InputNumber);\n","/**\n * Created by Tw93 on 2019-12-07.\n * 高阶选择组件\n */\n\nimport React from 'react';\n\nexport default (SelectComponent) => (p) => {\n  const { Option } = SelectComponent;\n  const onChange = (value) => p.onChange(value);\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { enum: enums, enumNames } = p.schema || {};\n  return (\n    <SelectComponent\n      style={{ width: '100%', ...style }}\n      {...p.options}\n      disabled={p.disabled || p.readonly}\n      value={p.value}\n      onChange={onChange}\n    >\n      {(enums || []).map((val, index) => {\n        let option = enumNames ? enumNames[index] : val;\n        const isHtml = typeof option === 'string' && option[0] === '<';\n        if (isHtml) {\n          option = <span dangerouslySetInnerHTML={{ __html: option }} />;\n        }\n        return (\n          <Option value={val} key={index}>\n            {option}\n          </Option>\n        );\n      })}\n    </SelectComponent>\n  );\n};\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 选择组件\n */\n\nimport { Select } from 'antd';\nimport selectHoc from '../../components/selectHoc';\n\nexport default selectHoc(Select);\n","/**\n * Created by Tw93 on 2019-12-07.\n * 滑动输入组件\n */\n\nimport React from 'react';\nimport { InputNumber, Slider } from 'antd';\n\nconst SliderWithNumber = p => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { max, min, step } = p.schema;\n  let setting = {};\n  if (max || max === 0) {\n    setting = { max };\n  }\n\n  if (min || min === 0) {\n    setting = { ...setting, min };\n  }\n\n  if (step) {\n    setting = { ...setting, step };\n  }\n\n  let hideNumber = false;\n  if (p.options && p.options.hideNumber) {\n    hideNumber = true;\n  }\n\n  const renderNumber = p.readonly ? (\n    <span style={{ width: '90px' }}>\n      {p.value === (undefined || '') ? '-' : p.value}\n    </span>\n  ) : (\n    <InputNumber\n      {...p.options}\n      {...setting}\n      style={{ width: '90px', ...style }}\n      value={p.value}\n      disabled={p.disabled}\n      onChange={p.onChange}\n    />\n  );\n\n  return (\n    <div className='fr-slider'>\n      <Slider\n        style={{ flexGrow: 1, marginRight: hideNumber ? 0 : 12 }}\n        {...setting}\n        onChange={p.onChange}\n        value={typeof p.value === 'number' ? p.value : min || 0}\n        disabled={p.disabled || p.readonly}\n      />\n      {hideNumber ? null : renderNumber}\n    </div>\n  );\n};\n\nexport default SliderWithNumber;\n","import React from 'react';\nimport { Input } from 'antd';\n\nconst { TextArea } = Input;\n\nexport default function ta(p) {\n  const { options, invalid } = p;\n  const style = invalid ? { borderColor: '#f5222d' } : {};\n  const defaultUi = { rows: 3 };\n  const ui = { ...defaultUi, ...options };\n  const onChange = (e) => p.onChange(e.target.value);\n  return (\n    <TextArea\n      style={style}\n      disabled={p.disabled || p.readonly}\n      value={p.value}\n      {...ui}\n      onChange={onChange}\n    />\n  );\n}\n","import React from 'react';\n\nconst defaultImg =\n  'https://img.alicdn.com/tfs/TB14tSiKhTpK1RjSZFKXXa2wXXa-354-330.png';\n\nexport default (format, value) => {\n  return format === 'image' ? (\n    <img\n      src={value || defaultImg}\n      alt=\"图片地址错误\"\n      className=\"fr-preview-image\"\n    />\n  ) : null;\n};\n","import React from 'react';\nimport { PictureOutlined } from '@ant-design/icons';\nimport { Input, Popover } from 'antd';\nimport previewContent from '../../components/previewContent';\n\nconst previewNode = (format, value) => {\n  if (format !== 'image') {\n    return null;\n  }\n  return (\n    <Popover\n      content={previewContent(format, value)}\n      className=\"fr-preview\"\n      placement=\"bottom\"\n    >\n      <PictureOutlined />\n    </Popover>\n  );\n};\n\nexport default function input(p) {\n  const { options = {}, invalid } = p;\n  const style = invalid ? { borderColor: '#f5222d' } : {};\n  const { format = 'text' } = p.schema;\n  const type = format === 'image' ? 'text' : format;\n  const handleChange = (e) => p.onChange(e.target.value);\n  return (\n    <Input\n      style={style}\n      {...options}\n      value={p.value}\n      type={type}\n      disabled={p.disabled || p.readonly}\n      addonAfter={\n        options.addonAfter ? options.addonAfter : previewNode(format, p.value)\n      }\n      onChange={handleChange}\n    />\n  );\n}\n","import checkbox from './checkbox';\nimport checkboxes from './checkboxes';\nimport color from './color';\nimport date from './date';\nimport dateRange from './dateRange';\nimport list from './list';\nimport listEditor from './listEditor';\nimport map from './map';\nimport multiSelect from './multiSelect';\nimport number from './number';\nimport radio from './radio';\nimport select from './select';\nimport slider from './slider';\nimport switch1 from './switch';\nimport textarea from './textarea';\nimport upload from './upload';\nimport input from './input';\n\nexport const widgets = {\n  checkbox,\n  checkboxes, // checkbox多选\n  color,\n  date,\n  dateRange,\n  input,\n  list,\n  listEditor,\n  map,\n  multiSelect, // 下拉多选\n  number,\n  radio,\n  select,\n  slider, // 带滚条的number\n  switch: switch1,\n  textarea,\n  upload,\n};\n","import React from 'react';\nimport { Checkbox } from 'antd';\n\nexport default function radio({ value, onChange, disabled, readonly }) {\n  const handleChange = e => {\n    onChange(e.target.checked);\n  };\n\n  return (\n    <Checkbox\n      disabled={disabled || readonly}\n      onChange={handleChange}\n      checked={value}\n    />\n  );\n}\n","import React from 'react';\nimport { Checkbox } from 'antd';\n\nexport default function checkboxes(p) {\n  const { enum: enums, enumNames } = p.schema || {};\n  const _value = p.value && Array.isArray(p.value) ? p.value : [];\n  return (\n    <Checkbox.Group\n      disabled={p.disabled || p.readonly}\n      value={_value}\n      onChange={p.onChange}\n    >\n      {(enums || [true, false]).map((val, index) => (\n        <Checkbox value={val} key={index}>\n          <span\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{\n              __html: enumNames ? enumNames[index] : val,\n            }}\n          />\n        </Checkbox>\n      ))}\n    </Checkbox.Group>\n  );\n}\n","import React from 'react';\nimport ColorPicker from 'rc-color-picker';\nimport { Input } from 'antd';\nimport 'rc-color-picker/assets/index.css';\n\nexport default function color(p) {\n  const { format } = p.schema;\n  const onPickerChange = (e) => {\n    if (p.disabled || p.readonly) return;\n    p.onChange(e.color);\n  };\n  const onInputChange = (e) => {\n    // const isHex = value.match(/^(#{0,1})([0-9A-F]{6})$/i);\n    p.onChange(e.target.value);\n  };\n\n  return (\n    <div className=\"fr-color-picker\">\n      {\n        <ColorPicker\n          type={format}\n          animation=\"slide-up\"\n          color={p.value ? p.value : '#ffffff'}\n          onChange={onPickerChange}\n        />\n      }\n      {p.readonly ? (\n        <span>{p.value || '#ffffff'}</span>\n      ) : (\n        <Input\n          placeholder=\"#ffffff\"\n          disabled={p.disabled}\n          value={p.value}\n          onChange={onInputChange}\n        />\n      )}\n    </div>\n  );\n}\n","/**\n * Updated by fateriddle on 2019-12-12.\n * 日期组件\n */\n\nimport { DatePicker, TimePicker } from 'antd';\nimport dateHoc from '../../components/dateHoc';\n\nexport default function date(p) {\n  const { format = 'dateTime' } = p.schema;\n  const onChange = (value, string) => p.onChange(string);\n  const DateComponent = format === 'time' ? TimePicker : DatePicker;\n  return dateHoc(p, onChange, DateComponent);\n}\n","/**\n * Created by Tw93 on 2019-12-07.\n * 抽离高阶日期组件\n */\n\nimport React from 'react';\nimport moment from 'moment';\nimport { getFormat } from '../utils';\n\nexport default (p, onChange, DateComponent) => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { format = 'dateTime' } = p.schema;\n  const dateFormat = getFormat(format);\n  let defaultObj = {};\n  if (p.value) {\n    defaultObj.value = moment(p.value, dateFormat);\n  } else {\n    defaultObj.value = '';\n  }\n\n  const placeholderObj = p.description ? { placeholder: p.description } : {};\n\n  const dateParams = {\n    ...placeholderObj,\n    ...p.options,\n    ...defaultObj,\n    style: { width: '100%', ...style },\n    disabled: p.disabled || p.readonly,\n    onChange,\n  };\n\n  if (format === 'dateTime') {\n    dateParams.showTime = true;\n  }\n\n  return <DateComponent {...dateParams} />;\n};\n","import React from 'react';\nimport { Button } from 'antd';\nimport { PlusCircleOutlined, DeleteOutlined } from '@ant-design/icons';\n\nexport default function listEditor(props) {\n  return (\n    <div className='flex flex-column'>\n      <div className='fr-set w-100 flex flex-column ba pt4 pb2 ph2 relative b--black-10'>\n        <span className='fr-move-icon f4'>:::</span>\n        {props.children}\n        <Button\n          size='small'\n          className='self-end'\n          type='dashed'\n          icon={<DeleteOutlined />}\n        >\n          删除\n        </Button>\n      </div>\n      <Button size='small' className='self-end' icon={<PlusCircleOutlined />}>\n        添加\n      </Button>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function map({ children }) {\n  return <div className=\"w-100\">{children}</div>;\n}\n","/**\n * Updated by Tw93 on 2019-12-07.\n * 单选组件\n */\n\nimport { Radio } from 'antd';\nimport radioHoc from '../../components/radioHoc';\n\nexport default function radio(p) {\n  const onChange = (e) => p.onChange(e.target.value);\n  return radioHoc(p, onChange, Radio);\n}\n","/**\n * Created by Tw93 on 2019-12-07.\n * 单选输入组件\n */\n\nimport React from 'react';\n\nexport default (p, onChange, RadioComponent) => {\n  const RadioGroup = RadioComponent.Group;\n  const { enum: enums, enumNames } = p.schema || {};\n  return (\n    <RadioGroup\n      disabled={p.disabled || p.readonly}\n      value={p.value}\n      onChange={onChange}\n    >\n      {(enums || [true, false]).map((val, index) => (\n        <RadioComponent value={val} key={index}>\n          <span\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{\n              __html: enumNames ? enumNames[index] : val,\n            }}\n          />\n        </RadioComponent>\n      ))}\n    </RadioGroup>\n  );\n};\n","import React from 'react';\nimport { Switch } from 'antd';\n\nexport default function sw(p) {\n  return (\n    <Switch\n      disabled={p.disabled || p.readonly}\n      onChange={checked => p.onChange(p.name, checked)}\n      defaultChecked={p.value}\n    />\n  );\n}\n","import React from 'react';\nimport { UploadOutlined } from '@ant-design/icons';\nimport { Upload, message, Button } from 'antd';\n\nexport default function input(p) {\n  const props = {\n    name: 'file',\n    action: p.action,\n    enctype: 'multipart/form-data',\n    withCredentials: true,\n    type: 'file',\n    onChange(info) {\n      if (info.file.status === 'done') {\n        message.success(`${info.file.name} 上传成功`);\n        p.onChange(info.file.response.url);\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} 上传失败`);\n      }\n    },\n    onRemove() {\n      p.onChange('');\n    },\n  };\n\n  return (\n    <div className=\"fr-upload-mod\">\n      <Upload {...props} className=\"fr-upload-file\">\n        <Button>\n          <UploadOutlined /> 上传\n        </Button>\n      </Upload>\n      {p.value && (\n        <a\n          href={p.value}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"fr-upload-preview\"\n        >\n          已上传地址\n        </a>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { Input } from 'antd';\nimport { getKeyFromUniqueId, changeKeyFromUniqueId } from '../../utils';\n\nexport default function IdInput({\n  onChange,\n  value,\n  disabled,\n  readonly,\n  options,\n}) {\n  const handleChange = e => {\n    try {\n      const newId = changeKeyFromUniqueId(value, e.target.value);\n      onChange(newId);\n    } catch (error) {}\n  };\n\n  return (\n    <Input\n      disabled={disabled || readonly}\n      {...options}\n      onChange={handleChange}\n      value={getKeyFromUniqueId(value)}\n    />\n  );\n}\n","import React from 'react';\nimport { InputNumber, Slider } from 'antd';\n\nconst PercentSlider = p => {\n  const style = p.invalid ? { borderColor: '#f5222d' } : {};\n  const { max, min, step } = p.schema;\n  let setting = {};\n  if (max || max === 0) {\n    setting = { max };\n  }\n\n  if (min || min === 0) {\n    setting = { ...setting, min };\n  }\n\n  if (step) {\n    setting = { ...setting, step };\n  }\n\n  let hideNumber = false;\n  if (p.options && p.options.hideNumber) {\n    hideNumber = true;\n  }\n\n  const isPercent = string =>\n    typeof string === 'string' && string.endsWith('%');\n\n  let numberValue = 100;\n  if (isPercent(p.value)) {\n    try {\n      numberValue = Number(p.value.split('%')[0]);\n      if (Number.isNaN(numberValue)) numberValue = 100;\n    } catch (error) {}\n  }\n\n  const handleChange = newNumber => {\n    const a = newNumber + '%';\n    p.onChange(a);\n  };\n\n  const renderNumber = p.readonly ? (\n    <span style={{ width: '80px' }}>\n      {p.value === (undefined || '') ? '-' : p.value + '%'}\n    </span>\n  ) : (\n    <InputNumber\n      {...p.options}\n      {...setting}\n      style={{ width: '80px', ...style }}\n      value={numberValue}\n      disabled={p.disabled}\n      onChange={handleChange}\n      formatter={value => `${value}%`}\n      parser={value => value.replace('%', '')}\n    />\n  );\n\n  return (\n    <div className='fr-slider'>\n      <Slider\n        style={{ flexGrow: 1, marginRight: hideNumber ? 0 : 12 }}\n        {...setting}\n        onChange={handleChange}\n        max={100}\n        tipFormatter={v => v + '%'}\n        value={numberValue || 100}\n        disabled={p.disabled || p.readonly}\n      />\n      {hideNumber ? null : renderNumber}\n    </div>\n  );\n};\n\nexport default PercentSlider;\n","export const mapping = {\n  default: 'input',\n  string: 'input',\n  array: 'list',\n  boolean: 'checkbox',\n  integer: 'number',\n  number: 'number',\n  object: 'map',\n  'string:upload': 'upload',\n  'string:date': 'date',\n  'string:dateTime': 'date',\n  'string:time': 'date',\n  'string:textarea': 'textarea',\n  'string:color': 'color',\n  'string:image': 'input',\n  'range:date': 'dateRange',\n  'range:dateTime': 'dateRange',\n  '*?enum': 'select',\n  'array?enum': 'checkboxes',\n  '*?readonly': 'text',\n};\n\nexport function getWidgetName(schema, _mapping = mapping) {\n  const { type, format, enum: enums, readonly } = schema;\n\n  // 如果已经注明了渲染widget，那最好\n  if (schema['ui:widget']) {\n    return schema['ui:widget'];\n  }\n\n  const list = [];\n  if (readonly) {\n    list.push(`${type}?readonly`);\n    list.push('*?readonly');\n  }\n  if (enums) {\n    list.push(`${type}?enum`);\n    // array 默认使用list，array?enum 默认使用checkboxes，*?enum 默认使用select\n    list.push('*?enum');\n  }\n  if (format) {\n    list.push(`${type}:${format}`);\n  }\n  list.push(type); // 放在最后兜底，其他都不match时使用type默认的组件\n  let found = '';\n  list.some(item => {\n    found = _mapping[item];\n    return !!found;\n  });\n  return found;\n}\n","import React from 'react';\nimport FRWrapper from '../FRWrapper';\nimport { useGlobalProps, useStore } from '../hooks';\nimport { widgets } from '../widgets/antd';\nimport IdInput from '../widgets/antd/idInput';\nimport PercentSlider from '../widgets/antd/percentSlider';\nimport ALL from '../Left/elementList';\nimport { getWidgetName } from '../mapping';\nimport { getKeyFromUniqueId } from '../utils';\n\nconst elements = [...ALL[0], ...ALL[1], ...ALL[2]]; // 前三项是所有的组件\n\nexport default function ItemSettings() {\n  const { flatten, onItemChange } = useStore();\n  const { selected } = useGlobalProps();\n\n  let settingSchema = {};\n  let settingData = {};\n\n  const onDataChange = newSchema => {\n    if (selected) {\n      try {\n        const item = flatten[selected];\n        if (item && item.schema) {\n          onItemChange(selected, { ...item, schema: newSchema });\n        }\n      } catch (error) {\n        console.log(error, 'catch');\n      }\n    }\n  };\n\n  // setting该显示什么的计算，要把选中组件的schema和它对应的widgets的整体schema进行拼接\n  let itemSelected;\n  let widgetName;\n  try {\n    itemSelected = flatten[selected];\n    if (itemSelected) {\n      widgetName = getWidgetName(itemSelected.schema);\n    }\n    if (widgetName) {\n      // const name = getKeyFromUniqueId(selected);\n      const element = elements.find(e => e.widget === widgetName);\n      const schemaNow = element.setting;\n      settingSchema = {\n        propsSchema: {\n          type: 'object',\n          properties: {\n            ...schemaNow,\n          },\n        },\n      };\n      settingData = itemSelected.schema;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  const _widgets = {\n    ...widgets,\n    idInput: IdInput,\n    percentSlider: PercentSlider,\n  };\n\n  return (\n    <div style={{ paddingRight: 24, height: 700, overflow: 'auto' }}>\n      <FRWrapper\n        schema={settingSchema}\n        formData={settingData}\n        onChange={onDataChange}\n        displayType='row'\n        showDescIcon\n        widgets={_widgets}\n        preview={true}\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport FRWrapper from '../FRWrapper';\nimport SCHEMA from './GlobalSettingSchema.json';\n// import { widgets } from '../widgets/antd';\nimport { useGlobalProps } from '../hooks';\n\nexport default function ItemSettings() {\n  const globalProps = useGlobalProps();\n\n  const {\n    hovering,\n    mapping,\n    preview,\n    selected,\n    setState,\n    widgets,\n    ...rest\n  } = globalProps;\n\n  const onDataChange = data => {\n    setState(state => ({ ...state, ...data }));\n  };\n\n  return (\n    <div style={{ paddingRight: 24, height: 700, overflow: 'auto' }}>\n      <FRWrapper\n        schema={SCHEMA}\n        formData={rest}\n        onChange={onDataChange}\n        displayType='row'\n        showDescIcon\n        widgets={widgets}\n        preview={true}\n      />\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useGlobalProps, useSet } from '../hooks';\nimport { RightOutlined } from '@ant-design/icons';\nimport './index.css';\nimport ItemSettings from './ItemSettings';\nimport GlobalSettings from './GlobalSettings';\nimport { Tabs } from 'antd';\n\nconst { TabPane } = Tabs;\n\nexport default function Right() {\n  const [state, setState] = useSet({\n    showRight: true,\n    showItemSettings: false,\n  });\n  const { selected } = useGlobalProps();\n  const { showRight, showItemSettings } = state;\n\n  const toggleRight = () => setState({ showRight: !showRight });\n\n  const ToggleIcon = () => (\n    <div\n      className='absolute top-0 left-0 pointer'\n      style={{ height: 30, width: 30, padding: '8px 0 0 8px' }}\n      onClick={toggleRight}\n    >\n      <RightOutlined className='f5' />\n    </div>\n  );\n\n  const HideRightArrow = () => (\n    <div\n      className='absolute right-0 top-0 h2 flex-center'\n      style={{ width: 40 }}\n    >\n      <ToggleIcon />\n    </div>\n  );\n\n  // 如果没有选中任何item，或者是选中了根节点，object、list的内部，显示placeholder\n  useEffect(() => {\n    if ((selected && selected[0] === '0') || selected === '#' || !selected) {\n      setState({ showItemSettings: false });\n    } else {\n      setState({ showItemSettings: true });\n    }\n  }, [selected]);\n\n  return showRight ? (\n    <div className='right-layout relative pl2'>\n      <ToggleIcon />\n      <Tabs defaultActiveKey='1' onChange={() => {}}>\n        {showItemSettings && (\n          <TabPane tab='组件配置' key='1'>\n            <ItemSettings />\n          </TabPane>\n        )}\n        <TabPane tab='表单配置' key={showItemSettings ? '2' : '1'}>\n          <GlobalSettings />\n        </TabPane>\n      </Tabs>\n    </div>\n  ) : (\n    <HideRightArrow />\n  );\n}\n","import React from 'react';\nimport { useStore } from '../hooks';\nimport FR from './index';\n\nconst RenderChildren = ({ children = [], preview }) => {\n  const { onItemChange, flatten } = useStore();\n  return (\n    <>\n      {children.map((child, i) => {\n        const FRProps = {\n          id: child,\n          preview,\n        };\n        return <FR key={i.toString()} {...FRProps} />;\n      })}\n    </>\n  );\n};\n\nexport default RenderChildren;\n","import React from 'react';\nimport { useGlobalProps, useStore } from '../hooks';\nimport { isLooselyNumber, isCssLength, getParentProps } from '../utils';\nimport { getWidgetName } from '../mapping';\n\nconst RenderField = ({\n  $id,\n  item,\n  labelClass,\n  contentClass,\n  isComplex,\n  children,\n}) => {\n  const { onItemChange, flatten } = useStore();\n  const { schema, data } = item;\n  const {\n    displayType,\n    showDescIcon,\n    showValidate,\n    labelWidth,\n    widgets,\n    mapping,\n  } = useGlobalProps();\n  const { type, title, description, required } = schema;\n  const isRequired = required && required.length > 0;\n\n  // 真正有效的label宽度需要从现在所在item开始一直往上回溯（设计成了继承关系），找到的第一个有值的 ui:labelWidth\n  const effectiveLabelWidth =\n    getParentProps('ui:labelWidth', $id, flatten) || labelWidth;\n  const _labelWidth = isLooselyNumber(effectiveLabelWidth)\n    ? Number(effectiveLabelWidth)\n    : isCssLength(effectiveLabelWidth)\n    ? effectiveLabelWidth\n    : 110; // 默认是 110px 的长度\n\n  let labelStyle = { width: _labelWidth };\n  if (type === 'boolean') {\n    labelStyle = { flexGrow: 1 };\n  } else if (isComplex || displayType === 'column') {\n    labelStyle = { flexGrow: 1 };\n  }\n\n  const onChange = value => {\n    const newItem = { ...item };\n    newItem.data = value;\n    onItemChange($id, newItem);\n  };\n\n  let widgetName = getWidgetName(schema, mapping);\n  const customWidget = schema['ui:widget'];\n  if (customWidget && widgets[customWidget]) {\n    widgetName = customWidget;\n  }\n  const Widget = widgets[widgetName];\n  // if (widgetName === 'multiSelect') {\n  //   console.log(schema['ui:widget'], customWidget, Widget);\n  // }\n  let contentStyle = {};\n  if (widgetName === 'checkbox') {\n    contentStyle.marginLeft = effectiveLabelWidth;\n  }\n\n  // TODO: useMemo\n  const usefulWidgetProps = {\n    disabled: schema['ui:disabled'],\n    readonly: schema['ui:readonly'],\n    hidden: schema['ui:hidden'],\n    options: schema['ui:options'],\n    labelWidth: schema['ui:labelWidth'],\n    width: schema['ui:width'],\n  };\n\n  return (\n    <>\n      {schema.title ? (\n        <div className={labelClass} style={labelStyle}>\n          <label\n            className={`fr-label-title ${\n              type === 'boolean' || displayType === 'column' ? 'no-colon' : ''\n            }`} // boolean不带冒号\n            title={title}\n          >\n            {isRequired && <span className='fr-label-required'> *</span>}\n            <span\n              className={`${isComplex ? 'b' : ''} ${\n                displayType === 'column' ? 'flex-none' : ''\n              }`}\n            >\n              {title}\n            </span>\n            {description &&\n              (showDescIcon ? (\n                <span className='fr-tooltip-toggle' aria-label={description}>\n                  <i className='fr-tooltip-icon' />\n                  <div className='fr-tooltip-container'>\n                    <i className='fr-tooltip-triangle' />\n                    {description}\n                  </div>\n                </span>\n              ) : (\n                <span className='fr-desc ml2'>(&nbsp;{description}&nbsp;)</span>\n              ))}\n            {displayType !== 'row' && showValidate && (\n              <span className='fr-validate'>validation</span>\n            )}\n          </label>\n        </div>\n      ) : null}\n      <div className={contentClass} style={contentStyle}>\n        <Widget\n          value={data}\n          onChange={onChange}\n          schema={schema}\n          {...usefulWidgetProps}\n          children={children}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default RenderField;\n","import React, { useRef, useState } from 'react';\nimport './Wrapper.css';\nimport { useGlobal, useGlobalProps, useStore } from '../hooks';\nimport { copyItem, getKeyFromUniqueId, dropItem } from '../utils';\nimport { DeleteOutlined, CopyOutlined, DragOutlined } from '@ant-design/icons';\nimport { useDrag, useDrop } from 'react-dnd';\n\nexport default function Wrapper({\n  $id,\n  item,\n  inside = false,\n  children,\n  style,\n}) {\n  const [position, setPosition] = useState();\n  const { flatten, onItemChange, onFlattenChange } = useStore();\n  const setGlobal = useGlobal();\n  const { selected, hovering } = useGlobalProps();\n  const { schema } = item;\n  const { type } = schema;\n  const boxRef = useRef(null);\n\n  const [{ isDragging }, dragRef, dragPreview] = useDrag({\n    item: { type: 'box', $id: inside ? 0 + $id : $id },\n    end: (item, monitor) => {\n      const dropResult = monitor.getDropResult();\n      if (item && dropResult) {\n        // alert(`You dropped into ${dropResult.name}!`);\n      }\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [{ canDrop, isOver }, dropRef] = useDrop({\n    accept: 'box',\n    drop: (item, monitor) => {\n      // 如果children已经作为了drop target，不处理\n      const didDrop = monitor.didDrop();\n      if (didDrop) {\n        return;\n      }\n      console.log(item.dragItem, 'tems');\n      const [newFlatten, newId] = dropItem({\n        dragId: item.$id, // 内部拖拽用dragId\n        dragItem: item.dragItem, // 从左边栏过来的，用dragItem\n        dropId: $id,\n        position,\n        flatten,\n      });\n      onFlattenChange(newFlatten);\n      setGlobal({ selected: newId });\n      return;\n    },\n    hover: (item, monitor) => {\n      // 只检查被hover的最小元素\n      const didHover = monitor.isOver({ shallow: true });\n      if (didHover) {\n        // Determine rectangle on screen\n        const hoverBoundingRect =\n          boxRef.current && boxRef.current.getBoundingClientRect();\n        // Get vertical middle\n        const hoverMiddleY =\n          (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n        // Determine mouse position\n        // const clientOffset = monitor.getClientOffset();\n        const dragOffset = monitor.getSourceClientOffset();\n        // Get pixels to the top\n        const hoverClientY = dragOffset.y - hoverBoundingRect.top;\n        // Only perform the move when the mouse has crossed half of the items height\n        // When dragging downwards, only move when the cursor is below 50%\n        // When dragging upwards, only move when the cursor is above 50%\n        // Dragging downwards\n        if (inside) {\n          setPosition('inside');\n        } else {\n          if (hoverClientY <= hoverMiddleY) {\n            setPosition('up');\n          }\n          // Dragging upwards\n          if (hoverClientY > hoverMiddleY) {\n            setPosition('down');\n          }\n        }\n      }\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop(),\n    }),\n  });\n\n  const isActive = canDrop && isOver;\n  dragPreview(dropRef(boxRef));\n\n  const handleClick = e => {\n    e.stopPropagation();\n    const _id = inside ? '0' + $id : $id;\n    setGlobal({ selected: _id });\n  };\n\n  const deleteItem = e => {\n    e.stopPropagation();\n    const newFlatten = { ...flatten };\n    let newSelect = '#';\n    // 计算删除后新被选中的元素：\n    // 1. 如果是第一个，选第二个\n    // 2. 如果不是第一，选它前一个\n    // 3. 如果同级元素没了，选parent\n    try {\n      const parent = newFlatten[$id].parent;\n      const siblings = newFlatten[parent].children;\n      const idx = siblings.indexOf($id);\n      if (idx > 0) {\n        newSelect = siblings[idx - 1];\n      } else {\n        newSelect = siblings[1] || parent;\n      }\n    } catch (error) {\n      console.log('catch', error);\n    }\n    delete newFlatten[$id];\n    onFlattenChange(newFlatten);\n    setGlobal({ selected: newSelect });\n  };\n\n  const handleItemCopy = e => {\n    e.stopPropagation();\n    const [newFlatten, newId] = copyItem(flatten, $id);\n    onFlattenChange(newFlatten);\n    setGlobal({ selected: newId });\n  };\n\n  const handleMouseEnter = () => {\n    // setGlobal({ hovering: inside ? '0' + $id : $id });\n  };\n\n  const handleMouseLeave = () => {\n    // TODO: 如何写hoverLeave\n    // let hoverItem = '';\n    // if (hovering && hovering[0] === '0') {\n    //   hoverItem = $id;\n    // } else {\n    //   hoverItem = $id.split;\n    // }\n  };\n\n  // 一些computed\n  let isSelected = selected === $id && !inside;\n  if (selected && selected[0] === '0') {\n    isSelected = selected.substring(1) === $id && inside;\n  }\n\n  const hoverId = inside ? '0' + $id : $id;\n\n  let overwriteStyle = {\n    backgroundColor: hovering === hoverId ? '#ecf5ff' : '#fff',\n    opacity: isDragging ? 0 : 1,\n  };\n  if (inside) {\n    overwriteStyle = {\n      ...overwriteStyle,\n      borderColor: '#777',\n      // marginLeft: 12,\n      padding: '12px 12px 0',\n      backgroundColor: '#f6f5f6',\n    };\n  } else if ($id === '#') {\n    overwriteStyle = {\n      ...overwriteStyle,\n      borderColor: '#777',\n      padding: 12,\n      height: 'calc(100vh - 80px)',\n      overflow: 'auto',\n      backgroundColor: '#f6f5f6',\n    };\n  } else if (type === 'object') {\n    overwriteStyle = { ...overwriteStyle, paddingTop: 12 };\n  }\n  if (isActive) {\n    if (inside) {\n      overwriteStyle = {\n        ...overwriteStyle,\n        boxShadow: '0 -3px 0 red',\n      };\n    } else if (position === 'up') {\n      overwriteStyle = {\n        ...overwriteStyle,\n        boxShadow: '0 -3px 0 red',\n      };\n    } else if (position === 'down') {\n      overwriteStyle = {\n        ...overwriteStyle,\n        boxShadow: '0 3px 0 red',\n      };\n    }\n  }\n  if (isSelected) {\n    overwriteStyle = {\n      ...overwriteStyle,\n      outline: '2px solid #409eff',\n      borderColor: '#fff',\n    };\n  }\n  if (style && typeof style === 'object') {\n    overwriteStyle = {\n      ...overwriteStyle,\n      ...style,\n    };\n  }\n\n  if ($id === '#' && inside) return children;\n\n  // 展示的id\n  let shownId = schema && schema.$id && getKeyFromUniqueId(schema.$id);\n  if (shownId === '#') shownId = ''; // 根元素不展示了\n\n  return (\n    <div\n      ref={boxRef}\n      style={overwriteStyle}\n      className={`field-wrapper relative w-100`}\n      onClick={handleClick}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n    >\n      {!inside && isSelected && $id !== '#' && (\n        <div\n          style={{\n            position: 'absolute',\n            top: -2,\n            left: -2,\n            height: 24,\n            width: 24,\n            backgroundColor: '#409eff',\n            padding: '2px 0 0 4px',\n            cursor: 'move',\n          }}\n          ref={dragRef}\n        >\n          <DragOutlined style={{ color: '#fff' }} />\n        </div>\n      )}\n      {!inside && (\n        <div className=\"absolute top-0 right-1 blue f7\">{shownId}</div>\n      )}\n      {children}\n\n      {isSelected && !inside && $id !== '#' && (\n        <div\n          style={{\n            position: 'absolute',\n            zIndex: 20,\n            bottom: -2,\n            right: -2,\n            height: 24,\n            width: 54,\n            borderTopLeftRadius: 8,\n            background: '#409eff',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n          }}\n        >\n          <div className=\"pointer\" onClick={deleteItem}>\n            <DeleteOutlined\n              style={{\n                height: 16,\n                width: 16,\n                margin: '0 8px 0 12px',\n                color: '#fff',\n              }}\n            />\n          </div>\n          <div className=\"pointer\" onClick={handleItemCopy}>\n            <CopyOutlined\n              style={{\n                height: 16,\n                width: 16,\n                marginRight: 12,\n                color: '#fff',\n              }}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { useGlobalProps, useStore } from '../hooks';\nimport RenderChildren from './RenderChildren';\nimport RenderField from './RenderField';\nimport Wrapper from './Wrapper';\n\nconst FR = ({ id = '#', preview = false }) => {\n  const { onItemChange, onFlattenChange, flatten } = useStore();\n  const { displayType, column } = useGlobalProps();\n  const item = flatten[id];\n  if (!item) return null;\n\n  const { schema } = item;\n  const isObj = schema.type === 'object';\n  const isList = schema.type === 'array' && schema.enum === undefined;\n  const isComplex = isObj || isList;\n  const width = schema['ui:width'];\n  let containerClass = `fr-field w-100 ${isComplex ? 'fr-field-complex' : ''}`;\n  let labelClass = 'fr-label mb2';\n  let contentClass = 'fr-content';\n\n  let columnStyle = {};\n  if (!isComplex && width) {\n    columnStyle = {\n      width,\n      paddingRight: '12px',\n    };\n  } else if (!isComplex && column > 1) {\n    columnStyle = {\n      width: `calc(100% /${column})`,\n      paddingRight: '12px',\n    };\n  }\n\n  switch (schema.type) {\n    case 'object':\n      if (schema.title) {\n        containerClass += ' ba b--black-20 pt4 pr3 pb2 relative mt3 mb4'; // object的margin bottom由内部元素撑起\n        labelClass += ' fr-label-object bg-white absolute ph2 top-upper left-1'; // fr-label-object 无默认style，只是占位用于使用者样式覆盖\n      }\n      containerClass += ' fr-field-object'; // object的margin bottom由内部元素撑起\n      if (schema.title) {\n        contentClass += ' ml3'; // 缩进\n      }\n      break;\n    case 'array':\n      if (schema.title && !schema.enum) {\n        labelClass += ' mt2 mb3';\n      }\n      break;\n    case 'boolean':\n      if (schema.title) {\n        labelClass += ' ml2';\n        labelClass = labelClass.replace('mb2', 'mb0');\n      }\n      contentClass += ' flex items-center'; // checkbox高度短，需要居中对齐\n      containerClass += ' flex items-center flex-row-reverse justify-end';\n      break;\n    default:\n      if (displayType === 'row') {\n        labelClass = labelClass.replace('mb2', 'mb0');\n      }\n  }\n  // 横排时\n  if (displayType === 'row' && !isComplex && schema.type !== 'boolean') {\n    containerClass += ' flex items-center';\n    labelClass += ' flex-shrink-0 fr-label-row';\n    labelClass = labelClass.replace('mb2', 'mb0');\n    contentClass += ' flex-grow-1 relative';\n  }\n\n  // 横排的checkbox\n  if (displayType === 'row' && schema.type === 'boolean') {\n    contentClass += ' flex justify-end pr2';\n  }\n\n  const fieldProps = {\n    $id: id,\n    item,\n    labelClass,\n    contentClass,\n    isComplex,\n  };\n  const childrenProps = {\n    children: item.children,\n    preview,\n  };\n\n  const childrenElement =\n    item.children && item.children.length > 0 ? (\n      <ul className={`flex flex-wrap pl0`}>\n        <RenderChildren {...childrenProps} />\n      </ul>\n    ) : null;\n\n  // TODO: list 也要算进去\n  if (preview) {\n    return (\n      <div style={columnStyle} className={containerClass}>\n        <RenderField {...fieldProps}>\n          {(isObj || isList) && childrenElement}\n        </RenderField>\n      </div>\n    );\n  }\n\n  const isEmpty = Object.keys(flatten).length < 2; // 只有一个根元素 # 的情况\n  if (isEmpty) {\n    return (\n      <Wrapper style={columnStyle} $id={id} item={item}>\n        <div\n          className={`${containerClass} h-100 f5 black-40 flex items-center justify-center`}\n        >\n          点击/拖拽左侧栏的组件进行添加\n        </div>\n      </Wrapper>\n    );\n  }\n\n  return (\n    <Wrapper style={columnStyle} $id={id} item={item}>\n      <div className={containerClass}>\n        <RenderField {...fieldProps}>\n          {(isObj || isList) && (\n            <Wrapper $id={id} item={item} inside>\n              {childrenElement || <div className=\"h2\" />}\n            </Wrapper>\n          )}\n        </RenderField>\n      </div>\n    </Wrapper>\n  );\n};\n\nexport default FR;\n","import React, { useRef } from 'react';\nimport { useSet, useStorageState } from './hooks';\nimport copyTOClipboard from 'copy-text-to-clipboard';\nimport Left from './Left';\nimport Right from './Right';\nimport {\n  flattenSchema,\n  idToSchema,\n  combineSchema,\n  dataToFlatten,\n  flattenToData,\n  getSaveNumber,\n} from './utils';\nimport { Ctx, PropsCtx, InnerCtx } from './context';\n// import SCHEMA from './json/basic.json';\nimport FR from './FR';\nimport { Modal, Input, message } from 'antd';\nimport { Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport 'tachyons';\nimport './App.css';\n\nconst { TextArea } = Input;\n\nconst Wrapper = ({\n  simple = true,\n  schema,\n  formData,\n  onChange,\n  onSchemaChange,\n  ...globalProps\n}) => {\n  const [local, setLocal] = useSet({\n    showModal: false,\n    showModal2: false,\n    showModal3: false,\n    schemaForImport: '',\n  });\n\n  const [saveList, setSaveList] = useStorageState([]);\n\n  const saveNameRef = useRef();\n\n  const {\n    preview,\n    setState,\n    mapping,\n    widgets,\n    selected,\n    hovering,\n    ...rest\n  } = globalProps;\n  const _schema = combineSchema(schema.propsSchema, schema.uiSchema);\n  const flatten = flattenSchema(_schema);\n  const flattenWithData = dataToFlatten(flatten, formData);\n  // console.log(flatten);\n\n  const onFlattenChange = newFlatten => {\n    const newSchema = idToSchema(newFlatten);\n    const newData = flattenToData(newFlatten);\n    // 判断只有schema变化时才调用，一般需求的用户不需要\n    if (onSchemaChange) {\n      onSchemaChange(newSchema);\n    }\n    onChange(newData);\n  };\n\n  const onItemChange = (key, value) => {\n    flattenWithData[key] = value;\n    onFlattenChange(flattenWithData);\n  };\n\n  const toggleModal = () => setLocal({ showModal: !local.showModal });\n  const toggleModal2 = () => setLocal({ showModal2: !local.showModal2 });\n  const toggleModal3 = () => setLocal({ showModal3: !local.showModal3 });\n\n  const clearSchema = () => {\n    setState({\n      schema: {\n        propsSchema: {\n          type: 'object',\n          properties: {},\n        },\n      },\n      formData: {},\n      selected: undefined,\n    });\n  };\n\n  const onTextareaChange = e => {\n    setLocal({ schemaForImport: e.target.value });\n  };\n\n  const importSchema = () => {\n    try {\n      const info = JSON.parse(local.schemaForImport);\n      const { propsSchema, ...rest } = info;\n      setState({\n        schema: {\n          propsSchema,\n        },\n        formData: {},\n        selected: undefined,\n        ...rest,\n      });\n    } catch (error) {\n      message.info('格式不对哦，请重新尝试'); // 可以加个格式哪里不对的提示\n    }\n    toggleModal2();\n  };\n\n  let displaySchemaString = '';\n\n  try {\n    const propsSchema = idToSchema(flattenWithData, '#', true);\n    displaySchemaString = JSON.stringify({ propsSchema, ...rest }, null, 2);\n  } catch (error) {}\n\n  const copySchema = () => {\n    copyTOClipboard(displaySchemaString);\n    message.info('复制成功');\n  };\n\n  const saveSchema = () => {\n    try {\n      const text = saveNameRef.current.state.value;\n      const name = 'save' + getSaveNumber();\n      const schema = idToSchema(flattenWithData, '#', true);\n      setSaveList([...saveList, { text, name, schema }]);\n      toggleModal3();\n    } catch (error) {\n      message.error('保存失败');\n    }\n  };\n\n  // TODO: flatten是频繁在变的，应该和其他两个函数分开\n  const store = {\n    flatten: flattenWithData,\n    onFlattenChange,\n    onItemChange,\n    ...globalProps,\n  };\n\n  if (simple) {\n    return (\n      <Ctx.Provider value={setState}>\n        <PropsCtx.Provider value={globalProps}>\n          <InnerCtx.Provider value={store}>\n            <FR preview={true} />\n          </InnerCtx.Provider>\n        </PropsCtx.Provider>\n      </Ctx.Provider>\n    );\n  }\n\n  return (\n    <Ctx.Provider value={setState}>\n      <PropsCtx.Provider value={globalProps}>\n        <InnerCtx.Provider value={store}>\n          <div className=\"flex vh-100 overflow-hidden\">\n            <Left saveList={saveList} setSaveList={setSaveList} />\n            <div className=\"mid-layout pr2\">\n              <div className=\"mv3 mh1\">\n                <Button\n                  className=\"mr2\"\n                  onClick={() => {\n                    setState({ preview: !preview, selected: '#' });\n                  }}\n                >\n                  {preview ? '开始编辑' : '最终展示'}\n                </Button>\n                <Button className=\"mr2\" onClick={clearSchema}>\n                  清空\n                </Button>\n                <Button className=\"mr2\" onClick={toggleModal3}>\n                  保存\n                </Button>\n                <Button className=\"mr2\" onClick={toggleModal2}>\n                  导入\n                </Button>\n                <Button type=\"primary\" className=\"mr2\" onClick={toggleModal}>\n                  导出schema\n                </Button>\n              </div>\n              <FR preview={preview} />\n            </div>\n            <Right globalProps={rest} />\n            <Modal\n              visible={local.showModal}\n              onOk={copySchema}\n              onCancel={toggleModal}\n              okText=\"复制\"\n              cancelText=\"取消\"\n            >\n              <div className=\"mt3\">\n                <TextArea\n                  style={{ fontSize: 12 }}\n                  value={displaySchemaString}\n                  autoSize={{ minRows: 10, maxRows: 30 }}\n                />\n              </div>\n            </Modal>\n            <Modal\n              visible={local.showModal2}\n              okText=\"导入\"\n              cancelText=\"取消\"\n              onOk={importSchema}\n              onCancel={toggleModal2}\n            >\n              <div className=\"mt3\">\n                <TextArea\n                  style={{ fontSize: 12 }}\n                  value={local.schemaForImport}\n                  placeholder=\"贴入需要导入的schema，模样可点击导出schema参考\"\n                  onChange={onTextareaChange}\n                  autoSize={{ minRows: 10, maxRows: 30 }}\n                />\n              </div>\n            </Modal>\n            <Modal\n              visible={local.showModal3}\n              okText=\"确定\"\n              cancelText=\"取消\"\n              onOk={saveSchema}\n              onCancel={toggleModal3}\n            >\n              <div className=\"mt4 flex items-center\">\n                <div style={{ width: 100 }}>保存名称：</div>\n                <div style={{ width: 280 }}>\n                  <Input\n                    defaultValue={'存档' + getSaveNumber()}\n                    ref={saveNameRef}\n                  />\n                </div>\n              </div>\n            </Modal>\n          </div>\n        </InnerCtx.Provider>\n      </PropsCtx.Provider>\n    </Ctx.Provider>\n  );\n};\n\nWrapper.defaultProps = {\n  labelWidth: 120,\n};\n\nexport default Wrapper;\n","import React from 'react';\nimport { useSet } from './hooks';\n// import SCHEMA from './json/basic.json';\nimport FRWrapper from './FRWrapper';\nimport { widgets } from './widgets/antd';\nimport { mapping } from './mapping';\nimport 'antd/dist/antd.css';\nimport 'tachyons';\nimport './App.css';\n\n// const SCHEMA = {\n//   propsSchema: {\n//     type: 'object',\n//     properties: {\n//       obj1: {\n//         title: '对象',\n//         type: 'object',\n//       },\n//       obj2: {\n//         title: '对象',\n//         type: 'object',\n//         properties: {\n//           obj3: {\n//             title: '对象',\n//             type: 'object',\n//             properties: {\n//               col: {\n//                 title: '颜色选择',\n//                 type: 'string',\n//                 format: 'color',\n//               },\n//               img: {\n//                 title: '图片展示',\n//                 type: 'string',\n//                 format: 'image',\n//                 'ui:options': {},\n//               },\n//             },\n//           },\n//         },\n//       },\n//     },\n//   },\n//   uiSchema: {},\n//   formData: {},\n// };\n\nconst SCHEMA = {\n  propsSchema: {\n    type: 'object',\n    properties: {},\n  },\n  uiSchema: {},\n  formData: {},\n};\n\n// TODO: formData 不存在的时候会报错：can't find # of undefined\n\nfunction App() {\n  const initGlobal = {\n    displayType: 'row',\n  };\n\n  const [state, setState] = useSet({\n    formData: SCHEMA.formData,\n    schema: SCHEMA,\n    selected: undefined, // 被选中的$id, 如果object/array的内部，以首字母0标识\n    hovering: undefined, // 目前没有用到\n    preview: false, // preview = false 是编辑模式\n    ...initGlobal, // form-render 的全局props等\n  });\n\n  const { schema, formData, preview, selected, hovering, ...rest } = state;\n\n  const { displayType } = rest;\n  const showDescIcon = displayType === 'row' ? true : false;\n\n  const onChange = data => {\n    setState({ formData: data });\n  };\n\n  const onSchemaChange = newSchema => {\n    const result = { ...schema, propsSchema: newSchema };\n    setState({ schema: result });\n  };\n\n  const _mapping = { ...mapping, array: 'listEditor' };\n\n  const globalProps = {\n    preview,\n    setState,\n    simple: false,\n    mapping: _mapping,\n    widgets,\n    selected,\n    hovering,\n    ...rest,\n    showDescIcon,\n  };\n\n  const FRProps = {\n    schema,\n    formData,\n    onChange,\n    onSchemaChange,\n    ...globalProps,\n  };\n\n  return <FRWrapper {...FRProps} />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport App from './App';\nimport './index.css';\n\nconst Root = () => {\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <App />\n    </DndProvider>\n  );\n};\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}